<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phoenix - AI Assistant | University of East London</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0d7377 0%, #14a085 100%);
            min-height: 100vh; overflow: hidden;
            transition: all 0.3s ease;
        }
        
        /* Dark Theme */
        body.dark-theme {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
        }
        
        body.dark-theme .main-container {
            background: #1e1e1e;
            color: white;
        }
        
        body.dark-theme .chat-messages {
            background: #2d2d2d;
        }
        
        body.dark-theme .chat-area {
            background: #2d2d2d;
        }
        
        body.dark-theme .chat-input {
            background: #3a3a3a;
            border-color: #555;
            color: white;
        }
        
        body.dark-theme .chat-input:focus {
            border-color: #14a085;
        }
        
        body.dark-theme .chat-input::placeholder {
            color: #aaa;
        }
        
        /* Dark theme scrollbar for chat input */
        body.dark-theme .chat-input::-webkit-scrollbar-thumb {
            background: #666;
        }
        body.dark-theme .chat-input::-webkit-scrollbar-thumb:hover {
            background: #888;
        }
        
        body.dark-theme .user-message {
            background: #14a085;
        }
        
        body.dark-theme .assistant-message {
            background: #3a3a3a;
            color: white;
        }
        
        body.dark-theme .typing-message {
            background: #3a3a3a;
            border-color: #555;
            color: white;
        }
        
        body.dark-theme .typing-text {
            color: white;
        }
        
        body.dark-theme .feedback-modal-content {
            background: #2d2d2d;
            color: white;
        }
        
        body.dark-theme .feedback-textarea {
            background: #3a3a3a;
            border-color: #555;
            color: white;
        }
        
        body.dark-theme .feedback-cancel {
            background: #4a4a4a;
            color: white;
        }
        
        body.dark-theme .language-dropdown {
            background: #2d2d2d;
            border-color: #555;
        }
        
        body.dark-theme .language-option {
            color: white;
        }
        
        body.dark-theme .language-option:hover {
            background: #3a3a3a;
        }
        
        body.dark-theme .language-option.selected {
            background: #2d4a4a;
            color: #14a085;
        }
        
        body.dark-theme .header-right {
            color: white;
        }
        
        body.dark-theme .sidebar {
            background: #1e1e1e;
            color: white;
        }
        
        body.dark-theme .sidebar-footer {
            border-top-color: #444;
        }
        
        body.dark-theme .clear-all-btn {
            background: #e74c3c;
        }
        
        body.dark-theme .clear-all-btn:hover {
            background: #c0392b;
            box-shadow: 0 4px 8px rgba(231, 76, 60, 0.4);
        }
        
        body.dark-theme .sidebar-content {
            background: #1e1e1e;
        }
        
        body.dark-theme .chat-header {
            background: #2d2d2d;
            color: white;
        }
        
        body.dark-theme .chat-input-container {
            background: #2d2d2d;
        }
        
        body.dark-theme .history-item {
            color: white;
        }
        
        body.dark-theme .history-item:hover {
            background: #3a3a3a;
        }
        
        body.dark-theme .search-input {
            background: #3a3a3a;
            border-color: #555;
            color: white;
        }
        
        body.dark-theme .search-input::placeholder {
            color: #aaa;
        }
        
        body.dark-theme .welcome-message h2 {
            color: #14a085;
        }
        
        body.dark-theme .welcome-message p {
            color: white;
        }
        
        body.dark-theme .session-id-display {
            color: white;
            opacity: 0.9;
        }
        
        body.dark-theme .history-title {
            color: white;
        }
        
        body.dark-theme .session-title {
            color: white;
        }
        
        body.dark-theme .session-preview {
            color: white;
        }
        
        body.dark-theme .session-time {
            color: white;
        }
        
        body.dark-theme .session-item:hover {
            background: #4a4a4a;
        }
        
        body.dark-theme .session-item.active {
            background: #2d4a4a;
            border-left-color: #14a085;
        }
        
        body.dark-theme .session-delete-btn {
            background: #cc3333;
        }
        body.dark-theme .session-delete-btn:hover {
            background: #dd0000 !important;
        }
        body.dark-theme .session-delete-btn.confirming {
            background: #dd5555;
        }
        
        /* Theme Toggle Button */
        .theme-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 8px 16px;
            color: white;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            margin-right: 12px;
        }
        
        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }
        
        .theme-icon {
            font-size: 14px;
        }
        
        body.dark-theme .theme-toggle {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
        }
        
        body.dark-theme .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Admin Console Button */
        .admin-console-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 8px 16px;
            color: white;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            margin-right: 12px;
        }
        
        .admin-console-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }
        
        .admin-icon {
            font-size: 14px;
        }
        
        body.dark-theme .admin-console-btn {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
        }
        
        body.dark-theme .admin-console-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Admin Console Modal */
        .admin-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .admin-modal-overlay.show {
            display: flex;
        }
        
        .admin-modal {
            background: white;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .admin-modal-header {
            background: linear-gradient(135deg, #0d7377 0%, #14a085 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-modal-header h2 {
            margin: 0;
            font-size: 20px;
            font-weight: 600;
        }
        
        .admin-modal-close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s;
        }
        
        .admin-modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .admin-modal-content {
            padding: 20px;
            overflow-y: auto;
            max-height: calc(80vh - 80px);
        }
        
        .admin-section {
            margin-bottom: 30px;
        }
        
        .admin-section h3 {
            margin: 0 0 20px 0;
            font-size: 16px;
            font-weight: 600;
            color: #333;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }
        
        .admin-setting {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #f0f0f0;
            border-radius: 10px;
            transition: border-color 0.2s;
        }
        
        .admin-setting:hover {
            border-color: #14a085;
        }
        
        .setting-info {
            flex: 1;
        }
        
        .setting-title {
            display: block;
            font-weight: 500;
            color: #333;
            margin-bottom: 5px;
        }
        
        .setting-description {
            font-size: 12px;
            color: #666;
            line-height: 1.4;
        }
        
        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
            flex-shrink: 0;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.3s;
            border-radius: 24px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }
        
        .toggle-switch input:checked + .toggle-slider {
            background-color: #14a085;
        }
        
        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        
        /* Model Selection */
        .model-selection {
            flex-direction: column;
            align-items: stretch;
            gap: 10px;
        }
        
        .model-selection label {
            font-weight: 500;
            color: #333;
        }
        
        .model-selection select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            background: white;
            cursor: pointer;
        }
        
        .model-selection select:focus {
            outline: none;
            border-color: #14a085;
        }
        
        /* Admin Actions */
        .admin-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            padding-top: 20px;
            border-top: 1px solid #f0f0f0;
        }
        
        .admin-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .admin-btn-save {
            background: #14a085;
            color: white;
        }
        
        .admin-btn-save:hover {
            background: #0d7377;
        }
        
        .admin-btn-reset {
            background: #f5f5f5;
            color: #666;
        }
        
        .admin-btn-reset:hover {
            background: #e0e0e0;
        }

        /* Dark Theme for Admin Console */
        body.dark-theme .admin-modal {
            background: #2d2d2d;
        }
        
        body.dark-theme .admin-section h3 {
            color: white;
            border-bottom-color: #555;
        }
        
        body.dark-theme .admin-setting {
            border-color: #555;
            background: #3a3a3a;
        }
        
        body.dark-theme .admin-setting:hover {
            border-color: #14a085;
        }
        
        body.dark-theme .setting-title {
            color: white;
        }
        
        body.dark-theme .setting-description {
            color: #aaa;
        }
        
        body.dark-theme .model-selection label {
            color: white;
        }
        
        body.dark-theme .model-selection select {
            background: #4a4a4a;
            color: white;
            border-color: #666;
        }
        
        body.dark-theme .admin-actions {
            border-top-color: #555;
        }
        
        body.dark-theme .admin-btn-reset {
            background: #4a4a4a;
            color: white;
        }
        
        body.dark-theme .admin-btn-reset:hover {
            background: #555;
        }

        /* Notification Animations */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        /* Debug Message Dark Theme */
        body.dark-theme .debug-message {
            background: #2a3f3f !important;
            color: #aaa !important;
            border-left-color: #14a085 !important;
        }

        /* Code Block Styles */
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            margin: 1em 0;
            overflow: hidden;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
        }
        .code-header {
            background: #e9ecef;
            padding: 8px 16px;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: #6c757d;
            font-weight: 600;
        }
        .code-language {
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .code-copy-btn {
            background: none;
            border: 1px solid #6c757d;
            color: #6c757d;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .code-copy-btn:hover {
            background: #6c757d;
            color: white;
        }
        .code-content {
            padding: 16px;
            overflow-x: auto;
            line-height: 1.5;
            font-size: 14px;
            color: #333;
        }
        .inline-code {
            background: #f1f3f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
            font-size: 0.9em;
            color: #d63384;
            border: 1px solid #e9ecef;
        }
        
        /* Dark theme code styles */
        body.dark-theme .code-block {
            background: #2d3748;
            border-color: #4a5568;
        }
        body.dark-theme .code-header {
            background: #1a202c;
            border-bottom-color: #4a5568;
            color: #a0aec0;
        }
        body.dark-theme .code-copy-btn {
            border-color: #a0aec0;
            color: #a0aec0;
        }
        body.dark-theme .code-copy-btn:hover {
            background: #a0aec0;
            color: #1a202c;
        }
        body.dark-theme .code-content {
            color: #e2e8f0;
        }
        body.dark-theme .inline-code {
            background: #1a202c;
            border-color: #4a5568;
            color: #81e6d9;
        }
        
        /* Streaming Response Cursor */
        .typing-cursor {
            display: inline-block;
            background-color: #14a085;
            animation: blink 1s infinite;
            width: 2px;
            margin-left: 2px;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        body.dark-theme .typing-cursor {
            background-color: #4dd0e1;
        }

        /* Authentication Styles */
        .auth-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #0d7377 0%, #14a085 100%);
            display: flex; justify-content: center; align-items: center; z-index: 1000;
        }
        .auth-form {
            background: white; border-radius: 20px; padding: 40px; width: 100%; max-width: 400px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2); text-align: center;
        }
        .auth-logo {
            width: 60px; height: 60px; margin: 0 auto 20px; background: linear-gradient(135deg, #0d7377 0%, #14a085 100%);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
        }
        .auth-title { font-size: 24px; font-weight: 600; margin-bottom: 30px; color: #333; }
        .form-group { margin-bottom: 20px; text-align: left; }
        .form-label { display: block; margin-bottom: 5px; font-weight: 500; color: #555; }
        .form-input {
            width: 100%; padding: 12px 16px; border: 2px solid #e0e0e0; border-radius: 10px;
            font-size: 14px; transition: border-color 0.3s; outline: none;
        }
        .form-input:focus { border-color: #0d7377; }
        .form-row { display: flex; gap: 10px; }
        .auth-button {
            width: 100%; padding: 14px; background: linear-gradient(135deg, #0d7377 0%, #14a085 100%);
            color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: 600;
            cursor: pointer; transition: transform 0.2s; margin-bottom: 15px;
        }
        .auth-button:hover { transform: translateY(-1px); }
        .auth-button:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
        .auth-link { color: #0d7377; text-decoration: none; font-weight: 500; }
        .auth-link:hover { text-decoration: underline; }
        .auth-error { color: #f44336; font-size: 14px; margin-top: 10px; }
        .auth-success { color: #4caf50; font-size: 14px; margin-top: 10px; }

        /* Main App Styles */
        .main-container {
            display: flex; height: 100vh; opacity: 0; transition: opacity 0.3s;
        }
        .main-container.authenticated { opacity: 1; }

        /* Sidebar Styles */
        .sidebar {
            width: 320px; background: rgba(255,255,255,0.95); border-right: 1px solid #e0e0e0;
            display: flex; flex-direction: column; backdrop-filter: blur(10px);
        }
        .sidebar-footer {
            padding: 15px 20px; border-top: 1px solid #e0e0e0; margin-top: auto;
        }
        .clear-all-btn {
            width: 100%; padding: 12px; background: #dc3545; color: white;
            border: none; border-radius: 8px; font-weight: 500; cursor: pointer;
            transition: all 0.3s ease; font-size: 14px;
        }
        .clear-all-btn:hover {
            background: #c82333; transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(220, 53, 69, 0.3);
        }
        .clear-all-btn:active {
            transform: translateY(0);
        }
        .sidebar-header {
            padding: 20px; background: linear-gradient(135deg, #0d7377 0%, #14a085 100%);
            color: white; display: flex; align-items: center; justify-content: space-between;
        }
        .user-info { display: flex; align-items: center; gap: 12px; }
        .user-avatar {
            width: 36px; height: 36px; background: rgba(255,255,255,0.2); border-radius: 50%;
            display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 14px;
        }
        .user-details h3 { font-size: 16px; font-weight: 600; }
        .user-details p { font-size: 12px; opacity: 0.8; }
        .logout-btn {
            background: rgba(255,255,255,0.2); border: none; color: white; padding: 6px 8px;
            border-radius: 4px; cursor: pointer; font-size: 11px; transition: background 0.2s;
            margin-left: 12px; flex-shrink: 0;
        }
        .logout-btn:hover { background: rgba(255,255,255,0.3); }

        .sidebar-content { flex: 1; overflow-y: auto; }
        .search-container {
            padding: 16px; border-bottom: 1px solid #e0e0e0;
        }
        .search-input {
            width: 100%; padding: 10px 16px; border: 1px solid #e0e0e0; border-radius: 20px;
            font-size: 14px; outline: none; background: #f8f9fa;
        }
        .search-input:focus { border-color: #0d7377; background: white; }

        .new-chat-btn {
            margin: 16px; padding: 12px; background: linear-gradient(135deg, #0d7377 0%, #14a085 100%);
            color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 500;
            transition: transform 0.2s; width: calc(100% - 32px);
        }
        .new-chat-btn:hover { transform: translateY(-1px); }

        .history-section { margin: 16px 0; }
        .history-title {
            padding: 0 16px 8px; font-size: 12px; font-weight: 600; color: #666;
            text-transform: uppercase; letter-spacing: 0.5px;
        }
        .session-item {
            padding: 12px 16px; cursor: pointer; transition: background 0.2s;
            border-left: 3px solid transparent; position: relative;
            display: flex; justify-content: space-between; align-items: center;
        }
        .session-item:hover { background: #f0f0f0; }
        .session-item.active { background: #e3f2fd; border-left-color: #0d7377; }
        .session-content { flex: 1; }
        .session-title { font-weight: 500; color: #333; margin-bottom: 4px; font-size: 14px; }
        .session-preview { font-size: 12px; color: #666; opacity: 0.8; }
        .session-time { font-size: 11px; color: #999; margin-top: 4px; }
        
        .session-delete-btn {
            opacity: 0; transition: opacity 0.2s; background: #ff4444; color: white;
            border: none; border-radius: 4px; padding: 4px 8px; font-size: 11px;
            cursor: pointer; margin-left: 8px;
        }
        .session-item:hover .session-delete-btn { opacity: 0.7; }
        .session-delete-btn:hover { opacity: 1 !important; background: #ff0000; }
        .session-delete-btn.confirming {
            background: #ff6666; opacity: 1; animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Chat Area Styles */
        .chat-area { flex: 1; display: flex; flex-direction: column; }
        .chat-header { 
            background: linear-gradient(135deg, #0d7377 0%, #14a085 100%); color: white; padding: 20px;
            display: flex; align-items: center; justify-content: space-between; box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header-left { display: flex; align-items: center; gap: 20px; }
        .header-right { display: flex; align-items: center; gap: 15px; }
        .chat-header h1 { font-size: 20px; font-weight: 600; display: flex; align-items: center; gap: 10px; }
        .phoenix-icon { 
            width: 40px; height: 40px; background: rgba(255,255,255,0.2); border-radius: 50%;
            display: flex; align-items: center; justify-content: center; padding: 6px;
        }
        .phoenix-svg { width: 28px; height: 28px; }
        .status-indicator { display: flex; align-items: center; gap: 8px; font-size: 14px; opacity: 0.9; }
        .status-dot { 
            width: 8px; height: 8px; background: #4dd0e1; border-radius: 50%; animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

        .language-selector { position: relative; }
        .language-btn {
            background: rgba(255,255,255,0.2); border: none; color: white; padding: 8px 12px;
            border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 8px;
            font-size: 14px; transition: background 0.2s;
        }
        .language-btn:hover { background: rgba(255,255,255,0.3); }
        .flag-icon { width: 20px; height: 15px; border-radius: 2px; }
        .language-dropdown {
            position: absolute; top: 100%; right: 0; background: white; border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15); max-height: 300px; overflow-y: auto;
            min-width: 200px; z-index: 100; display: none;
        }
        .language-dropdown.show { display: block; }
        .language-option {
            padding: 10px 15px; cursor: pointer; display: flex; align-items: center; gap: 10px;
            color: #333; transition: background 0.2s; font-size: 14px;
        }
        .language-option:hover { background: #f5f5f5; }
        .language-option.selected { background: #e3f2fd; color: #0d7377; }

        .chat-messages { 
            flex: 1; overflow-y: auto; padding: 20px; background: #f8f9fa; 
            display: flex; flex-direction: column;
        }
        .welcome-message { 
            text-align: center; margin: auto; padding: 40px; max-width: 500px;
        }
        .welcome-message h2 { color: #0d7377; margin-bottom: 15px; font-size: 24px; }
        .welcome-message p { color: #666; line-height: 1.6; font-size: 16px; }

        .message { 
            margin-bottom: 20px; display: flex; align-items: flex-start; gap: 12px; animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .message.user { flex-direction: row-reverse; }
        .message-avatar { 
            width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; 
            justify-content: center; color: white; font-weight: 600; font-size: 14px; flex-shrink: 0;
            background: linear-gradient(135deg, #0d7377 0%, #14a085 100%); padding: 6px;
        }
        .message-avatar-svg { width: 28px; height: 28px; }
        .message-content-wrapper { 
            max-width: 70%; display: flex; flex-direction: column; gap: 8px;
        }
        .message-content { 
            padding: 15px 20px; border-radius: 20px; font-size: 15px; 
            line-height: 1.5; word-wrap: break-word;
        }
        .message.user .message-content { 
            background: linear-gradient(135deg, #0d7377 0%, #14a085 100%); color: white; border-bottom-right-radius: 5px;
        }
        .message.assistant .message-content { 
            background: white; color: #333; border: 1px solid #e0e0e0; border-bottom-left-radius: 5px;
        }
        .message-content p:last-child {
            margin-bottom: 0;
        }
        .rag-indicator {
            font-size: 11px; color: #666; margin-top: 5px; opacity: 0.8;
            display: flex; align-items: center; gap: 4px;
        }
        .rag-icon { width: 12px; height: 12px; fill: #666; }
        .feedback-buttons { 
            display: flex; gap: 8px; align-items: center; opacity: 0.7; transition: opacity 0.3s;
        }
        .message.assistant:hover .feedback-buttons { opacity: 1; }
        .feedback-btn { 
            background: none; border: 1px solid #ddd; border-radius: 50%; width: 32px; height: 32px; 
            display: flex; align-items: center; justify-content: center; cursor: pointer; 
            transition: all 0.3s ease; font-size: 16px;
        }
        .feedback-btn:hover { background: #f5f5f5; transform: scale(1.1); }
        .feedback-btn.thumbs-up:hover { color: #4caf50; border-color: #4caf50; }
        .feedback-btn.thumbs-down:hover { color: #f44336; border-color: #f44336; }
        .feedback-btn.selected.thumbs-up { background: #4caf50; color: white; border-color: #4caf50; }
        .feedback-btn.selected.thumbs-down { background: #f44336; color: white; border-color: #f44336; }

        .typing-indicator { display: none; align-items: center; gap: 12px; margin: 20px 0; margin-left: 15px; }
        .typing-indicator.show { display: flex; }
        .typing-message { 
            display: flex; align-items: center; gap: 12px; padding: 15px 20px; background: white; 
            border: 1px solid #e0e0e0; border-radius: 20px; border-bottom-left-radius: 5px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .typing-spinner {
            width: 20px; height: 20px; border: 2px solid #e0e0e0; border-top: 2px solid #0d7377;
            border-radius: 50%; animation: spin 1s linear infinite;
        }
        .typing-text {
            color: #555; font-size: 14px; font-weight: 500;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .chat-input-container { padding: 20px; background: white; border-top: 1px solid #e0e0e0; }
        .chat-input-wrapper { display: flex; gap: 10px; align-items: flex-end; }
        .input-group { position: relative; flex: 1; }
        .chat-input { 
            flex: 1; padding: 18px 65px 18px 24px; border: 2px solid #e0e0e0; border-radius: 28px; 
            font-size: 16px; resize: none; outline: none; transition: all 0.3s ease; 
            font-family: inherit; min-height: 60px; max-height: 200px; width: 100%;
            line-height: 1.5; scroll-behavior: smooth; overflow-y: auto;
            scrollbar-width: thin; scrollbar-color: #ccc transparent;
        }
        .chat-input:focus { border-color: #0d7377; box-shadow: 0 0 0 3px rgba(13,115,119,0.1); }
        
        /* Custom scrollbar for chat input */
        .chat-input::-webkit-scrollbar {
            width: 6px;
        }
        .chat-input::-webkit-scrollbar-track {
            background: transparent;
            border-radius: 10px;
        }
        .chat-input::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 10px;
            transition: background 0.3s ease;
        }
        .chat-input::-webkit-scrollbar-thumb:hover {
            background: #999;
        }
        .voice-btn {
            position: absolute; right: 18px; top: 50%; transform: translateY(-50%);
            background: white; border: none; cursor: pointer; padding: 12px;
            border-radius: 50%; transition: all 0.3s ease; color: #424242;
            width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .voice-btn:hover { 
            background: #f5f5f5; 
            transform: translateY(-50%) scale(1.05); 
            box-shadow: 0 2px 5px rgba(0,0,0,0.16);
        }
        .voice-btn:active { transform: translateY(-50%) scale(0.95); }
        .voice-btn.recording { 
            color: white; 
            background: #d32f2f; 
            animation: pulse-record 1.5s infinite;
            box-shadow: 0 2px 8px rgba(211,47,47,0.3);
        }
        .voice-btn.recording svg { transform: scale(1.1); }
        @keyframes pulse-record { 0%, 100% { transform: translateY(-50%) scale(1); } 50% { transform: translateY(-50%) scale(1.1); } }
        .send-btn {
            background: linear-gradient(135deg, #0d7377 0%, #14a085 100%); color: white;
            border: none; border-radius: 50%; width: 56px; height: 56px; cursor: pointer;
            display: flex; align-items: center; justify-content: center; transition: all 0.3s ease;
            font-size: 20px; box-shadow: 0 2px 8px rgba(13,115,119,0.3);
        }
        .send-btn:hover { transform: scale(1.05); }
        .send-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .clear-btn {
            background: #6c757d; color: white; border: none; border-radius: 50%;
            width: 50px; height: 50px; cursor: pointer; display: flex; align-items: center;
            justify-content: center; transition: all 0.3s ease;
        }
        .clear-btn:hover { transform: scale(1.05); background: #5a6268; }
        .clear-btn:active { transform: scale(0.95); }

        .voice-status {
            position: absolute; bottom: 70px; left: 20px; right: 20px;
            background: rgba(0,0,0,0.8); color: white; padding: 10px 15px;
            border-radius: 20px; font-size: 14px; text-align: center;
            opacity: 0; transition: opacity 0.3s; pointer-events: none;
        }
        .voice-status.listening { opacity: 1; }
        .voice-status.processing { opacity: 1; background: rgba(13,115,119,0.9); }

        /* Feedback Modal */
        .feedback-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 1000;
        }
        .feedback-modal.show { display: flex; }
        .feedback-content {
            background: white; border-radius: 15px; padding: 30px; width: 90%; max-width: 500px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        .feedback-header { font-size: 20px; font-weight: 600; margin-bottom: 20px; color: #333; }
        .feedback-textarea {
            width: 100%; min-height: 120px; padding: 15px; border: 2px solid #e0e0e0;
            border-radius: 10px; resize: vertical; font-family: inherit; font-size: 14px; outline: none;
        }
        .feedback-textarea:focus { border-color: #0d7377; }
        .feedback-actions {
            display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;
        }
        .feedback-cancel, .feedback-submit {
            padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer;
            font-weight: 500; transition: all 0.2s;
        }
        .feedback-cancel { background: #f5f5f5; color: #666; }
        .feedback-cancel:hover { background: #e0e0e0; }
        .feedback-submit { background: #0d7377; color: white; }
        .feedback-submit:hover { background: #0a5d61; }

        .error-message {
            background: #ffebee; color: #c62828; padding: 15px; border-radius: 10px;
            margin-bottom: 15px; border-left: 4px solid #f44336;
        }

        .session-id-display {
            font-size: 12px; opacity: 0.7;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .main-container { flex-direction: column; }
            .sidebar { width: 100%; height: 200px; border-right: none; border-bottom: 1px solid #e0e0e0; }
            .sidebar-content { max-height: 140px; }
            .chat-area { flex: 1; }
            .chat-header h1 { font-size: 18px; }
            .message-content-wrapper { max-width: 85%; }
        }

        /* Loading Animation */
        .loading { opacity: 0.6; pointer-events: none; }
        .spinner {
            display: inline-block; width: 20px; height: 20px; border: 3px solid #f3f3f3;
            border-top: 3px solid #0d7377; border-radius: 50%; animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <!-- Authentication Container -->
    <div class="auth-container" id="authContainer">
        <!-- Login Form -->
        <div class="auth-form" id="loginForm">
            <div class="auth-logo">
                <svg class="phoenix-svg" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                    <!-- UEL-style phoenix symbol - geometric and modern -->
                    <path d="M12 2L8 6v4l4 4 4-4V6z" fill="white" stroke="rgba(255,255,255,0.3)" stroke-width="0.5"/>
                    <!-- Wing spread elements -->
                    <path d="M8 8L4 12l4 4M16 8l4 4-4 4" stroke="white" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                    <!-- Central body -->
                    <rect x="10" y="12" width="4" height="8" rx="2" fill="rgba(255,255,255,0.9)"/>
                    <!-- Head/crown detail -->
                    <path d="M10 4l2-2 2 2v4h-4z" fill="white"/>
                    <!-- Accent lines -->
                    <line x1="12" y1="6" x2="12" y2="18" stroke="rgba(255,255,255,0.6)" stroke-width="1"/>
                    <line x1="6" y1="12" x2="18" y2="12" stroke="rgba(255,255,255,0.6)" stroke-width="1"/>
                </svg>
            </div>
            <h2 class="auth-title">Welcome to Phoenix</h2>
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-input" id="loginEmail" placeholder="Enter your email" required>
            </div>
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" class="form-input" id="loginPassword" placeholder="Enter your password" required>
            </div>
            <button class="auth-button" id="loginBtn">Sign In</button>
            <p>Don't have an account? <a href="#" class="auth-link" id="showSignup">Sign up</a></p>
            <p><a href="#" class="auth-link" id="showForgotPassword">Forgot password?</a></p>
            <div id="loginError" class="auth-error" style="display: none;"></div>
        </div>

        <!-- Signup Form -->
        <div class="auth-form" id="signupForm" style="display: none;">
            <div class="auth-logo">
                <svg class="phoenix-svg" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                    <!-- UEL-style phoenix symbol - geometric and modern -->
                    <path d="M12 2L8 6v4l4 4 4-4V6z" fill="white" stroke="rgba(255,255,255,0.3)" stroke-width="0.5"/>
                    <!-- Wing spread elements -->
                    <path d="M8 8L4 12l4 4M16 8l4 4-4 4" stroke="white" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                    <!-- Central body -->
                    <rect x="10" y="12" width="4" height="8" rx="2" fill="rgba(255,255,255,0.9)"/>
                    <!-- Head/crown detail -->
                    <path d="M10 4l2-2 2 2v4h-4z" fill="white"/>
                    <!-- Accent lines -->
                    <line x1="12" y1="6" x2="12" y2="18" stroke="rgba(255,255,255,0.6)" stroke-width="1"/>
                    <line x1="6" y1="12" x2="18" y2="12" stroke="rgba(255,255,255,0.6)" stroke-width="1"/>
                </svg>
            </div>
            <h2 class="auth-title">Create Account</h2>
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">First Name</label>
                    <input type="text" class="form-input" id="signupFirstName" placeholder="First name" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Last Name</label>
                    <input type="text" class="form-input" id="signupLastName" placeholder="Last name" required>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-input" id="signupEmail" placeholder="Enter your email" required>
            </div>
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" class="form-input" id="signupPassword" placeholder="Create a password" required>
            </div>
            <div class="form-group">
                <label class="form-label">Confirm Password</label>
                <input type="password" class="form-input" id="signupConfirmPassword" placeholder="Confirm your password" required>
            </div>
            <button class="auth-button" id="signupBtn">Create Account</button>
            <p>Already have an account? <a href="#" class="auth-link" id="showLogin">Sign in</a></p>
            <div id="signupError" class="auth-error" style="display: none;"></div>
            <div id="signupSuccess" class="auth-success" style="display: none;"></div>
        </div>

        <!-- Email Confirmation Form -->
        <div class="auth-form" id="confirmForm" style="display: none;">
            <div class="auth-logo">
                <svg class="phoenix-svg" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                    <!-- UEL-style phoenix symbol - geometric and modern -->
                    <path d="M12 2L8 6v4l4 4 4-4V6z" fill="white" stroke="rgba(255,255,255,0.3)" stroke-width="0.5"/>
                    <!-- Wing spread elements -->
                    <path d="M8 8L4 12l4 4M16 8l4 4-4 4" stroke="white" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                    <!-- Central body -->
                    <rect x="10" y="12" width="4" height="8" rx="2" fill="rgba(255,255,255,0.9)"/>
                    <!-- Head/crown detail -->
                    <path d="M10 4l2-2 2 2v4h-4z" fill="white"/>
                    <!-- Accent lines -->
                    <line x1="12" y1="6" x2="12" y2="18" stroke="rgba(255,255,255,0.6)" stroke-width="1"/>
                    <line x1="6" y1="12" x2="18" y2="12" stroke="rgba(255,255,255,0.6)" stroke-width="1"/>
                </svg>
            </div>
            <h2 class="auth-title">Verify Email</h2>
            <p style="margin-bottom: 20px; color: #666;">Please enter the verification code sent to your email address.</p>
            <div class="form-group">
                <label class="form-label">Verification Code</label>
                <input type="text" class="form-input" id="confirmCode" placeholder="Enter verification code" required>
            </div>
            <button class="auth-button" id="confirmBtn">Verify Email</button>
            <p><a href="#" class="auth-link" id="backToLogin">Back to login</a></p>
            <div id="confirmError" class="auth-error" style="display: none;"></div>
            <div id="confirmSuccess" class="auth-success" style="display: none;"></div>
        </div>

        <!-- Forgot Password Form -->
        <div class="auth-form" id="forgotPasswordForm" style="display: none;">
            <div class="auth-logo">
                <svg class="phoenix-svg" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                    <!-- UEL-style phoenix symbol - geometric and modern -->
                    <path d="M12 2L8 6v4l4 4 4-4V6z" fill="white" stroke="rgba(255,255,255,0.3)" stroke-width="0.5"/>
                    <!-- Wing spread elements -->
                    <path d="M8 8L4 12l4 4M16 8l4 4-4 4" stroke="white" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                    <!-- Central body -->
                    <rect x="10" y="12" width="4" height="8" rx="2" fill="rgba(255,255,255,0.9)"/>
                    <!-- Head/crown detail -->
                    <path d="M10 4l2-2 2 2v4h-4z" fill="white"/>
                    <!-- Accent lines -->
                    <line x1="12" y1="6" x2="12" y2="18" stroke="rgba(255,255,255,0.6)" stroke-width="1"/>
                    <line x1="6" y1="12" x2="18" y2="12" stroke="rgba(255,255,255,0.6)" stroke-width="1"/>
                </svg>
            </div>
            <h2 class="auth-title">Reset Password</h2>
            <p style="margin-bottom: 20px; color: #666;">Enter your email address and we'll send you a reset code.</p>
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-input" id="forgotEmail" placeholder="Enter your email" required>
            </div>
            <button class="auth-button" id="forgotPasswordBtn">Send Reset Code</button>
            <p><a href="#" class="auth-link" id="backToLoginFromForgot">Back to login</a></p>
            <div id="forgotError" class="auth-error" style="display: none;"></div>
            <div id="forgotSuccess" class="auth-success" style="display: none;"></div>
        </div>

        <!-- Reset Password Form -->
        <div class="auth-form" id="resetPasswordForm" style="display: none;">
            <div class="auth-logo">
                <svg class="phoenix-svg" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                    <!-- UEL-style phoenix symbol - geometric and modern -->
                    <path d="M12 2L8 6v4l4 4 4-4V6z" fill="white" stroke="rgba(255,255,255,0.3)" stroke-width="0.5"/>
                    <!-- Wing spread elements -->
                    <path d="M8 8L4 12l4 4M16 8l4 4-4 4" stroke="white" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                    <!-- Central body -->
                    <rect x="10" y="12" width="4" height="8" rx="2" fill="rgba(255,255,255,0.9)"/>
                    <!-- Head/crown detail -->
                    <path d="M10 4l2-2 2 2v4h-4z" fill="white"/>
                    <!-- Accent lines -->
                    <line x1="12" y1="6" x2="12" y2="18" stroke="rgba(255,255,255,0.6)" stroke-width="1"/>
                    <line x1="6" y1="12" x2="18" y2="12" stroke="rgba(255,255,255,0.6)" stroke-width="1"/>
                </svg>
            </div>
            <h2 class="auth-title">Reset Password</h2>
            <div class="form-group">
                <label class="form-label">Verification Code</label>
                <input type="text" class="form-input" id="resetCode" placeholder="Enter reset code" required>
            </div>
            <div class="form-group">
                <label class="form-label">New Password</label>
                <input type="password" class="form-input" id="resetPassword" placeholder="Enter new password" required>
            </div>
            <div class="form-group">
                <label class="form-label">Confirm New Password</label>
                <input type="password" class="form-input" id="resetConfirmPassword" placeholder="Confirm new password" required>
            </div>
            <button class="auth-button" id="resetPasswordBtn">Reset Password</button>
            <p><a href="#" class="auth-link" id="backToLoginFromReset">Back to login</a></p>
            <div id="resetError" class="auth-error" style="display: none;"></div>
            <div id="resetSuccess" class="auth-success" style="display: none;"></div>
        </div>
    </div>

    <!-- Main Application -->
    <div class="main-container" id="mainContainer">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">U</div>
                    <div class="user-details">
                        <h3 id="userName">User</h3>
                        <p id="userEmail">user@example.com</p>
                    </div>
                </div>
                <button class="logout-btn" id="logoutBtn">Logout</button>
            </div>
            
            <div class="sidebar-content">
                <div class="search-container">
                    <input type="text" class="search-input" id="searchInput" placeholder="Search conversations...">
                </div>
                
                <button class="new-chat-btn" id="newChatBtn" data-translate="new_conversation">+ New Conversation</button>
                
                <div class="history-section" id="todaySection">
                    <div class="history-title" data-translate="today">Today</div>
                    <div id="todayChats"></div>
                </div>
                
                <div class="history-section" id="thisWeekSection">
                    <div class="history-title" data-translate="this_week">This Week</div>
                    <div id="thisWeekChats"></div>
                </div>
                
                <div class="history-section" id="olderSection">
                    <div class="history-title" data-translate="older">Older</div>
                    <div id="olderChats"></div>
                </div>
                
                <!-- Clear All History Button -->
                <div class="sidebar-footer">
                    <button class="clear-all-btn" id="clearAllHistoryBtn" data-translate="clear_all_history">Clear All History</button>
                </div>
            </div>
        </div>

        <!-- Chat Area -->
        <div class="chat-area">
            <div class="chat-header">
                <div class="header-left">
                    <div class="phoenix-icon">
                        <svg class="phoenix-svg" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                            <!-- UEL-style phoenix symbol - geometric and modern -->
                            <path d="M12 2L8 6v4l4 4 4-4V6z" fill="white" stroke="rgba(255,255,255,0.3)" stroke-width="0.5"/>
                            <!-- Wing spread elements -->
                            <path d="M8 8L4 12l4 4M16 8l4 4-4 4" stroke="white" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                            <!-- Central body -->
                            <rect x="10" y="12" width="4" height="8" rx="2" fill="rgba(255,255,255,0.9)"/>
                            <!-- Head/crown detail -->
                            <path d="M10 4l2-2 2 2v4h-4z" fill="white"/>
                            <!-- Accent lines -->
                            <line x1="12" y1="6" x2="12" y2="18" stroke="rgba(255,255,255,0.6)" stroke-width="1"/>
                            <line x1="6" y1="12" x2="18" y2="12" stroke="rgba(255,255,255,0.6)" stroke-width="1"/>
                        </svg>
                    </div>
                    <div>
                        <h1 data-translate="title">Phoenix</h1>
                        <div class="status-indicator">
                            <div class="status-dot"></div>
                            <span data-translate="status">Online  RAG enabled</span>
                        </div>
                    </div>
                </div>
                <div class="header-right">
                    <button class="admin-console-btn" id="adminConsoleBtn">
                        <span class="admin-icon"></span>
                        <span>Admin Console</span>
                    </button>
                    <button class="theme-toggle" id="themeToggle">
                        <span class="theme-icon"></span>
                        <span data-translate="theme_toggle">Toggle Theme</span>
                    </button>
                    <div class="language-selector">
                        <button class="language-btn" id="languageBtn">
                            <img src="https://flagcdn.com/20x15/gb.png" alt="English" class="flag-icon" id="currentFlag">
                            <span id="currentLanguage" data-translate="english">English</span>
                            <span></span>
                        </button>
                        <div class="language-dropdown" id="languageDropdown">
                            <!-- Language options will be populated here -->
                        </div>
                    </div>
                    <div class="session-id-display">
                        <span data-translate="session_id">Session ID:</span> <span id="sessionIdDisplay">phoenix-...</span>
                    </div>
                </div>
            </div>
            
            <!-- Admin Console Modal -->
            <div class="admin-modal-overlay" id="adminModalOverlay">
                <div class="admin-modal">
                    <div class="admin-modal-header">
                        <h2>Admin Console</h2>
                        <button class="admin-modal-close" id="adminModalClose"></button>
                    </div>
                    <div class="admin-modal-content">
                        <!-- AI Model Configuration -->
                        <div class="admin-section">
                            <h3>AI Model Configuration</h3>
                            <div class="admin-setting">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="adaptiveModelToggle" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <div class="setting-info">
                                    <span class="setting-title">Adaptive Model Selection</span>
                                    <span class="setting-description">Automatically choose between Sonnet (complex) and Haiku (simple) based on query complexity</span>
                                </div>
                            </div>
                            <div class="admin-setting model-selection" id="modelSelection">
                                <label>Default Model:</label>
                                <select id="defaultModelSelect">
                                    <option value="sonnet">Claude Sonnet</option>
                                    <option value="haiku">Claude Haiku</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Other Features -->
                        <div class="admin-section">
                            <h3>Features</h3>
                            <div class="admin-setting">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="ragToggle" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <div class="setting-info">
                                    <span class="setting-title">RAG (Retrieval Augmented Generation)</span>
                                    <span class="setting-description">Enable contextual information retrieval for better responses</span>
                                </div>
                            </div>
                            <div class="admin-setting">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="streamingToggle" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <div class="setting-info">
                                    <span class="setting-title">Streaming Responses</span>
                                    <span class="setting-description">Show responses as they are generated in real-time</span>
                                </div>
                            </div>
                            <div class="admin-setting">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="debugToggle">
                                    <span class="toggle-slider"></span>
                                </label>
                                <div class="setting-info">
                                    <span class="setting-title">Debug Mode</span>
                                    <span class="setting-description">Show additional debugging information and model selection reasoning</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="admin-actions">
                            <button class="admin-btn admin-btn-save" id="saveAdminSettings">Save Settings</button>
                            <button class="admin-btn admin-btn-reset" id="resetAdminSettings">Reset to Defaults</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chat-messages" id="chatMessages">
                <div class="welcome-message">
                    <h2 data-translate="welcome_title">Welcome to Phoenix!</h2>
                    <p data-translate="welcome_message">I'm your AI assistant powered by Claude Sonnet with access to UEL's knowledge base. You can type or use voice input. How can I help you today?</p>
                </div>
            </div>

            <div class="typing-indicator" id="typingIndicator">
                <div class="message-avatar">
                    <svg class="message-avatar-svg" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                        <!-- UEL-style phoenix symbol - geometric and modern -->
                        <path d="M12 2L8 6v4l4 4 4-4V6z" fill="white" stroke="rgba(255,255,255,0.3)" stroke-width="0.5"/>
                        <!-- Wing spread elements -->
                        <path d="M8 8L4 12l4 4M16 8l4 4-4 4" stroke="white" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                        <!-- Central body -->
                        <rect x="10" y="12" width="4" height="8" rx="2" fill="rgba(255,255,255,0.9)"/>
                        <!-- Head/crown detail -->
                        <path d="M10 4l2-2 2 2v4h-4z" fill="white"/>
                        <!-- Accent lines -->
                        <line x1="12" y1="6" x2="12" y2="18" stroke="rgba(255,255,255,0.6)" stroke-width="1"/>
                        <line x1="6" y1="12" x2="18" y2="12" stroke="rgba(255,255,255,0.6)" stroke-width="1"/>
                    </svg>
                </div>
                <div class="typing-message">
                    <div class="typing-spinner"></div>
                    <div class="typing-text">Processing your question... Please wait while I search through the knowledge base and prepare your response.</div>
                </div>
            </div>

            <div class="chat-input-container">
                <div class="chat-input-wrapper">
                    <div class="input-group">
                        <textarea id="chatInput" class="chat-input" placeholder="Type your message here or click the microphone to speak..." rows="1" autocomplete="off" spellcheck="true"></textarea>
                        <button id="voiceBtn" class="voice-btn" title="Click to start/stop voice input">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 2C10.9 2 10 2.9 10 4V12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12V4C14 2.9 13.1 2 12 2Z"></path>
                                <path d="M19 10V12C19 15.86 15.86 19 12 19C8.14 19 5 15.86 5 12V10"></path>
                                <path d="M12 19V23"></path>
                                <path d="M8 23H16"></path>
                            </svg>
                        </button>
                    </div>
                    <button id="sendBtn" class="send-btn" title="Send message"></button>
                    <button id="clearBtn" class="clear-btn" title="Clear chat">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 6h18"></path>
                            <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                            <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                            <line x1="10" y1="11" x2="10" y2="17"></line>
                            <line x1="14" y1="11" x2="14" y2="17"></line>
                        </svg>
                    </button>
                </div>
                <div id="voiceStatus" class="voice-status"></div>
            </div>
        </div>
    </div>

    <!-- Feedback Modal -->
    <div class="feedback-modal" id="feedbackModal">
        <div class="feedback-content">
            <h3 class="feedback-header" id="feedbackTitle">Share your feedback</h3>
            <textarea id="feedbackText" class="feedback-textarea" placeholder="Please tell us more about your experience with this response..."></textarea>
            <div class="feedback-actions">
                <button id="feedbackCancel" class="feedback-cancel">Cancel</button>
                <button id="feedbackSubmit" class="feedback-submit">Submit</button>
            </div>
        </div>
    </div>

    <!-- Clear All History Confirmation Modal -->
    <div class="feedback-modal" id="clearAllHistoryModal">
        <div class="feedback-content">
            <h3 class="feedback-header"> Clear All Chat History</h3>
            <p style="margin-bottom: 20px; color: #666; line-height: 1.5;">
                This will permanently delete ALL your chat conversations and cannot be undone. 
                <br><br>
                <strong>To confirm, type "delete me" below:</strong>
            </p>
            <input type="text" id="clearAllConfirmInput" class="feedback-textarea" 
                   placeholder="Type 'delete me' to confirm..." 
                   style="min-height: auto; padding: 12px 15px;" />
            <div class="feedback-actions">
                <button id="clearAllCancel" class="feedback-cancel">Cancel</button>
                <button id="clearAllConfirm" class="feedback-submit" disabled>Clear All History</button>
            </div>
        </div>
    </div>

    <script>
        // API Configuration
        const API_ENDPOINT = '{{API_ENDPOINT}}';
        const AUTH_ENDPOINT = API_ENDPOINT + '/auth';
        const CHAT_HISTORY_ENDPOINT = API_ENDPOINT + '/chat-history';
        
        // Global variables
        var sessionId = localStorage.getItem('phoenix-current-session') || generateSessionId(); // Reuse existing session or create new
        var currentSessionId = sessionId; // For chat history
        
        // Save sessionId to localStorage
        localStorage.setItem('phoenix-current-session', sessionId);
        var conversationHistory = [];
        var isTyping = false;
        var currentFeedbackData = null;
        var recognition = null;
        var isListening = false;
        var currentLanguage = localStorage.getItem('phoenix-language') || 'en';
        var currentUser = null;
        var accessToken = localStorage.getItem('phoenix-access-token');
        var refreshToken = localStorage.getItem('phoenix-refresh-token');
        
        // Comprehensive language support with country flags
        var supportedLanguages = {
            'en': { name: 'English', flag: 'gb', speechLang: 'en-GB' },
            'es': { name: 'Espaol', flag: 'es', speechLang: 'es-ES' },
            'fr': { name: 'Franais', flag: 'fr', speechLang: 'fr-FR' },
            'de': { name: 'Deutsch', flag: 'de', speechLang: 'de-DE' },
            'it': { name: 'Italiano', flag: 'it', speechLang: 'it-IT' },
            'pt': { name: 'Portugus', flag: 'pt', speechLang: 'pt-PT' },
            'ru': { name: '', flag: 'ru', speechLang: 'ru-RU' },
            'zh': { name: '', flag: 'cn', speechLang: 'zh-CN' },
            'ja': { name: '', flag: 'jp', speechLang: 'ja-JP' },
            'ko': { name: '', flag: 'kr', speechLang: 'ko-KR' },
            'ar': { name: '', flag: 'sa', speechLang: 'ar-SA' },
            'hi': { name: '', flag: 'in', speechLang: 'hi-IN' },
            'tr': { name: 'Trke', flag: 'tr', speechLang: 'tr-TR' },
            'sv': { name: 'Svenska', flag: 'se', speechLang: 'sv-SE' },
            'da': { name: 'Dansk', flag: 'dk', speechLang: 'da-DK' },
            'no': { name: 'Norsk', flag: 'no', speechLang: 'no-NO' },
            'fi': { name: 'Suomi', flag: 'fi', speechLang: 'fi-FI' },
            'nl': { name: 'Nederlands', flag: 'nl', speechLang: 'nl-NL' },
            'pl': { name: 'Polski', flag: 'pl', speechLang: 'pl-PL' },
            'cs': { name: 'etina', flag: 'cz', speechLang: 'cs-CZ' },
            'sk': { name: 'Slovenina', flag: 'sk', speechLang: 'sk-SK' },
            'hu': { name: 'Magyar', flag: 'hu', speechLang: 'hu-HU' },
            'ro': { name: 'Romn', flag: 'ro', speechLang: 'ro-RO' },
            'bg': { name: '', flag: 'bg', speechLang: 'bg-BG' },
            'hr': { name: 'Hrvatski', flag: 'hr', speechLang: 'hr-HR' },
            'sr': { name: '', flag: 'rs', speechLang: 'sr-RS' },
            'sl': { name: 'Slovenina', flag: 'si', speechLang: 'sl-SI' },
            'et': { name: 'Eesti', flag: 'ee', speechLang: 'et-EE' },
            'lv': { name: 'Latvieu', flag: 'lv', speechLang: 'lv-LV' },
            'lt': { name: 'Lietuvi', flag: 'lt', speechLang: 'lt-LT' },
            'uk': { name: '', flag: 'ua', speechLang: 'uk-UA' },
            'el': { name: '', flag: 'gr', speechLang: 'el-GR' },
            'he': { name: '', flag: 'il', speechLang: 'he-IL' },
            'th': { name: '', flag: 'th', speechLang: 'th-TH' },
            'vi': { name: 'Ting Vit', flag: 'vn', speechLang: 'vi-VN' },
            'id': { name: 'Bahasa Indonesia', flag: 'id', speechLang: 'id-ID' },
            'ms': { name: 'Bahasa Melayu', flag: 'my', speechLang: 'ms-MY' },
            'tl': { name: 'Filipino', flag: 'ph', speechLang: 'tl-PH' },
            'bn': { name: '', flag: 'bd', speechLang: 'bn-BD' },
            'ur': { name: '', flag: 'pk', speechLang: 'ur-PK' },
            'fa': { name: '', flag: 'ir', speechLang: 'fa-IR' },
            'ta': { name: '', flag: 'in', speechLang: 'ta-IN' },
            'te': { name: '', flag: 'in', speechLang: 'te-IN' },
            'ml': { name: '', flag: 'in', speechLang: 'ml-IN' },
            'kn': { name: '', flag: 'in', speechLang: 'kn-IN' },
            'gu': { name: '', flag: 'in', speechLang: 'gu-IN' },
            'pa': { name: '', flag: 'in', speechLang: 'pa-IN' },
            'mr': { name: '', flag: 'in', speechLang: 'mr-IN' },
            'as': { name: '', flag: 'in', speechLang: 'as-IN' },
            'or': { name: '', flag: 'in', speechLang: 'or-IN' },
            'sw': { name: 'Kiswahili', flag: 'ke', speechLang: 'sw-KE' },
            'am': { name: '', flag: 'et', speechLang: 'am-ET' },
            'yo': { name: 'Yorb', flag: 'ng', speechLang: 'yo-NG' },
            'ig': { name: 'Igbo', flag: 'ng', speechLang: 'ig-NG' },
            'ha': { name: 'Hausa', flag: 'ng', speechLang: 'ha-NG' },
            'zu': { name: 'isiZulu', flag: 'za', speechLang: 'zu-ZA' },
            'af': { name: 'Afrikaans', flag: 'za', speechLang: 'af-ZA' },
            'xh': { name: 'isiXhosa', flag: 'za', speechLang: 'xh-ZA' },
            'is': { name: 'slenska', flag: 'is', speechLang: 'is-IS' },
            'ga': { name: 'Gaeilge', flag: 'ie', speechLang: 'ga-IE' },
            'cy': { name: 'Cymraeg', flag: 'wales', speechLang: 'cy-GB' },
            'mt': { name: 'Malti', flag: 'mt', speechLang: 'mt-MT' },
            'eu': { name: 'Euskera', flag: 'es', speechLang: 'eu-ES' },
            'ca': { name: 'Catal', flag: 'es', speechLang: 'ca-ES' },
            'gl': { name: 'Galego', flag: 'es', speechLang: 'gl-ES' },
            'lb': { name: 'Ltzebuergesch', flag: 'lu', speechLang: 'lb-LU' },
            'mk': { name: '', flag: 'mk', speechLang: 'mk-MK' },
            'sq': { name: 'Shqip', flag: 'al', speechLang: 'sq-AL' },
            'be': { name: '', flag: 'by', speechLang: 'be-BY' },
            'hy': { name: '', flag: 'am', speechLang: 'hy-AM' },
            'ka': { name: '', flag: 'ge', speechLang: 'ka-GE' },
            'az': { name: 'Azrbaycan', flag: 'az', speechLang: 'az-AZ' },
            'kk': { name: '', flag: 'kz', speechLang: 'kk-KZ' },
            'ky': { name: '', flag: 'kg', speechLang: 'ky-KG' },
            'uz': { name: "O'zbekcha", flag: 'uz', speechLang: 'uz-UZ' },
            'tg': { name: '', flag: 'tj', speechLang: 'tg-TJ' },
            'mn': { name: '', flag: 'mn', speechLang: 'mn-MN' }
        };

        var translations = {
            'en': {
                title: 'Phoenix',
                status: 'Online  RAG enabled',
                english: 'English',
                welcome_title: 'Welcome to Phoenix!',
                welcome_message: "I'm your AI assistant powered by Claude Sonnet with access to UEL's knowledge base. You can type or use voice input. How can I help you today?",
                input_placeholder: 'Type your message here or click the microphone to speak...',
                mic_button_title: 'Click to start/stop voice input',
                clear_chat: 'Clear Chat',
                clear_all_history: 'Clear All History',
                session_id: 'Session ID:',
                feedback_title: 'Share your feedback',
                feedback_good_title: 'Great! What did you like about this response?',
                feedback_bad_title: 'Help us improve - what went wrong?',
                feedback_placeholder: 'Please tell us more about your experience with this response...',
                cancel: 'Cancel',
                submit: 'Submit',
                thumbs_up_title: 'Good response',
                thumbs_down_title: 'Bad response',
                rag_indicator: 'Enhanced with UEL Knowledge Base',
                voice_recording: 'Recording... Click microphone again to stop',
                voice_complete: 'Voice input complete. You can edit the text and send.',
                voice_error: 'Voice input error',
                voice_no_speech: 'No speech detected. Please try again.',
                voice_network: 'Network error. Check your connection.',
                voice_not_allowed: 'Microphone access denied. Please allow microphone access.',
                voice_not_supported: 'Voice input not supported in this browser',
                processing: 'Processing speech...',
                error_message: 'Sorry, I encountered an error. Please try again.',
                clear_confirmation: 'Chat cleared successfully',
                feedback_thanks: 'Thanks for your feedback!',
                theme_light: 'Light Theme',
                theme_dark: 'Dark Theme',
                theme_toggle: 'Toggle Theme',
                new_conversation: '+ New Conversation',
                today: 'Today',
                this_week: 'This Week',
                older: 'Older',
                search_placeholder: 'Search conversations...',
                delete: 'Delete',
                confirm_delete: 'Confirm?',
                delete_conversation: 'Delete conversation'
            },
            'es': {
                title: 'Phoenix',
                status: 'En lnea  RAG habilitado',
                english: 'Espaol',
                welcome_title: 'Bienvenido a Phoenix!',
                welcome_message: "Soy tu asistente de IA impulsado por Claude Sonnet con acceso a la base de conocimientos de UEL. Puedes escribir o usar entrada de voz. Cmo puedo ayudarte hoy?",
                input_placeholder: 'Escribe tu mensaje aqu o haz clic en el micrfono para hablar...',
                mic_button_title: 'Haz clic para iniciar/detener entrada de voz',
                clear_chat: 'Limpiar Chat',
                session_id: 'ID de Sesin:',
                feedback_title: 'Comparte tu comentario',
                feedback_good_title: 'Genial! Qu te gust de esta respuesta?',
                feedback_bad_title: 'Aydanos a mejorar - qu sali mal?',
                feedback_placeholder: 'Por favor cuntanos ms sobre tu experiencia con esta respuesta...',
                cancel: 'Cancelar',
                submit: 'Enviar',
                thumbs_up_title: 'Buena respuesta',
                thumbs_down_title: 'Mala respuesta',
                rag_indicator: 'Mejorado con Base de Conocimientos UEL',
                voice_recording: 'Grabando... Haz clic en el micrfono nuevamente para parar',
                voice_complete: 'Entrada de voz completa. Puedes editar el texto y enviar.',
                voice_error: 'Error de entrada de voz',
                voice_no_speech: 'No se detect habla. Por favor intenta de nuevo.',
                voice_network: 'Error de red. Verifica tu conexin.',
                voice_not_allowed: 'Acceso al micrfono denegado. Por favor permite el acceso al micrfono.',
                voice_not_supported: 'Entrada de voz no soportada en este navegador',
                processing: 'Procesando habla...',
                error_message: 'Lo siento, encontr un error. Por favor intenta de nuevo.',
                clear_confirmation: 'Chat limpiado exitosamente',
                feedback_thanks: 'Gracias por tu comentario!',
                theme_light: 'Tema Claro',
                theme_dark: 'Tema Oscuro',
                theme_toggle: 'Cambiar Tema',
                new_conversation: '+ Nueva Conversacin',
                today: 'Hoy',
                this_week: 'Esta Semana',
                older: 'Ms Antiguos',
                search_placeholder: 'Buscar conversaciones...',
                delete: 'Eliminar',
                confirm_delete: 'Confirmar?',
                delete_conversation: 'Eliminar conversacin'
            },
            'fr': {
                title: 'Phoenix',
                status: 'En ligne  RAG activ',
                english: 'Franais',
                welcome_title: 'Bienvenue sur Phoenix !',
                welcome_message: "Je suis votre assistant IA aliment par Claude Sonnet avec accs  la base de connaissances d'UEL. Vous pouvez taper ou utiliser la saisie vocale. Comment puis-je vous aider aujourd'hui ?",
                input_placeholder: 'Tapez votre message ici ou cliquez sur le microphone pour parler...',
                mic_button_title: 'Cliquez pour dmarrer/arrter la saisie vocale',
                clear_chat: 'Effacer le Chat',
                session_id: 'ID de Session :',
                feedback_title: 'Partagez vos commentaires',
                feedback_good_title: "Super ! Qu'avez-vous aim dans cette rponse ?",
                feedback_bad_title: "Aidez-nous  amliorer - qu'est-ce qui n'a pas fonctionn ?",
                feedback_placeholder: 'Veuillez nous en dire plus sur votre exprience avec cette rponse...',
                cancel: 'Annuler',
                submit: 'Soumettre',
                thumbs_up_title: 'Bonne rponse',
                thumbs_down_title: 'Mauvaise rponse',
                rag_indicator: 'Amlior avec la base de connaissances UEL',
                voice_recording: 'Enregistrement... Cliquez  nouveau sur le microphone pour arrter',
                voice_complete: 'Saisie vocale termine. Vous pouvez modifier le texte et envoyer.',
                voice_error: 'Erreur de saisie vocale',
                voice_no_speech: 'Aucune parole dtecte. Veuillez ressayer.',
                voice_network: 'Erreur rseau. Vrifiez votre connexion.',
                voice_not_allowed: "Accs au microphone refus. Veuillez autoriser l'accs au microphone.",
                voice_not_supported: 'Saisie vocale non supporte dans ce navigateur',
                processing: 'Traitement de la parole...',
                error_message: "Dsol, j'ai rencontr une erreur. Veuillez ressayer.",
                clear_confirmation: 'Chat effac avec succs',
                feedback_thanks: 'Merci pour votre retour !',
                theme_light: 'Thme Clair',
                theme_dark: 'Thme Sombre',
                theme_toggle: 'Changer de Thme'
            },
            'de': {
                title: 'Phoenix',
                status: 'Online  RAG aktiviert',
                english: 'Deutsch',
                welcome_title: 'Willkommen bei Phoenix!',
                welcome_message: "Ich bin Ihr KI-Assistent, angetrieben von Claude Sonnet mit Zugriff auf UELs Wissensdatenbank. Sie knnen tippen oder Spracheingabe verwenden. Wie kann ich Ihnen heute helfen?",
                input_placeholder: 'Geben Sie hier Ihre Nachricht ein oder klicken Sie auf das Mikrofon zum Sprechen...',
                mic_button_title: 'Klicken zum Starten/Stoppen der Spracheingabe',
                clear_chat: 'Chat Lschen',
                session_id: 'Sitzungs-ID:',
                feedback_title: 'Teilen Sie Ihr Feedback',
                feedback_good_title: 'Groartig! Was hat Ihnen an dieser Antwort gefallen?',
                feedback_bad_title: 'Helfen Sie uns zu verbessern - was ist schief gelaufen?',
                feedback_placeholder: 'Bitte erzhlen Sie uns mehr ber Ihre Erfahrung mit dieser Antwort...',
                cancel: 'Abbrechen',
                submit: 'Senden',
                thumbs_up_title: 'Gute Antwort',
                thumbs_down_title: 'Schlechte Antwort',
                rag_indicator: 'Erweitert mit UEL Wissensdatenbank',
                voice_recording: 'Aufnahme... Klicken Sie erneut auf das Mikrofon zum Stoppen',
                voice_complete: 'Spracheingabe abgeschlossen. Sie knnen den Text bearbeiten und senden.',
                voice_error: 'Spracheingabe-Fehler',
                voice_no_speech: 'Keine Sprache erkannt. Bitte versuchen Sie es erneut.',
                voice_network: 'Netzwerkfehler. berprfen Sie Ihre Verbindung.',
                voice_not_allowed: 'Mikrofonzugriff verweigert. Bitte erlauben Sie den Mikrofonzugriff.',
                voice_not_supported: 'Spracheingabe in diesem Browser nicht untersttzt',
                processing: 'Sprache wird verarbeitet...',
                error_message: 'Entschuldigung, ich bin auf einen Fehler gestoen. Bitte versuchen Sie es erneut.',
                clear_confirmation: 'Chat erfolgreich gelscht',
                feedback_thanks: 'Danke fr Ihr Feedback!',
                theme_light: 'Helles Design',
                theme_dark: 'Dunkles Design',
                theme_toggle: 'Design Wechseln'
            },
            'it': {
                title: 'Phoenix',
                status: 'Online  RAG abilitato',
                english: 'Italiano',
                welcome_title: 'Benvenuto in Phoenix!',
                welcome_message: "Sono il tuo assistente IA alimentato da Claude Sonnet con accesso alla base di conoscenze di UEL. Puoi digitare o utilizzare l'input vocale. Come posso aiutarti oggi?",
                input_placeholder: 'Digita il tuo messaggio qui o clicca sul microfono per parlare...',
                mic_button_title: "Clicca per avviare/fermare l'input vocale",
                clear_chat: 'Cancella Chat',
                session_id: 'ID Sessione:',
                feedback_title: 'Condividi il tuo feedback',
                feedback_good_title: 'Ottimo! Cosa ti  piaciuto di questa risposta?',
                feedback_bad_title: 'Aiutaci a migliorare - cosa  andato storto?',
                feedback_placeholder: 'Per favore raccontaci di pi sulla tua esperienza con questa risposta...',
                cancel: 'Annulla',
                submit: 'Invia',
                thumbs_up_title: 'Buona risposta',
                thumbs_down_title: 'Cattiva risposta',
                rag_indicator: 'Potenziato con la base di conoscenze UEL',
                voice_recording: 'Registrazione... Clicca di nuovo sul microfono per fermare',
                voice_complete: 'Input vocale completato. Puoi modificare il testo e inviare.',
                voice_error: 'Errore input vocale',
                voice_no_speech: 'Nessuna parola rilevata. Riprova.',
                voice_network: 'Errore di rete. Controlla la tua connessione.',
                voice_not_allowed: "Accesso al microfono negato. Per favore consenti l'accesso al microfono.",
                voice_not_supported: 'Input vocale non supportato in questo browser',
                processing: 'Elaborazione del parlato...',
                error_message: 'Scusa, ho incontrato un errore. Riprova.',
                clear_confirmation: 'Chat cancellata con successo',
                feedback_thanks: 'Grazie per il tuo feedback!',
                theme_light: 'Tema Chiaro',
                theme_dark: 'Tema Scuro',
                theme_toggle: 'Cambia Tema'
            },
            'pt': {
                title: 'Phoenix',
                status: 'Online  RAG ativado',
                english: 'Portugus',
                welcome_title: 'Bem-vindo ao Phoenix!',
                welcome_message: "Sou seu assistente de IA alimentado pelo Claude Sonnet com acesso  base de conhecimentos da UEL. Voc pode digitar ou usar entrada de voz. Como posso ajud-lo hoje?",
                input_placeholder: 'Digite sua mensagem aqui ou clique no microfone para falar...',
                mic_button_title: 'Clique para iniciar/parar entrada de voz',
                clear_chat: 'Limpar Chat',
                session_id: 'ID da Sesso:',
                feedback_title: 'Compartilhe seu feedback',
                feedback_good_title: 'timo! O que voc gostou nesta resposta?',
                feedback_bad_title: 'Ajude-nos a melhorar - o que deu errado?',
                feedback_placeholder: 'Por favor nos conte mais sobre sua experincia com esta resposta...',
                cancel: 'Cancelar',
                submit: 'Enviar',
                thumbs_up_title: 'Boa resposta',
                thumbs_down_title: 'M resposta',
                rag_indicator: 'Aprimorado com Base de Conhecimentos UEL',
                voice_recording: 'Gravando... Clique no microfone novamente para parar',
                voice_complete: 'Entrada de voz completa. Voc pode editar o texto e enviar.',
                voice_error: 'Erro de entrada de voz',
                voice_no_speech: 'Nenhuma fala detectada. Tente novamente.',
                voice_network: 'Erro de rede. Verifique sua conexo.',
                voice_not_allowed: 'Acesso ao microfone negado. Permita o acesso ao microfone.',
                voice_not_supported: 'Entrada de voz no suportada neste navegador',
                processing: 'Processando fala...',
                error_message: 'Desculpe, encontrei um erro. Tente novamente.',
                clear_confirmation: 'Chat limpo com sucesso',
                feedback_thanks: 'Obrigado pelo seu feedback!',
                theme_light: 'Tema Claro',
                theme_dark: 'Tema Escuro',
                theme_toggle: 'Alternar Tema'
            },
            'ru': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: '   Phoenix!',
                welcome_message: "  -   Claude Sonnet      UEL.       .      ?",
                input_placeholder: '         ...',
                mic_button_title: '  /  ',
                clear_chat: ' ',
                session_id: 'ID :',
                feedback_title: ' ',
                feedback_good_title: '!      ?',
                feedback_bad_title: '   -    ?',
                feedback_placeholder: '       ...',
                cancel: '',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: '   UEL',
                voice_recording: '...      ',
                voice_complete: '  .      .',
                voice_error: '  ',
                voice_no_speech: '  .  .',
                voice_network: ' .  .',
                voice_not_allowed: '   .    .',
                voice_not_supported: '      ',
                processing: ' ...',
                error_message: ',  .  .',
                clear_confirmation: '  ',
                feedback_thanks: '   !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'zh': {
                title: 'Phoenix',
                status: '  RAG',
                english: '',
                welcome_title: 'Phoenix',
                welcome_message: "AIClaude SonnetUEL",
                input_placeholder: '...',
                mic_button_title: '/',
                clear_chat: '',
                session_id: 'ID',
                feedback_title: '',
                feedback_good_title: '',
                feedback_bad_title: ' - ',
                feedback_placeholder: '...',
                cancel: '',
                submit: '',
                thumbs_up_title: '',
                thumbs_down_title: '',
                rag_indicator: 'UEL',
                voice_recording: '...',
                voice_complete: '',
                voice_error: '',
                voice_no_speech: '',
                voice_network: '',
                voice_not_allowed: '',
                voice_not_supported: '',
                processing: '...',
                error_message: '',
                clear_confirmation: '',
                feedback_thanks: '',
                theme_light: '',
                theme_dark: '',
                theme_toggle: ''
            },
            'ja': {
                title: 'Phoenix',
                status: '  RAG',
                english: '',
                welcome_title: 'Phoenix',
                welcome_message: "UELClaude SonnetAI",
                input_placeholder: '...',
                mic_button_title: '/',
                clear_chat: '',
                session_id: 'ID',
                feedback_title: '',
                feedback_good_title: '',
                feedback_bad_title: ' - ',
                feedback_placeholder: '...',
                cancel: '',
                submit: '',
                thumbs_up_title: '',
                thumbs_down_title: '',
                rag_indicator: 'UEL',
                voice_recording: '...',
                voice_complete: '',
                voice_error: '',
                voice_no_speech: '',
                voice_network: '',
                voice_not_allowed: '',
                voice_not_supported: '',
                processing: '...',
                error_message: '',
                clear_confirmation: '',
                feedback_thanks: '',
                theme_light: '',
                theme_dark: '',
                theme_toggle: ''
            },
            'nl': {
                title: 'Phoenix',
                status: 'Online  RAG ingeschakeld',
                english: 'Nederlands',
                welcome_title: 'Welkom bij Phoenix!',
                welcome_message: "Ik ben uw AI-assistent aangedreven door Claude Sonnet met toegang tot UEL's kennisbank. U kunt typen of spraak invoer gebruiken. Hoe kan ik u vandaag helpen?",
                input_placeholder: 'Type hier uw bericht of klik op de microfoon om te spreken...',
                mic_button_title: 'Klik om spraak invoer te starten/stoppen',
                clear_chat: 'Chat Wissen',
                session_id: 'Sessie ID:',
                feedback_title: 'Deel uw feedback',
                feedback_good_title: 'Geweldig! Wat vond u goed aan dit antwoord?',
                feedback_bad_title: 'Help ons verbeteren - wat ging er mis?',
                feedback_placeholder: 'Vertel ons meer over uw ervaring met dit antwoord...',
                cancel: 'Annuleren',
                submit: 'Versturen',
                thumbs_up_title: 'Goed antwoord',
                thumbs_down_title: 'Slecht antwoord',
                rag_indicator: 'Verbeterd met UEL Kennisbank',
                voice_recording: 'Opnemen... Klik opnieuw op de microfoon om te stoppen',
                voice_complete: 'Spraak invoer voltooid. U kunt de tekst bewerken en verzenden.',
                voice_error: 'Spraak invoer fout',
                voice_no_speech: 'Geen spraak gedetecteerd. Probeer opnieuw.',
                voice_network: 'Netwerkfout. Controleer uw verbinding.',
                voice_not_allowed: 'Microfoon toegang geweigerd. Sta microfoon toegang toe.',
                voice_not_supported: 'Spraak invoer niet ondersteund in deze browser',
                processing: 'Spraak verwerken...',
                error_message: 'Sorry, ik kwam een fout tegen. Probeer opnieuw.',
                clear_confirmation: 'Chat succesvol gewist',
                feedback_thanks: 'Bedankt voor je feedback!',
                theme_light: 'Licht Thema',
                theme_dark: 'Donker Thema',
                theme_toggle: 'Wissel Thema'
            },
            'pl': {
                title: 'Phoenix',
                status: 'Online  RAG wczony',
                english: 'Polski',
                welcome_title: 'Witamy w Phoenix!',
                welcome_message: "Jestem Twoim asystentem AI napdzanym przez Claude Sonnet z dostpem do bazy wiedzy UEL. Moesz pisa lub uywa wprowadzania gosowego. Jak mog Ci dzi pomc?",
                input_placeholder: 'Wpisz swoj wiadomo tutaj lub kliknij mikrofon, aby mwi...',
                mic_button_title: 'Kliknij, aby rozpocz/zatrzyma wprowadzanie gosowe',
                clear_chat: 'Wyczy czat',
                session_id: 'ID sesji:',
                feedback_title: 'Podziel si opini',
                feedback_good_title: 'wietnie! Co podobao Ci si w tej odpowiedzi?',
                feedback_bad_title: 'Pom nam si poprawi - co poszo nie tak?',
                feedback_placeholder: 'Powiedz nam wicej o swoich dowiadczeniach z t odpowiedzi...',
                cancel: 'Anuluj',
                submit: 'Wylij',
                thumbs_up_title: 'Dobra odpowied',
                thumbs_down_title: 'Za odpowied',
                rag_indicator: 'Wzbogacony baz wiedzy UEL',
                voice_recording: 'Nagrywanie... Kliknij ponownie mikrofon, aby zatrzyma',
                voice_complete: 'Wprowadzanie gosowe zakoczone. Moesz edytowa tekst i wysa.',
                voice_error: 'Bd wprowadzania gosowego',
                voice_no_speech: 'Nie wykryto mowy. Sprbuj ponownie.',
                voice_network: 'Bd sieci. Sprawd poczenie.',
                voice_not_allowed: 'Dostp do mikrofonu odrzucony. Zezwl na dostp do mikrofonu.',
                voice_not_supported: 'Wprowadzanie gosowe nie jest obsugiwane w tej przegldarce',
                processing: 'Przetwarzanie mowy...',
                error_message: 'Przepraszam, napotkaem bd. Sprbuj ponownie.',
                clear_confirmation: 'Czat zosta pomylnie wyczyszczony',
                feedback_thanks: 'Dzikujemy za opini!',
                theme_light: 'Jasny Motyw',
                theme_dark: 'Ciemny Motyw',
                theme_toggle: 'Przecz Motyw'
            },
            'ko': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: 'Phoenix   !',
                welcome_message: " UEL      Claude Sonnet  AI .        .   ?",
                input_placeholder: '     ...',
                mic_button_title: '  / ',
                clear_chat: ' ',
                session_id: ' ID:',
                feedback_title: ' ',
                feedback_good_title: '!     ?',
                feedback_bad_title: '   -  ?',
                feedback_placeholder: '     ...',
                cancel: '',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: 'UEL   ',
                voice_recording: ' ...    ',
                voice_complete: '  .     .',
                voice_error: '  ',
                voice_no_speech: '  .  .',
                voice_network: ' .  .',
                voice_not_allowed: '  .   .',
                voice_not_supported: '     ',
                processing: '  ...',
                error_message: '.  .  .',
                clear_confirmation: '  ',
                feedback_thanks: ' !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'ar': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: '   Phoenix!',
                welcome_message: "     Claude Sonnet       UEL.      .    ",
                input_placeholder: '       ...',
                mic_button_title: ' /  ',
                clear_chat: ' ',
                session_id: ' :',
                feedback_title: ' ',
                feedback_good_title: '!      ',
                feedback_bad_title: '   -    ',
                feedback_placeholder: '       ...',
                cancel: '',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: '   UEL',
                voice_recording: ' ...      ',
                voice_complete: '  .    .',
                voice_error: '   ',
                voice_no_speech: '   .    .',
                voice_network: '  .   .',
                voice_not_allowed: '   .    .',
                voice_not_supported: '      ',
                processing: '  ...',
                error_message: '  .    .',
                clear_confirmation: '   ',
                feedback_thanks: ' !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'hi': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: 'Phoenix    !',
                welcome_message: " UEL        Claude Sonnet    AI                       ?",
                input_placeholder: '            ...',
                mic_button_title: '  /     ',
                clear_chat: '  ',
                session_id: ' ID:',
                feedback_title: '   ',
                feedback_good_title: ' !       ?',
                feedback_bad_title: '      -   ?',
                feedback_placeholder: '           ...',
                cancel: ' ',
                submit: ' ',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: 'UEL     ',
                voice_recording: '...         ',
                voice_complete: '             ',
                voice_error: '  ',
                voice_no_speech: '        ',
                voice_network: '    ',
                voice_not_allowed: '           ',
                voice_not_supported: '       ',
                processing: '     ...',
                error_message: ' ,        ',
                clear_confirmation: '    ',
                feedback_thanks: '    !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'tr': {
                title: 'Phoenix',
                status: 'evrimii  RAG etkin',
                english: 'Trke',
                welcome_title: "Phoenix'e Ho Geldiniz!",
                welcome_message: "UEL'in bilgi tabanna eriimi olan Claude Sonnet tarafndan desteklenen AI asistannzm. Yazabilir veya ses girii kullanabilirsiniz. Bugn size nasl yardmc olabilirim?",
                input_placeholder: 'Mesajnz buraya yazn veya konumak iin mikrofona tklayn...',
                mic_button_title: 'Ses giriini balatmak/durdurmak iin tklayn',
                clear_chat: 'Sohbeti Temizle',
                session_id: 'Oturum ID:',
                feedback_title: 'Geri bildiriminizi paylan',
                feedback_good_title: 'Harika! Bu yantta beendiiniz ey neydi?',
                feedback_bad_title: 'Gelimemize yardm edin - neyi yanl gitti?',
                feedback_placeholder: 'Bu yantla ilgili deneyiminiz hakknda daha fazla bilgi verin...',
                cancel: 'ptal',
                submit: 'Gnder',
                thumbs_up_title: 'yi yant',
                thumbs_down_title: 'Kt yant',
                rag_indicator: 'UEL Bilgi Taban ile Gelitirildi',
                voice_recording: 'Kaydediliyor... Durdurmak iin mikrofona tekrar tklayn',
                voice_complete: 'Ses girii tamamland. Metni dzenleyebilir ve gnderebilirsiniz.',
                voice_error: 'Ses girii hatas',
                voice_no_speech: 'Konuma alglanmad. Ltfen tekrar deneyin.',
                voice_network: 'A hatas. Balantnz kontrol edin.',
                voice_not_allowed: 'Mikrofon eriimi reddedildi. Ltfen mikrofon eriimine izin verin.',
                voice_not_supported: 'Bu taraycda ses girii desteklenmiyor',
                processing: 'Konuma ileniyor...',
                error_message: 'zgnm, bir hatayla karlatm. Ltfen tekrar deneyin.',
                clear_confirmation: 'Sohbet baaryla temizlendi',
                feedback_thanks: 'Geri bildiriminiz iin teekkrler!',
                theme_light: 'Ak Tema',
                theme_dark: 'Koyu Tema',
                theme_toggle: 'Tema Deitir'
            },
            'sv': {
                title: 'Phoenix',
                status: 'Online  RAG aktiverat',
                english: 'Svenska',
                welcome_title: 'Vlkommen till Phoenix!',
                welcome_message: "Jag r din AI-assistent driven av Claude Sonnet med tillgng till UEL:s kunskapsbas. Du kan skriva eller anvnda rstinmatning. Hur kan jag hjlpa dig idag?",
                input_placeholder: 'Skriv ditt meddelande hr eller klicka p mikrofonen fr att tala...',
                mic_button_title: 'Klicka fr att starta/stoppa rstinmatning',
                clear_chat: 'Rensa chatt',
                session_id: 'Sessions-ID:',
                feedback_title: 'Dela din feedback',
                feedback_good_title: 'Utmrkt! Vad gillade du med detta svar?',
                feedback_bad_title: 'Hjlp oss frbttra - vad gick fel?',
                feedback_placeholder: 'Bertta mer om din upplevelse med detta svar...',
                cancel: 'Avbryt',
                submit: 'Skicka',
                thumbs_up_title: 'Bra svar',
                thumbs_down_title: 'Dligt svar',
                rag_indicator: 'Frbttrad med UEL kunskapsbas',
                voice_recording: 'Spelar in... Klicka p mikrofonen igen fr att stoppa',
                voice_complete: 'Rstinmatning klar. Du kan redigera texten och skicka.',
                voice_error: 'Rstinmatningsfel',
                voice_no_speech: 'Inget tal upptckt. Frsk igen.',
                voice_network: 'Ntverksfel. Kontrollera din anslutning.',
                voice_not_allowed: 'Mikrofontillgng nekad. Tillt mikrofontillgng.',
                voice_not_supported: 'Rstinmatning stds inte i denna webblsare',
                processing: 'Bearbetar tal...',
                error_message: 'Tyvrr, jag sttte p ett fel. Frsk igen.',
                clear_confirmation: 'Chatten har rensats',
                feedback_thanks: 'Tack fr din terkoppling!',
                theme_light: 'Ljust Tema',
                theme_dark: 'Mrkt Tema',
                theme_toggle: 'Vxla Tema'
            },
            'da': {
                title: 'Phoenix',
                status: 'Online  RAG aktiveret',
                english: 'Dansk',
                welcome_title: 'Velkommen til Phoenix!',
                welcome_message: "Jeg er din AI-assistent drevet af Claude Sonnet med adgang til UELs vidensbase. Du kan skrive eller bruge stemmeinput. Hvordan kan jeg hjlpe dig i dag?",
                input_placeholder: 'Skriv din besked her eller klik p mikrofonen for at tale...',
                mic_button_title: 'Klik for at starte/stoppe stemmeinput',
                clear_chat: 'Ryd chat',
                session_id: 'Sessions-ID:',
                feedback_title: 'Del din feedback',
                feedback_good_title: 'Fantastisk! Hvad kunne du lide ved dette svar?',
                feedback_bad_title: 'Hjlp os med at forbedre - hvad gik galt?',
                feedback_placeholder: 'Fortl os mere om din oplevelse med dette svar...',
                cancel: 'Annuller',
                submit: 'Send',
                thumbs_up_title: 'Godt svar',
                thumbs_down_title: 'Drligt svar',
                rag_indicator: 'Forbedret med UEL vidensbase',
                voice_recording: 'Optager... Klik p mikrofonen igen for at stoppe',
                voice_complete: 'Stemmeinput fuldfrt. Du kan redigere teksten og sende.',
                voice_error: 'Stemmeinputfejl',
                voice_no_speech: 'Ingen tale registreret. Prv igen.',
                voice_network: 'Netvrksfejl. Tjek din forbindelse.',
                voice_not_allowed: 'Mikrofonadgang ngtet. Tillad mikrofonadgang.',
                voice_not_supported: 'Stemmeinput understttes ikke i denne browser',
                processing: 'Behandler tale...',
                error_message: 'Beklager, jeg stdte p en fejl. Prv igen.',
                clear_confirmation: 'Chatten er ryddet',
                feedback_thanks: 'Takk for tilbakemeldingen din!',
                theme_light: 'Lyst Tema',
                theme_dark: 'Mrkt Tema',
                theme_toggle: 'Bytt Tema'
            },
            'no': {
                title: 'Phoenix',
                status: 'Online  RAG aktivert',
                english: 'Norsk',
                welcome_title: 'Velkommen til Phoenix!',
                welcome_message: "Jeg er din AI-assistent drevet av Claude Sonnet med tilgang til UELs kunnskapsbase. Du kan skrive eller bruke taleinput. Hvordan kan jeg hjelpe deg i dag?",
                input_placeholder: 'Skriv meldingen din her eller klikk p mikrofonen for  snakke...',
                mic_button_title: 'Klikk for  starte/stoppe taleinput',
                clear_chat: 'Tm chat',
                session_id: 'kt-ID:',
                feedback_title: 'Del din tilbakemelding',
                feedback_good_title: 'Flott! Hva likte du med dette svaret?',
                feedback_bad_title: 'Hjelp oss  forbedre - hva gikk galt?',
                feedback_placeholder: 'Fortell oss mer om din opplevelse med dette svaret...',
                cancel: 'Avbryt',
                submit: 'Send',
                thumbs_up_title: 'Godt svar',
                thumbs_down_title: 'Drlig svar',
                rag_indicator: 'Forbedret med UEL kunnskapsbase',
                voice_recording: 'Tar opp... Klikk p mikrofonen igjen for  stoppe',
                voice_complete: 'Taleinput fullfrt. Du kan redigere teksten og sende.',
                voice_error: 'Taleinputfeil',
                voice_no_speech: 'Ingen tale oppdaget. Prv igjen.',
                voice_network: 'Nettverksfeil. Sjekk tilkoblingen din.',
                voice_not_allowed: 'Mikrofontilgang nektet. Tillat mikrofontilgang.',
                voice_not_supported: 'Taleinput stttes ikke i denne nettleseren',
                processing: 'Behandler tale...',
                error_message: 'Beklager, jeg sttte p en feil. Prv igjen.',
                clear_confirmation: 'Chatten er tmt',
                feedback_thanks: 'Tak for din feedback!',
                theme_light: 'Lyst Tema',
                theme_dark: 'Mrkt Tema',
                theme_toggle: 'Skift Tema'
            },
            'fi': {
                title: 'Phoenix',
                status: 'Online  RAG kytss',
                english: 'Suomi',
                welcome_title: 'Tervetuloa Phoenixiin!',
                welcome_message: "Olen Claude Sonnetilla toimiva AI-assistenttisi, jolla on psy UEL:n tietokantaan. Voit kirjoittaa tai kytt nisytt. Miten voin auttaa sinua tnn?",
                input_placeholder: 'Kirjoita viestisi thn tai klikkaa mikrofonia puhuaksesi...',
                mic_button_title: 'Klikkaa aloittaaksesi/lopettaaksesi nisytn',
                clear_chat: 'Tyhjenn keskustelu',
                session_id: 'Istunto-ID:',
                feedback_title: 'Jaa palautteesi',
                feedback_good_title: 'Mahtavaa! Mist pidit tss vastauksessa?',
                feedback_bad_title: 'Auta meit parantamaan - mik meni pieleen?',
                feedback_placeholder: 'Kerro meille lis kokemuksestasi tmn vastauksen kanssa...',
                cancel: 'Peruuta',
                submit: 'Lhet',
                thumbs_up_title: 'Hyv vastaus',
                thumbs_down_title: 'Huono vastaus',
                rag_indicator: 'Parannettu UEL-tietokannalla',
                voice_recording: 'Nauhoitetaan... Klikkaa mikrofonia uudelleen lopettaaksesi',
                voice_complete: 'nisytt valmis. Voit muokata teksti ja lhett.',
                voice_error: 'nisyttvirhe',
                voice_no_speech: 'Puhetta ei havaittu. Yrit uudelleen.',
                voice_network: 'Verkkovirhe. Tarkista yhteytesi.',
                voice_not_allowed: 'Mikrofonin kytt estetty. Salli mikrofonin kytt.',
                voice_not_supported: 'nisytt ei tueta tss selaimessa',
                processing: 'Ksitelln puhetta...',
                error_message: 'Pahoittelut, kohtasin virheen. Yrit uudelleen.',
                clear_confirmation: 'Keskustelu tyhjennetty',
                feedback_thanks: 'Kiitos palautteestasi!',
                theme_light: 'Vaalea Teema',
                theme_dark: 'Tumma Teema',
                theme_toggle: 'Vaihda Teemaa'
            },
            'cs': {
                title: 'Phoenix',
                status: 'Online  RAG povolen',
                english: 'etina',
                welcome_title: 'Vtejte ve Phoenixu!',
                welcome_message: "Jsem v AI asistent pohnn Claude Sonnet s pstupem k znalostn bzi UEL. Mete pst nebo pouvat hlasov vstup. Jak vm dnes mohu pomoci?",
                input_placeholder: 'Napite svou zprvu zde nebo kliknte na mikrofon pro mluven...',
                mic_button_title: 'Kliknte pro zahjen/zastaven hlasovho vstupu',
                clear_chat: 'Vymazat chat',
                session_id: 'ID relace:',
                feedback_title: 'Sdlejte svou zptnou vazbu',
                feedback_good_title: 'Skvl! Co se vm na tto odpovdi lbilo?',
                feedback_bad_title: 'Pomozte nm se zlepit - co se pokazilo?',
                feedback_placeholder: 'eknte nm vce o sv zkuenosti s touto odpovd...',
                cancel: 'Zruit',
                submit: 'Odeslat',
                thumbs_up_title: 'Dobr odpov',
                thumbs_down_title: 'patn odpov',
                rag_indicator: 'Vylepeno znalostn bz UEL',
                voice_recording: 'Nahrvn... Kliknte znovu na mikrofon pro zastaven',
                voice_complete: 'Hlasov vstup dokonen. Mete upravit text a odeslat.',
                voice_error: 'Chyba hlasovho vstupu',
                voice_no_speech: 'Nebyla detekovna e. Zkuste to znovu.',
                voice_network: 'Chyba st. Zkontrolujte sv pipojen.',
                voice_not_allowed: 'Pstup k mikrofonu zamtnut. Povolte pstup k mikrofonu.',
                voice_not_supported: 'Hlasov vstup nen v tomto prohlei podporovn',
                processing: 'Zpracovn ei...',
                error_message: 'Omlouvm se, narazil jsem na chybu. Zkuste to znovu.',
                clear_confirmation: 'Chat byl vymazn',
                feedback_thanks: 'Dkujeme za vai zptnou vazbu!',
                theme_light: 'Svtl Motiv',
                theme_dark: 'Tmav Motiv',
                theme_toggle: 'Pepnout Motiv'
            },
            'sk': {
                title: 'Phoenix',
                status: 'Online  RAG povolen',
                english: 'Slovenina',
                welcome_title: 'Vitajte vo Phoenixe!',
                welcome_message: "Som v AI asistent pohan Claude Sonnet s prstupom k znalostnej bze UEL. Mete psa alebo pouva hlasov vstup. Ako vm dnes mem pomc?",
                input_placeholder: 'Napte svoju sprvu tu alebo kliknite na mikrofn pre hovorenie...',
                mic_button_title: 'Kliknite pre zaatie/zastavenie hlasovho vstupu',
                clear_chat: 'Vymaza chat',
                session_id: 'ID relcie:',
                feedback_title: 'Zdieajte svoju sptn vzbu',
                feedback_good_title: 'Skvel! o sa vm na tejto odpovedi pilo?',
                feedback_bad_title: 'Pomte nm sa zlepi - o sa pokazilo?',
                feedback_placeholder: 'Povedzte nm viac o svojej sksenosti s touto odpoveou...',
                cancel: 'Zrui',
                submit: 'Odosla',
                thumbs_up_title: 'Dobr odpove',
                thumbs_down_title: 'Zl odpove',
                rag_indicator: 'Vylepen znalostnou bzou UEL',
                voice_recording: 'Nahrvanie... Kliknite znovu na mikrofn pre zastavenie',
                voice_complete: 'Hlasov vstup dokonen. Mete upravi text a odosla.',
                voice_error: 'Chyba hlasovho vstupu',
                voice_no_speech: 'Nebola detekovan re. Skste to znova.',
                voice_network: 'Chyba siete. Skontrolujte svoje pripojenie.',
                voice_not_allowed: 'Prstup k mikrofnu zamietnut. Povote prstup k mikrofnu.',
                voice_not_supported: 'Hlasov vstup nie je v tomto prehliadai podporovan',
                processing: 'Spracovanie rei...',
                error_message: 'Ospravedlujem sa, narazil som na chybu. Skste to znova.',
                clear_confirmation: 'Chat bol vymazan',
                feedback_thanks: 'akujeme za vau sptn vzbu!',
                theme_light: 'Svetl Motiv',
                theme_dark: 'Tmav Motiv',
                theme_toggle: 'Prepn Motiv'
            },
            'hu': {
                title: 'Phoenix',
                status: 'Online  RAG engedlyezve',
                english: 'Magyar',
                welcome_title: 'dvzljk a Phoenixben!',
                welcome_message: "Claude Sonnet ltal mkdtetett AI asszisztensed vagyok, hozzfrssel az UEL tudsbzishoz. rhatsz vagy hasznlhatsz hangbevitelt. Hogyan segthetek ma?",
                input_placeholder: 'rd ide az zeneted vagy kattints a mikrofonra a beszdhez...',
                mic_button_title: 'Kattints a hangbevitel indtshoz/lelltshoz',
                clear_chat: 'Chat trlse',
                session_id: 'Munkamenet ID:',
                feedback_title: 'Oszd meg vlemnyed',
                feedback_good_title: 'Nagyszer! Mi tetszett ebben a vlaszban?',
                feedback_bad_title: 'Segts javtani - mi ment rosszul?',
                feedback_placeholder: 'Meslj tbbet az ezzel a vlasszal kapcsolatos tapasztalataidrl...',
                cancel: 'Mgse',
                submit: 'Klds',
                thumbs_up_title: 'J vlasz',
                thumbs_down_title: 'Rossz vlasz',
                rag_indicator: 'UEL tudsbzissal bvtve',
                voice_recording: 'Felvtel... Kattints jra a mikrofonra a lelltshoz',
                voice_complete: 'Hangbevitel ksz. Szerkesztheted a szveget s elkldheted.',
                voice_error: 'Hangbeviteli hiba',
                voice_no_speech: 'Nem szleltem beszdet. Prbld jra.',
                voice_network: 'Hlzati hiba. Ellenrizd a kapcsolatot.',
                voice_not_allowed: 'Mikrofon hozzfrs megtagadva. Engedlyezd a mikrofon hozzfrst.',
                voice_not_supported: 'A hangbevitel nem tmogatott ebben a bngszben',
                processing: 'Beszd feldolgozsa...',
                error_message: 'Sajnlom, hibba tkztem. Prbld jra.',
                clear_confirmation: 'Chat trlve',
                feedback_thanks: 'Ksznjk a visszajelzst!',
                theme_light: 'Vilgos Tma',
                theme_dark: 'Stt Tma',
                theme_toggle: 'Tma Vlts'
            },
            'ro': {
                title: 'Phoenix',
                status: 'Online  RAG activat',
                english: 'Romn',
                welcome_title: 'Bine ai venit la Phoenix!',
                welcome_message: "Sunt asistentul tu AI alimentat de Claude Sonnet cu acces la baza de cunotine UEL. Poi scrie sau folosi introducerea vocal. Cum te pot ajuta astzi?",
                input_placeholder: 'Scrie mesajul tu aici sau apas pe microfon pentru a vorbi...',
                mic_button_title: 'Apas pentru a ncepe/opri introducerea vocal',
                clear_chat: 'terge chat',
                session_id: 'ID sesiune:',
                feedback_title: 'mprtete-i feedback-ul',
                feedback_good_title: 'Excelent! Ce i-a plcut la acest rspuns?',
                feedback_bad_title: 'Ajut-ne s ne mbuntim - ce nu a mers bine?',
                feedback_placeholder: 'Spune-ne mai multe despre experiena ta cu acest rspuns...',
                cancel: 'Anuleaz',
                submit: 'Trimite',
                thumbs_up_title: 'Rspuns bun',
                thumbs_down_title: 'Rspuns ru',
                rag_indicator: 'mbuntit cu baza de cunotine UEL',
                voice_recording: 'nregistrare... Apas din nou pe microfon pentru a opri',
                voice_complete: 'Introducere vocal complet. Poi edita textul i trimite.',
                voice_error: 'Eroare introducere vocal',
                voice_no_speech: 'Nu s-a detectat vorbire. ncearc din nou.',
                voice_network: 'Eroare de reea. Verific conexiunea.',
                voice_not_allowed: 'Acces microfon refuzat. Permite accesul la microfon.',
                voice_not_supported: 'Introducerea vocal nu este suportat n acest browser',
                processing: 'Procesare vorbire...',
                error_message: 'mi pare ru, am ntmpinat o eroare. ncearc din nou.',
                clear_confirmation: 'Chat ters cu succes',
                feedback_thanks: 'Mulumim pentru feedback-ul dvs.!',
                theme_light: 'Tem Luminos',
                theme_dark: 'Tem ntunecoas',
                theme_toggle: 'Comut Tema'
            },
            'bg': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: '   Phoenix!',
                welcome_message: "   AI ,   Claude Sonnet       UEL.        .      ?",
                input_placeholder: '       ,   ...',
                mic_button_title: ',   /  ',
                clear_chat: ' ',
                session_id: 'ID  :',
                feedback_title: '   ',
                feedback_good_title: '!      ?',
                feedback_bad_title: '     -   ?',
                feedback_placeholder: '        ...',
                cancel: '',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: '     UEL',
                voice_recording: '...    ,   ',
                voice_complete: '   .       .',
                voice_error: '   ',
                voice_no_speech: '   .  .',
                voice_network: ' .   .',
                voice_not_allowed: '    .    .',
                voice_not_supported: '       ',
                processing: '  ...',
                error_message: ',  .  .',
                clear_confirmation: '   ',
                feedback_thanks: '   !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: '  '
            },
            'hr': {
                title: 'Phoenix',
                status: 'Online  RAG omoguen',
                english: 'Hrvatski',
                welcome_title: 'Dobrodoli u Phoenix!',
                welcome_message: "Ja sam va AI asistent pokretan Claude Sonnetom s pristupom UEL bazi znanja. Moete tipkati ili koristiti glasovni unos. Kako vam mogu pomoi danas?",
                input_placeholder: 'Upiite svoju poruku ovdje ili kliknite na mikrofon za govor...',
                mic_button_title: 'Kliknite za poetak/zaustavljanje glasovnog unosa',
                clear_chat: 'Obrii razgovor',
                session_id: 'ID sesije:',
                feedback_title: 'Podijelite svoje povratne informacije',
                feedback_good_title: 'Odlino! to vam se svidjelo u ovom odgovoru?',
                feedback_bad_title: 'Pomozite nam poboljati - to je polo po zlu?',
                feedback_placeholder: 'Recite nam vie o vaem iskustvu s ovim odgovorom...',
                cancel: 'Odustani',
                submit: 'Poalji',
                thumbs_up_title: 'Dobar odgovor',
                thumbs_down_title: 'Lo odgovor',
                rag_indicator: 'Poboljano s UEL bazom znanja',
                voice_recording: 'Snimanje... Kliknite ponovno na mikrofon za zaustavljanje',
                voice_complete: 'Glasovni unos zavren. Moete urediti tekst i poslati.',
                voice_error: 'Greka glasovnog unosa',
                voice_no_speech: 'Govor nije otkriven. Pokuajte ponovno.',
                voice_network: 'Mrena greka. Provjerite svoju vezu.',
                voice_not_allowed: 'Pristup mikrofonu odbijen. Dozvolite pristup mikrofonu.',
                voice_not_supported: 'Glasovni unos nije podran u ovom pregledniku',
                processing: 'Obrada govora...',
                error_message: 'ao mi je, naiao sam na greku. Pokuajte ponovno.',
                clear_confirmation: 'Razgovor uspjeno obrisan',
                feedback_thanks: 'Hvala vam na povratnoj informaciji!',
                theme_light: 'Svijetla Tema',
                theme_dark: 'Tamna Tema',
                theme_toggle: 'Promijeni Temu'
            },
            'sr': {
                title: 'Phoenix',
                status: '   RAG ',
                english: '',
                welcome_title: '  Phoenix!',
                welcome_message: "   AI   Claude Sonnet-   UEL  .      .     ?",
                input_placeholder: '         ...',
                mic_button_title: '  /  ',
                clear_chat: ' ',
                session_id: 'ID :',
                feedback_title: '   ',
                feedback_good_title: '!       ?',
                feedback_bad_title: '     -     ?',
                feedback_placeholder: '        ...',
                cancel: '',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: '  UEL  ',
                voice_recording: '...      ',
                voice_complete: '  .     .',
                voice_error: '  ',
                voice_no_speech: '  .  .',
                voice_network: ' .   .',
                voice_not_allowed: '  .   .',
                voice_not_supported: '      ',
                processing: ' ...',
                error_message: ',    .  .',
                clear_confirmation: '  ',
                feedback_thanks: '    !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'sl': {
                title: 'Phoenix',
                status: 'Na spletu  RAG omogoen',
                english: 'Slovenina',
                welcome_title: 'Dobrodoli v Phoenix!',
                welcome_message: "Sem va AI asistent, ki ga poganja Claude Sonnet z dostopom do baze znanja UEL. Lahko tipkate ali uporabljate glasovni vnos. Kako vam lahko pomagam danes?",
                input_placeholder: 'Vnesite svoje sporoilo tukaj ali kliknite na mikrofon za govor...',
                mic_button_title: 'Kliknite za zaetek/ustavitev glasovnega vnosa',
                clear_chat: 'Poisti klepet',
                session_id: 'ID seje:',
                feedback_title: 'Delite svoje povratne informacije',
                feedback_good_title: 'Odlino! Kaj vam je bilo ve pri tem odgovoru?',
                feedback_bad_title: 'Pomagajte nam izboljati - kaj je lo narobe?',
                feedback_placeholder: 'Povejte nam ve o svoji izkunji s tem odgovorom...',
                cancel: 'Preklii',
                submit: 'Polji',
                thumbs_up_title: 'Dober odgovor',
                thumbs_down_title: 'Slab odgovor',
                rag_indicator: 'Izboljano z bazo znanja UEL',
                voice_recording: 'Snemanje... Ponovno kliknite na mikrofon za ustavitev',
                voice_complete: 'Glasovni vnos konan. Lahko uredite besedilo in poljete.',
                voice_error: 'Napaka glasovnega vnosa',
                voice_no_speech: 'Govor ni zaznan. Poskusite znova.',
                voice_network: 'Omrena napaka. Preverite svojo povezavo.',
                voice_not_allowed: 'Dostop do mikrofona zavrnjen. Dovolite dostop do mikrofona.',
                voice_not_supported: 'Glasovni vnos ni podprt v tem brskalniku',
                processing: 'Obdelava govora...',
                error_message: 'Oprostite, naletel sem na napako. Poskusite znova.',
                clear_confirmation: 'Klepet uspeno poien',
                feedback_thanks: 'Hvala za vao povratno informacijo!',
                theme_light: 'Svetla Tema',
                theme_dark: 'Temna Tema',
                theme_toggle: 'Preklopi Temo'
            },
            'el': {
                title: 'Phoenix',
                status: '   RAG ',
                english: '',
                welcome_title: '   Phoenix!',
                welcome_message: "  AI       Claude Sonnet       UEL.        .      ;",
                input_placeholder: '            ...',
                mic_button_title: '   /  ',
                clear_chat: ' ',
                session_id: 'ID :',
                feedback_title: '   ',
                feedback_good_title: '!       ;',
                feedback_bad_title: '    -   ;',
                feedback_placeholder: '          ...',
                cancel: '',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: '     UEL',
                voice_recording: '...       ',
                voice_complete: '   .        .',
                voice_error: '  ',
                voice_no_speech: '  .  .',
                voice_network: ' .    .',
                voice_not_allowed: '    .     .',
                voice_not_supported: '         ',
                processing: ' ...',
                error_message: ',   .  .',
                clear_confirmation: '   ',
                feedback_thanks: '    !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'uk': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: '   Phoenix!',
                welcome_message: "  AI-   Claude Sonnet      UEL.       .      ?",
                input_placeholder: '         ...',
                mic_button_title: '  /  ',
                clear_chat: ' ',
                session_id: 'ID :',
                feedback_title: ' ',
                feedback_good_title: '!      ?',
                feedback_bad_title: '   -    ?',
                feedback_placeholder: '       ...',
                cancel: '',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: '   UEL',
                voice_recording: '...      ',
                voice_complete: '  .      .',
                voice_error: '  ',
                voice_no_speech: '  .  .',
                voice_network: " .  '.",
                voice_not_allowed: '   .    .',
                voice_not_supported: '      ',
                processing: ' ...',
                error_message: ',    .  .',
                clear_confirmation: '  ',
                feedback_thanks: '   !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'et': {
                title: 'Phoenix',
                status: 'Vrgus  RAG lubatud',
                english: 'Eesti',
                welcome_title: 'Tere tulemast Phoenixi!',
                welcome_message: "Olen teie AI assistent, mida juhib Claude Sonnet UEL teadmusbaasi juurdepsuga. Saate tippida vi kasutada hlsisendit. Kuidas saan teid tna aidata?",
                input_placeholder: 'Sisestage oma snum siia vi klpsake mikrofonil rkimiseks...',
                mic_button_title: 'Klpsake hlsisendi alustamiseks/peatamiseks',
                clear_chat: 'Thjenda vestlus',
                session_id: 'Seansi ID:',
                feedback_title: 'Jagage oma tagasisidet',
                feedback_good_title: 'Suureprane! Mis teile selle vastuse juures meeldis?',
                feedback_bad_title: 'Aidake meil paremaks saada - mis lks valesti?',
                feedback_placeholder: 'Rkige meile rohkem oma kogemusest selle vastusega...',
                cancel: 'Thista',
                submit: 'Saada',
                thumbs_up_title: 'Hea vastus',
                thumbs_down_title: 'Halb vastus',
                rag_indicator: 'Tiustatud UEL teadmusbaasiga',
                voice_recording: 'Salvestamine... Klpsake mikrofonil uuesti peatamiseks',
                voice_complete: 'Hlsisend lpetatud. Saate teksti redigeerida ja saata.',
                voice_error: 'Hlsisendi viga',
                voice_no_speech: 'Knet ei tuvastatud. Proovige uuesti.',
                voice_network: 'Vrguviga. Kontrollige oma hendust.',
                voice_not_allowed: 'Juurdeps mikrofonile keelatud. Lubage juurdeps mikrofonile.',
                voice_not_supported: 'Hlsisendit ei toetata selles brauseris',
                processing: 'Kne ttlemine...',
                error_message: 'Vabandust, sattusin veale. Proovige uuesti.',
                clear_confirmation: 'Vestlus edukalt thjendatud',
                feedback_thanks: 'Tname tagasiside eest!',
                theme_light: 'Hele Teema',
                theme_dark: 'Tume Teema',
                theme_toggle: 'Vaheta Teemat'
            },
            'lv': {
                title: 'Phoenix',
                status: 'Tiesaist  RAG iespjots',
                english: 'Latvieu',
                welcome_title: 'Laipni ldzam Phoenix!',
                welcome_message: "Es esmu jsu AI asistents, ko darbina Claude Sonnet ar piekuvi UEL zinanu bzei. Varat rakstt vai izmantot balss ievadi. K es varu jums paldzt odien?",
                input_placeholder: 'Ierakstiet savu ziojumu eit vai noklikiniet uz mikrofona, lai runtu...',
                mic_button_title: 'Noklikiniet, lai sktu/apturtu balss ievadi',
                clear_chat: 'Notrt trzanu',
                session_id: 'Sesijas ID:',
                feedback_title: 'Dalieties ar atsauksmm',
                feedback_good_title: 'Lieliski! Kas jums patika aj atbild?',
                feedback_bad_title: 'Paldziet mums uzlaboties - kas nogja greizi?',
                feedback_placeholder: 'Paststiet vairk par savu pieredzi ar o atbildi...',
                cancel: 'Atcelt',
                submit: 'Nostt',
                thumbs_up_title: 'Laba atbilde',
                thumbs_down_title: 'Slikta atbilde',
                rag_indicator: 'Uzlabots ar UEL zinanu bzi',
                voice_recording: 'Ieraksta... Noklikiniet uz mikrofona vlreiz, lai apturtu',
                voice_complete: 'Balss ievade pabeigta. Varat redit tekstu un nostt.',
                voice_error: 'Balss ievades kda',
                voice_no_speech: 'Runa nav konstatta. Miniet vlreiz.',
                voice_network: 'Tkla kda. Prbaudiet savienojumu.',
                voice_not_allowed: 'Piekuve mikrofonam liegta. Ataujiet piekuvi mikrofonam.',
                voice_not_supported: 'Balss ievade netiek atbalstta aj prlk',
                processing: 'Apstrd runu...',
                error_message: 'Atvainojiet, es saskros ar kdu. Miniet vlreiz.',
                clear_confirmation: 'Trzana veikmgi notrta',
                feedback_thanks: 'Paldies par atsauksmm!',
                theme_light: 'Gai Tma',
                theme_dark: 'Tum Tma',
                theme_toggle: 'Maint Tmu'
            },
            'lt': {
                title: 'Phoenix',
                status: 'Prisijungs  RAG jungtas',
                english: 'Lietuvi',
                welcome_title: 'Sveiki atvyk  Phoenix!',
                welcome_message: "A esu js AI asistentas, veikiantis su Claude Sonnet ir turintis prieig prie UEL ini bazs. Galite rayti arba naudoti balso vest. Kaip galiu jums padti iandien?",
                input_placeholder: 'veskite savo inut ia arba spustelkite mikrofon, kad kalbtumte...',
                mic_button_title: 'Spustelkite, kad pradtumte/sustabdytumte balso vest',
                clear_chat: 'Ivalyti pokalb',
                session_id: 'Sesijos ID:',
                feedback_title: 'Pasidalinkite savo atsiliepimais',
                feedback_good_title: 'Puiku! Kas jums patiko iame atsakyme?',
                feedback_bad_title: 'Padkite mums tobulti - kas nutiko?',
                feedback_placeholder: 'Papasakokite daugiau apie savo patirt su iuo atsakymu...',
                cancel: 'Ataukti',
                submit: 'Sisti',
                thumbs_up_title: 'Geras atsakymas',
                thumbs_down_title: 'Blogas atsakymas',
                rag_indicator: 'Patobulinta su UEL ini baze',
                voice_recording: 'raoma... Spustelkite mikrofon dar kart, kad sustabdytumte',
                voice_complete: 'Balso vestis baigta. Galite redaguoti tekst ir sisti.',
                voice_error: 'Balso vesties klaida',
                voice_no_speech: 'Kalba neaptikta. Bandykite dar kart.',
                voice_network: 'Tinklo klaida. Patikrinkite ry.',
                voice_not_allowed: 'Prieiga prie mikrofono atmesta. Leiskite prieig prie mikrofono.',
                voice_not_supported: 'Balso vestis nepalaikoma ioje naryklje',
                processing: 'Apdorojama kalba...',
                error_message: 'Atsipraau, susidriau su klaida. Bandykite dar kart.',
                clear_confirmation: 'Pokalbis skmingai ivalytas',
                feedback_thanks: 'Ai u atsiliepim!',
                theme_light: 'viesi Tema',
                theme_dark: 'Tamsi Tema',
                theme_toggle: 'Perjungti Tem'
            },
            'he': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: '  -Phoenix!',
                welcome_message: "        Claude Sonnet      UEL.       .     ?",
                input_placeholder: '          ...',
                mic_button_title: '  /  ',
                clear_chat: " '",
                session_id: ' :',
                feedback_title: '   ',
                feedback_good_title: '!    ?',
                feedback_bad_title: '   -  ?',
                feedback_placeholder: '        ...',
                cancel: '',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: '     UEL',
                voice_recording: '...      ',
                voice_complete: '  .      .',
                voice_error: '  ',
                voice_no_speech: '  .  .',
                voice_network: ' .    .',
                voice_not_allowed: '  .    .',
                voice_not_supported: '     ',
                processing: ' ...',
                error_message: ',  .  .',
                clear_confirmation: "'  ",
                feedback_thanks: '   !',
                theme_light: '  ',
                theme_dark: '  ',
                theme_toggle: '  '
            },
            'th': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: ' Phoenix!',
                welcome_message: " AI  Claude Sonnet  UEL  ?",
                input_placeholder: '...',
                mic_button_title: '/',
                clear_chat: '',
                session_id: 'ID :',
                feedback_title: '',
                feedback_good_title: '! ?',
                feedback_bad_title: ' - ?',
                feedback_placeholder: '...',
                cancel: '',
                submit: '',
                thumbs_up_title: '',
                thumbs_down_title: '',
                rag_indicator: ' UEL',
                voice_recording: '... ',
                voice_complete: ' ',
                voice_error: '',
                voice_no_speech: ' ',
                voice_network: ' ',
                voice_not_allowed: ' ',
                voice_not_supported: '',
                processing: '...',
                error_message: '  ',
                clear_confirmation: '',
                feedback_thanks: '!',
                theme_light: '',
                theme_dark: '',
                theme_toggle: ''
            },
            'vi': {
                title: 'Phoenix',
                status: 'Trc tuyn  RAG  bt',
                english: 'Ting Vit',
                welcome_title: 'Cho mng n vi Phoenix!',
                welcome_message: "Ti l tr l AI ca bn c h tr bi Claude Sonnet vi quyn truy cp vo c s kin thc ca UEL. Bn c th g hoc s dng nhp liu bng ging ni. Hm nay ti c th gip g cho bn?",
                input_placeholder: 'Nhp tin nhn ca bn  y hoc nhp vo micro  ni...',
                mic_button_title: 'Nhp  bt u/dng nhp liu bng ging ni',
                clear_chat: 'Xa tr chuyn',
                session_id: 'ID phin:',
                feedback_title: 'Chia s phn hi ca bn',
                feedback_good_title: 'Tuyt vi! Bn thch iu g v cu tr li ny?',
                feedback_bad_title: 'Gip chng ti ci thin - iu g  sai?',
                feedback_placeholder: 'Hy cho chng ti bit thm v tri nghim ca bn vi cu tr li ny...',
                cancel: 'Hy',
                submit: 'Gi',
                thumbs_up_title: 'Cu tr li tt',
                thumbs_down_title: 'Cu tr li km',
                rag_indicator: 'Ci thin vi c s kin thc UEL',
                voice_recording: 'ang ghi m... Nhp li vo micro  dng',
                voice_complete: 'Nhp liu bng ging ni hon tt. Bn c th chnh sa vn bn v gi.',
                voice_error: 'Li nhp liu bng ging ni',
                voice_no_speech: 'Khng pht hin ging ni. Th li.',
                voice_network: 'Li mng. Kim tra kt ni ca bn.',
                voice_not_allowed: 'Quyn truy cp micro b t chi. Vui lng cho php truy cp micro.',
                voice_not_supported: 'Nhp liu bng ging ni khng c h tr trong trnh duyt ny',
                processing: 'ang x l ging ni...',
                error_message: 'Xin li, ti gp li. Vui lng th li.',
                clear_confirmation: ' xa tr chuyn thnh cng',
                feedback_thanks: 'Cm n bn  gp !',
                theme_light: 'Ch  Sng',
                theme_dark: 'Ch  Ti',
                theme_toggle: 'Chuyn Ch '
            },
            'id': {
                title: 'Phoenix',
                status: 'Online  RAG diaktifkan',
                english: 'Bahasa Indonesia',
                welcome_title: 'Selamat datang di Phoenix!',
                welcome_message: "Saya adalah asisten AI Anda yang didukung oleh Claude Sonnet dengan akses ke basis pengetahuan UEL. Anda dapat mengetik atau menggunakan input suara. Bagaimana saya bisa membantu Anda hari ini?",
                input_placeholder: 'Ketik pesan Anda di sini atau klik mikrofon untuk berbicara...',
                mic_button_title: 'Klik untuk memulai/menghentikan input suara',
                clear_chat: 'Hapus obrolan',
                session_id: 'ID Sesi:',
                feedback_title: 'Bagikan masukan Anda',
                feedback_good_title: 'Bagus! Apa yang Anda sukai dari jawaban ini?',
                feedback_bad_title: 'Bantu kami meningkatkan - apa yang salah?',
                feedback_placeholder: 'Beri tahu kami lebih banyak tentang pengalaman Anda dengan jawaban ini...',
                cancel: 'Batal',
                submit: 'Kirim',
                thumbs_up_title: 'Jawaban bagus',
                thumbs_down_title: 'Jawaban buruk',
                rag_indicator: 'Ditingkatkan dengan basis pengetahuan UEL',
                voice_recording: 'Merekam... Klik mikrofon lagi untuk berhenti',
                voice_complete: 'Input suara selesai. Anda dapat mengedit teks dan mengirim.',
                voice_error: 'Kesalahan input suara',
                voice_no_speech: 'Tidak ada ucapan terdeteksi. Coba lagi.',
                voice_network: 'Kesalahan jaringan. Periksa koneksi Anda.',
                voice_not_allowed: 'Akses mikrofon ditolak. Izinkan akses mikrofon.',
                voice_not_supported: 'Input suara tidak didukung di browser ini',
                processing: 'Memproses ucapan...',
                error_message: 'Maaf, saya mengalami kesalahan. Silakan coba lagi.',
                clear_confirmation: 'Obrolan berhasil dihapus',
                feedback_thanks: 'Terima kasih atas masukan Anda!',
                theme_light: 'Tema Terang',
                theme_dark: 'Tema Gelap',
                theme_toggle: 'Ganti Tema'
            },
            'ms': {
                title: 'Phoenix',
                status: 'Dalam talian  RAG diaktifkan',
                english: 'Bahasa Melayu',
                welcome_title: 'Selamat datang ke Phoenix!',
                welcome_message: "Saya adalah pembantu AI anda yang dikuasakan oleh Claude Sonnet dengan akses kepada pangkalan pengetahuan UEL. Anda boleh menaip atau menggunakan input suara. Bagaimana saya boleh membantu anda hari ini?",
                input_placeholder: 'Taip mesej anda di sini atau klik mikrofon untuk bercakap...',
                mic_button_title: 'Klik untuk mula/hentikan input suara',
                clear_chat: 'Kosongkan sembang',
                session_id: 'ID Sesi:',
                feedback_title: 'Kongsi maklum balas anda',
                feedback_good_title: 'Hebat! Apa yang anda suka tentang jawapan ini?',
                feedback_bad_title: 'Bantu kami bertambah baik - apa yang salah?',
                feedback_placeholder: 'Beritahu kami lebih lanjut tentang pengalaman anda dengan jawapan ini...',
                cancel: 'Batal',
                submit: 'Hantar',
                thumbs_up_title: 'Jawapan baik',
                thumbs_down_title: 'Jawapan buruk',
                rag_indicator: 'Dipertingkatkan dengan pangkalan pengetahuan UEL',
                voice_recording: 'Merakam... Klik mikrofon sekali lagi untuk berhenti',
                voice_complete: 'Input suara selesai. Anda boleh mengedit teks dan hantar.',
                voice_error: 'Ralat input suara',
                voice_no_speech: 'Tiada pertuturan dikesan. Cuba lagi.',
                voice_network: 'Ralat rangkaian. Semak sambungan anda.',
                voice_not_allowed: 'Akses mikrofon ditolak. Sila benarkan akses mikrofon.',
                voice_not_supported: 'Input suara tidak disokong dalam pelayar ini',
                processing: 'Memproses pertuturan...',
                error_message: 'Maaf, saya menghadapi ralat. Sila cuba lagi.',
                clear_confirmation: 'Sembang berjaya dikosongkan',
                feedback_thanks: 'Terima kasih atas maklum balas anda!',
                theme_light: 'Tema Cerah',
                theme_dark: 'Tema Gelap',
                theme_toggle: 'Tukar Tema'
            },
            'tl': {
                title: 'Phoenix',
                status: 'Online  RAG pinagana',
                english: 'Filipino',
                welcome_title: 'Maligayang pagdating sa Phoenix!',
                welcome_message: "Ako ang inyong AI assistant na pinatatakbo ng Claude Sonnet na may access sa knowledge base ng UEL. Maaari kayong mag-type o gumamit ng voice input. Paano ko kayo matutulungan ngayon?",
                input_placeholder: 'I-type ang inyong mensahe dito o i-click ang microphone para magsalita...',
                mic_button_title: 'I-click para simulan/ihinto ang voice input',
                clear_chat: 'I-clear ang Chat',
                session_id: 'Session ID:',
                feedback_title: 'Ibahagi ang inyong feedback',
                feedback_good_title: 'Magaling! Ano ang nagustuhan ninyo sa response na ito?',
                feedback_bad_title: 'Tulungan ninyo kaming magpabuti - ano ang mali?',
                feedback_placeholder: 'Pakisabi sa amin ang higit pa tungkol sa inyong karanasan sa response na ito...',
                cancel: 'Kanselahin',
                submit: 'Ipasa',
                thumbs_up_title: 'Magandang response',
                thumbs_down_title: 'Hindi magandang response',
                rag_indicator: 'Pinahusay gamit ang UEL Knowledge Base',
                voice_recording: 'Nire-record... I-click ulit ang microphone para ihinto',
                voice_complete: 'Tapos na ang voice input. Maaari ninyong i-edit ang text at ipadala.',
                voice_error: 'May error sa voice input',
                voice_no_speech: 'Walang nadetect na speech. Subukan ulit.',
                voice_network: 'Network error. I-check ang inyong connection.',
                voice_not_allowed: 'Hindi pinahintulutan ang access sa microphone. Payagan ang microphone access.',
                voice_not_supported: 'Hindi supported ang voice input sa browser na ito',
                processing: 'Pinoproseso ang speech...',
                error_message: 'Pasensya na, may naencounter akong error. Subukan ulit.',
                clear_confirmation: 'Matagumpay na na-clear ang chat',
                feedback_thanks: 'Salamat sa inyong feedback!',
                theme_light: 'Maliwanag na Tema',
                theme_dark: 'Madilim na Tema',
                theme_toggle: 'Baguhin ang Tema'
            },
            'bn': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: 'Phoenix- !',
                welcome_message: "  AI   Claude Sonnet    UEL-                     ?",
                input_placeholder: '          ...',
                mic_button_title: '  /   ',
                clear_chat: '  ',
                session_id: ' ID:',
                feedback_title: '   ',
                feedback_good_title: '!      ?',
                feedback_bad_title: '    -   ?',
                feedback_placeholder: '       ...',
                cancel: ' ',
                submit: ' ',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: 'UEL    ',
                voice_recording: '...      ',
                voice_complete: '        ',
                voice_error: '  ',
                voice_no_speech: '      ',
                voice_network: '     ',
                voice_not_allowed: '      ',
                voice_not_supported: '     ',
                processing: '   ...',
                error_message: ',        ',
                clear_confirmation: '    ',
                feedback_thanks: '   !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: '  '
            },
            'ur': {
                title: 'Phoenix',
                status: '   RAG ',
                english: '',
                welcome_title: 'Phoenix   !',
                welcome_message: "   AI    Claude Sonnet      UEL                           ",
                input_placeholder: '            ...',
                mic_button_title: '  /     ',
                clear_chat: '  ',
                session_id: ' ID:',
                feedback_title: '   ',
                feedback_good_title: '!        ',
                feedback_bad_title: '     -   ',
                feedback_placeholder: '          ...',
                cancel: ' ',
                submit: ' ',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: 'UEL    ',
                voice_recording: '...         ',
                voice_complete: '          ',
                voice_error: '   ',
                voice_no_speech: '        ',
                voice_network: '       ',
                voice_not_allowed: '         ',
                voice_not_supported: '       ',
                processing: '  ...',
                error_message: '          ',
                clear_confirmation: '     ',
                feedback_thanks: '    !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'fa': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: ' Phoenix  !',
                welcome_message: "        Claude Sonnet       UEL  .         .       ",
                input_placeholder: '            ...',
                mic_button_title: ' /    ',
                clear_chat: '  ',
                session_id: ' :',
                feedback_title: '     ',
                feedback_good_title: '!       ',
                feedback_bad_title: '      -   ',
                feedback_placeholder: '        ...',
                cancel: '',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: '   UEL  ',
                voice_recording: '...       ',
                voice_complete: '   .       .',
                voice_error: '   ',
                voice_no_speech: '   .    .',
                voice_network: ' .     .',
                voice_not_allowed: '    .      .',
                voice_not_supported: '      ',
                processing: ' ...',
                error_message: '    .    .',
                clear_confirmation: '    ',
                feedback_thanks: '    !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'ta': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: 'Phoenix- !',
                welcome_message: " Claude Sonnet    AI , UEL-   .       .      ?",
                input_placeholder: '         ...',
                mic_button_title: '  /  ',
                clear_chat: ' ',
                session_id: ' ID:',
                feedback_title: '  ',
                feedback_good_title: '!     ?',
                feedback_bad_title: '   -  ?',
                feedback_placeholder: '      ...',
                cancel: ' ',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: 'UEL   ',
                voice_recording: ' ...     ',
                voice_complete: '  .    .',
                voice_error: '  ',
                voice_no_speech: ' .  .',
                voice_network: ' .   .',
                voice_not_allowed: '  .   .',
                voice_not_supported: '    ',
                processing: ' ...',
                error_message: ',   .  .',
                clear_confirmation: '  ',
                feedback_thanks: '  !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'te': {
                title: 'Phoenix',
                status: '  RAG  ',
                english: '',
                welcome_title: 'Phoenix  !',
                welcome_message: " Claude Sonnet     AI , UEL   .       .     ?",
                input_placeholder: '         ...',
                mic_button_title: '  /  ',
                clear_chat: '  ',
                session_id: ' ID:',
                feedback_title: '  ',
                feedback_good_title: '!     ?',
                feedback_bad_title: '    -  ?',
                feedback_placeholder: '      ...',
                cancel: ' ',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: 'UEL   ',
                voice_recording: '...     ',
                voice_complete: '  .     .',
                voice_error: '  ',
                voice_no_speech: ' .   .',
                voice_network: ' .    .',
                voice_not_allowed: '  .    .',
                voice_not_supported: '     ',
                processing: '  ...',
                error_message: ',   .   .',
                clear_confirmation: '   ',
                feedback_thanks: '   !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'ml': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: 'Phoenix- !',
                welcome_message: "UEL-     Claude Sonnet    AI   .       .     ?",
                input_placeholder: '         ...',
                mic_button_title: '  /  ',
                clear_chat: '  ',
                session_id: ' ID:',
                feedback_title: '  ',
                feedback_good_title: '!     ?',
                feedback_bad_title: '   -  ?',
                feedback_placeholder: '     ...',
                cancel: '',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: 'UEL    ',
                voice_recording: '...     ',
                voice_complete: '  .     .',
                voice_error: '  ',
                voice_no_speech: ' .   .',
                voice_network: ' .   .',
                voice_not_allowed: '  .   .',
                voice_not_supported: '    ',
                processing: '  ...',
                error_message: ',    .   .',
                clear_confirmation: '   ',
                feedback_thanks: '  !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'kn': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: 'Phoenix  !',
                welcome_message: " UEL     Claude Sonnet    AI .       .      ?",
                input_placeholder: '         ...',
                mic_button_title: '  /  ',
                clear_chat: '  ',
                session_id: ' ID:',
                feedback_title: '  ',
                feedback_good_title: '!     ?',
                feedback_bad_title: '    -  ?',
                feedback_placeholder: '      ...',
                cancel: '',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: 'UEL   ',
                voice_recording: '...     ',
                voice_complete: '  .    .',
                voice_error: '  ',
                voice_no_speech: '  .   .',
                voice_network: ' .   .',
                voice_not_allowed: '  .    .',
                voice_not_supported: '    ',
                processing: ' ...',
                error_message: ',   .   .',
                clear_confirmation: '  ',
                feedback_thanks: '  !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'gu': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: 'Phoenix   !',
                welcome_message: "  AI    Claude Sonnet     UEL      .           .        ?",
                input_placeholder: '           ...',
                mic_button_title: '  /    ',
                clear_chat: '  ',
                session_id: ' ID:',
                feedback_title: '   ',
                feedback_good_title: '!     ?',
                feedback_bad_title: '    -   ?',
                feedback_placeholder: '       ...',
                cancel: ' ',
                submit: ' ',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: 'UEL    ',
                voice_recording: '...        ',
                voice_complete: '  .       .',
                voice_error: '  ',
                voice_no_speech: '   .     .',
                voice_network: ' .   .',
                voice_not_allowed: '   .      .',
                voice_not_supported: '     ',
                processing: '    ...',
                error_message: ' ,     .     .',
                clear_confirmation: '    ',
                feedback_thanks: '   !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'pa': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: 'Phoenix    !',
                welcome_message: "  AI    Claude Sonnet     UEL                         ?",
                input_placeholder: "         '  ...",
                mic_button_title: '  /   ',
                clear_chat: '  ',
                session_id: ' ID:',
                feedback_title: '   ',
                feedback_good_title: ' !       ?',
                feedback_bad_title: '     -   ?',
                feedback_placeholder: '       ...',
                cancel: ' ',
                submit: ' ',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: 'UEL    ',
                voice_recording: "...    '   ",
                voice_complete: '          ',
                voice_error: '  ',
                voice_no_speech: '          ',
                voice_network: '     ',
                voice_not_allowed: '         ',
                voice_not_supported: '       ',
                processing: '    ...',
                error_message: ' ,           ',
                clear_confirmation: '     ',
                feedback_thanks: '   !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'mr': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: 'Phoenix   !',
                welcome_message: "  AI    Claude Sonnet     UEL     .         .       ?",
                input_placeholder: '         ...',
                mic_button_title: '  /  ',
                clear_chat: '  ',
                session_id: ' ID:',
                feedback_title: '   ',
                feedback_good_title: '!     ?',
                feedback_bad_title: '    -  ?',
                feedback_placeholder: '     ...',
                cancel: ' ',
                submit: ' ',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: 'UEL   ',
                voice_recording: '...     ',
                voice_complete: '  .      .',
                voice_error: '  ',
                voice_no_speech: '   .    .',
                voice_network: ' .   .',
                voice_not_allowed: '  .     .',
                voice_not_supported: '     ',
                processing: '   ...',
                error_message: ' ,   .    .',
                clear_confirmation: '   ',
                feedback_thanks: '  !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'as': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: 'Phoenix  !',
                welcome_message: "  AI   Claude Sonnet    UEL                      ?",
                input_placeholder: '          ...',
                mic_button_title: '  /   ',
                clear_chat: '  ',
                session_id: ' ID:',
                feedback_title: '  - ',
                feedback_good_title: '!      ?',
                feedback_bad_title: "     -   '?",
                feedback_placeholder: '       ...',
                cancel: ' ',
                submit: ' ',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: 'UEL    ',
                voice_recording: '...      ',
                voice_complete: '        ',
                voice_error: '  ',
                voice_no_speech: "    '     ",
                voice_network: '     ',
                voice_not_allowed: '        ',
                voice_not_supported: '     ',
                processing: ' ...',
                error_message: " ,     '     ",
                clear_confirmation: "    '",
                feedback_thanks: '   !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'or': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: 'Phoenix  !',
                welcome_message: "  AI   Claude Sonnet    UEL                   ?",
                input_placeholder: '           ...',
                mic_button_title: '  /    ',
                clear_chat: '  ',
                session_id: ' ID:',
                feedback_title: '  ',
                feedback_good_title: "!    '  ?",
                feedback_bad_title: "     - '  ?",
                feedback_placeholder: '       ...',
                cancel: ' ',
                submit: ' ',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: 'UEL    ',
                voice_recording: '...        ',
                voice_complete: '       ',
                voice_error: '  ',
                voice_no_speech: '        ',
                voice_network: '     ',
                voice_not_allowed: '       ',
                voice_not_supported: '     ',
                processing: ' ...',
                error_message: ',         ',
                clear_confirmation: '    ',
                feedback_thanks: '   !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'sw': {
                title: 'Phoenix',
                status: 'Mkondoni  RAG imewashwa',
                english: 'Kiswahili',
                welcome_title: 'Karibu Phoenix!',
                welcome_message: "Mimi ni msaidizi wako wa AI anayeendeshwa na Claude Sonnet akiwa na ufikiaji wa hifadhidata ya maarifa ya UEL. Unaweza kuandika au kutumia pembejeo la sauti. Ninawezaje kukusaidia leo?",
                input_placeholder: 'Andika ujumbe wako hapa au bonyeza kipaza sauti ili kuongea...',
                mic_button_title: 'Bonyeza kuanza/kuacha pembejeo la sauti',
                clear_chat: 'Futa Mazungumzo',
                session_id: 'Kitambulisho cha Kipindi:',
                feedback_title: 'Shiriki maoni yako',
                feedback_good_title: 'Bora! Ni nini ulichopenda kuhusu jibu hili?',
                feedback_bad_title: 'Tusaidie kuboresha - ni nini kilikosema?',
                feedback_placeholder: 'Tafadhali tuambie zaidi kuhusu uzoefu wako na jibu hili...',
                cancel: 'Ghairi',
                submit: 'Wasilisha',
                thumbs_up_title: 'Jibu nzuri',
                thumbs_down_title: 'Jibu baya',
                rag_indicator: 'Imeboreshwa na Hifadhidata ya Maarifa ya UEL',
                voice_recording: 'Inarekodi... Bonyeza kipaza sauti tena ili kuacha',
                voice_complete: 'Pembejeo la sauti limekamilika. Unaweza kuhariri nakala na kutuma.',
                voice_error: 'Kosa la pembejeo la sauti',
                voice_no_speech: 'Hakuna hotuba iliyotambuliwa. Tafadhali jaribu tena.',
                voice_network: 'Kosa la mtandao. Angalia muunganisho wako.',
                voice_not_allowed: 'Ufikiaji wa kipaza sauti umekataliwa. Tafadhali ruhusu ufikiaji wa kipaza sauti.',
                voice_not_supported: 'Pembejeo la sauti halijaunegezeewa kwenye kivinjari hiki',
                processing: 'Inachakata hotuba...',
                error_message: 'Samahani, nimekutana na kosa. Tafadhali jaribu tena.',
                clear_confirmation: 'Mazungumzo yamefutwa kwa mafanikio',
                feedback_thanks: 'Asante kwa maoni yako!',
                theme_light: 'Mandhari Nyeupe',
                theme_dark: 'Mandhari Nyeusi',
                theme_toggle: 'Badilisha Mandhari'
            },
            'am': {
                title: 'Phoenix',
                status: '   RAG ',
                english: '',
                welcome_title: ' Phoenix   !',
                welcome_message: " Claude Sonnet  AI   UEL              ?",
                input_placeholder: '      ...',
                mic_button_title: '  / ',
                clear_chat: ' ',
                session_id: ' ',
                feedback_title: ' ',
                feedback_good_title: '!     ?',
                feedback_bad_title: '  -  ?',
                feedback_placeholder: '      ...',
                cancel: '',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: 'UEL   ',
                voice_recording: '...    ',
                voice_complete: '       ',
                voice_error: '  ',
                voice_no_speech: '     ',
                voice_network: '   ',
                voice_not_allowed: '      ',
                voice_not_supported: '     ',
                processing: '  ...',
                error_message: '     ',
                clear_confirmation: '   ',
                feedback_thanks: ' !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'yo': {
                title: 'Phoenix',
                status: 'Lr ayelujara  RAG ti wa nss',
                english: 'Yorb',
                welcome_title: 'Kb s Phoenix!',
                welcome_message: "mi ni albd AI r t Claude Sonnet n dar pl fn s kj m UEL. O l tw tb lo twl ohn. Bwo ni mo e l rn  lw ln?",
                input_placeholder: 'T i r sb tb t r ohn lti sr...',
                mic_button_title: 'T lti br/d twl ohn dr',
                clear_chat: 'Pa jrr r',
                session_id: 'dm kk:',
                feedback_title: 'Pn rngb r',
                feedback_good_title: ' dra! Kni o frn npa dhn y?',
                feedback_bad_title: 'Rn w lw lti dra s i - kni  e?',
                feedback_placeholder: 'Jw s fn wa d s npa rr r pl dhn y...',
                cancel: 'Pa  r',
                submit: 'Rn',
                thumbs_up_title: 'dhn t dra',
                thumbs_down_title: 'dhn t k dra',
                rag_indicator: 'T a m dra s i pl kj m UEL',
                voice_recording: ' gbasil... T r ohn lkan s i lti da dr',
                voice_complete: "twl ohn ti par. O l tnk r n k' s rn.",
                voice_error: 'e twl ohn',
                voice_no_speech: 'A k r r kan. Jw gbynj lkan s i.',
                voice_network: 'e ntwk. Y sop r w.',
                voice_not_allowed: 'A k fn r ohn. Jw gba fn r ohn ly.',
                voice_not_supported: 'twl ohn k n tlyn nn awj y',
                processing: ' i lr r...',
                error_message: 'M bn, mo pd e kan. Jw gbynj lkan s i.',
                clear_confirmation: 'jrr ti pa ptpt',
                feedback_thanks: 'O e fun ero yin!',
                theme_light: 'Aa m ml',
                theme_dark: 'Aa m knkn',
                theme_toggle: 'ypad Aa m'
            },
            'ig': {
                title: 'Phoenix',
                status: 'Na ntanet  RAG kwudoro',
                english: 'Igbo',
                welcome_title: 'Nn na Phoenix!',
                welcome_message: "Ab m onye inyeaka AI g nke Claude Sonnet na-anya nke nwere ohere banye ebe nchekwa ihe mma UEL.  nwere ike pa ma  b jiri olu tinye ihe. Kedu otu m ga-esi nyere g aka taa?",
                input_placeholder: 'Pa ozi g ebe a ma  b pa okwu igbe ka  kwuo okwu...',
                mic_button_title: 'Pa iji malite/kws ntinye olu',
                clear_chat: 'Hichaa Nkata',
                session_id: 'ID Oge:',
                feedback_title: 'Kekrta nzaghachi g',
                feedback_good_title: 'Magburu onwe ya! Gn masr g na nzaghachi a?',
                feedback_bad_title: 'Nyere any aka melite - gn meghr?',
                feedback_placeholder: 'Biko gwaa any kara banyere ahmhe g na nzaghachi a...',
                cancel: 'Kagbuo',
                submit: 'Ziga',
                thumbs_up_title: 'Ezigbo nzaghachi',
                thumbs_down_title: 'Nzaghachi j',
                rag_indicator: 'Emelitere site na UEL Knowledge Base',
                voice_recording: 'Na-edek... Pa okwu igbe z ka  kws',
                voice_complete: 'Ntinye olu zuru ezu.  nwere ike dezie ederede ah ziga ya.',
                voice_error: 'Njehie ntinye olu',
                voice_no_speech: 'Achptagh okwu  bla. Biko nwaa z.',
                voice_network: 'Njehie netwk. Chpta njik g.',
                voice_not_allowed: 'A jr ohere okwu igbe. Biko kwere ka okwu igbe banye.',
                voice_not_supported: 'Ntinye olu anagh akwado na browser a',
                processing: 'Na-ahazi okwu...',
                error_message: 'Ndo, m zutere njehie. Biko nwaa z.',
                clear_confirmation: 'E hichapr nkata nke ma',
                feedback_thanks: 'Daal maka nzaghachi g!',
                theme_light: 'Udo cha',
                theme_dark: 'Oji cha',
                theme_toggle: 'Gbanwee cha'
            },
            'ha': {
                title: 'Phoenix',
                status: 'Kan layi  RAG an kunna',
                english: 'Hausa',
                welcome_title: 'Maraba da Phoenix!',
                welcome_message: "Ni ne mataimaki AI ku wanda Claude Sonnet ke aiki da shi tare da samun damar zuwa bayanai na UEL. Kuna iya bugawa ko amfani da shigar murya. Ta yaya zan iya taimaka muku yau?",
                input_placeholder: 'Buga sakonku a nan ko danna makirufo don yin magana...',
                mic_button_title: 'Danna don farawa/tsayar da shigar murya',
                clear_chat: 'Share Hira',
                session_id: 'ID Zaman:',
                feedback_title: "Raba ra'ayinku",
                feedback_good_title: 'Da kyau! Me kuka so a wannan amsar?',
                feedback_bad_title: 'Taimaka mana mu inganta - me ya faru?',
                feedback_placeholder: 'Don Allah gaya mana karin game da gogewar ku da wannan amsa...',
                cancel: 'Soke',
                submit: 'Aika',
                thumbs_up_title: 'Amsar mai kyau',
                thumbs_down_title: 'Amsar mara kyau',
                rag_indicator: 'An inganta da UEL Knowledge Base',
                voice_recording: 'Ana yin rikodin... Danna makirufo kuma don tsayawa',
                voice_complete: 'Shigar murya ya kammala. Kuna iya gyara rubutu ku aika.',
                voice_error: 'Kuskuren shigar murya',
                voice_no_speech: 'Ba a gano magana ba. Don Allah sake gwadawa.',
                voice_network: 'Kuskuren cibiyar sadarwa. Bincika hain ku.',
                voice_not_allowed: 'An hana samun damar makirufo. Don Allah ba da izinin samun damar makirufo.',
                voice_not_supported: 'Shigar murya ba a goyan baya a cikin wannan browser ba',
                processing: 'Ana sarrafa magana...',
                error_message: 'Yi hakuri, na ci karo da kuskure. Don Allah sake gwadawa.',
                clear_confirmation: 'An share hira da nasara',
                feedback_thanks: 'Na gode da raayin ka!',
                theme_light: 'Haske Jigo',
                theme_dark: 'Duhu Jigo',
                theme_toggle: 'Canja Jigo'
            },
            'zu': {
                title: 'Phoenix',
                status: 'Ku-inthanethi  RAG inikwe amandla',
                english: 'isiZulu',
                welcome_title: 'Siyakwamukela ku-Phoenix!',
                welcome_message: "Ngingumsizi wakho we-AI oqhutshwa yi-Claude Sonnet ofinyelela kusisekelo solwazi lwe-UEL. Ungabhala noma usebenzise ukufaka kwezwi. Ngingakusiza kanjani namuhla?",
                input_placeholder: 'Bhala umlayezo wakho lapha noma chofoza imakrofoni ukukhuluma...',
                mic_button_title: 'Chofoza ukuze uqale/ume ukufaka kwezwi',
                clear_chat: 'Sula Ingxoxo',
                session_id: 'I-ID Yeseshini:',
                feedback_title: 'Yabelana ngesiphetho sakho',
                feedback_good_title: 'Kuhle! Yini oyithandayo ngalesi siphendulo?',
                feedback_bad_title: 'Sisize sithuthuke - yini eyehlulekile?',
                feedback_placeholder: 'Sicela usitshele kabanzi ngomuzwa wakho ngalesi siphendulo...',
                cancel: 'Khansela',
                submit: 'Thumela',
                thumbs_up_title: 'Impendulo enhle',
                thumbs_down_title: 'Impendulo emibi',
                rag_indicator: 'Ithuthukisiwe nge-UEL Knowledge Base',
                voice_recording: 'Iyarekhoda... Chofoza imakrofoni futhi ukuze ume',
                voice_complete: 'Ukufaka kwezwi kuphelile. Ungahlela umbhalo uthumele.',
                voice_error: 'Iphutha lokufaka kwezwi',
                voice_no_speech: 'Alikho inkulumo etholakele. Sicela uzame futhi.',
                voice_network: 'Iphutha lenethiwekhi. Hlola ukuxhumeka kwakho.',
                voice_not_allowed: 'Ukufinyelela imakrofoni kwalwa. Sicela uvumele ukufinyelela imakrofoni.',
                voice_not_supported: 'Ukufaka kwezwi akusekelwa kulo msebenzi wokubheda',
                processing: 'Icubungula inkulumo...',
                error_message: 'Uxolo, ngihlangane nephutha. Sicela uzame futhi.',
                clear_confirmation: 'Ingxoxo isuswe ngempumelelo',
                feedback_thanks: 'Siyabonga ngempendulo yakho!',
                theme_light: 'Itimu Ekhanyayo',
                theme_dark: 'Itimu Emnyama',
                theme_toggle: 'Shintsha Itimu'
            },
            'af': {
                title: 'Phoenix',
                status: 'Aanlyn  RAG geaktiveer',
                english: 'Afrikaans',
                welcome_title: 'Welkom by Phoenix!',
                welcome_message: "Ek is jou AI-assistent wat deur Claude Sonnet aangedryf word met toegang tot UEL se kennisbasis. Jy kan tik of spraaktoevoer gebruik. Hoe kan ek jou vandag help?",
                input_placeholder: 'Tik jou boodskap hier of klik die mikrofoon om te praat...',
                mic_button_title: 'Klik om spraaktoevoer te begin/stop',
                clear_chat: 'Maak Klets Skoon',
                session_id: 'Sessie ID:',
                feedback_title: 'Deel jou terugvoer',
                feedback_good_title: 'Uitstekend! Wat het jy van hierdie antwoord gehou?',
                feedback_bad_title: 'Help ons verbeter - wat het verkeerd gegaan?',
                feedback_placeholder: 'Vertel ons asseblief meer oor jou ervaring met hierdie antwoord...',
                cancel: 'Kanselleer',
                submit: 'Stuur',
                thumbs_up_title: 'Goeie antwoord',
                thumbs_down_title: 'Slegte antwoord',
                rag_indicator: 'Verbeter met UEL Kennisbasis',
                voice_recording: 'Neem op... Klik die mikrofoon weer om te stop',
                voice_complete: 'Spraaktoevoer voltooi. Jy kan die teks redigeer en stuur.',
                voice_error: 'Spraaktoevoer fout',
                voice_no_speech: 'Geen spraak opgespoor nie. Probeer asseblief weer.',
                voice_network: 'Netwerkfout. Gaan jou verbinding na.',
                voice_not_allowed: 'Mikrofoon-toegang geweier. Gee asseblief mikrofoon-toegang.',
                voice_not_supported: 'Spraaktoevoer nie ondersteun in hierdie blaaier nie',
                processing: 'Verwerk spraak...',
                error_message: "Jammer, ek het 'n fout tegekom. Probeer asseblief weer.",
                clear_confirmation: 'Klets suksesvol skoongemaak',
                feedback_thanks: 'Dankie vir jou terugvoering!',
                theme_light: 'Ligte Tema',
                theme_dark: 'Donker Tema',
                theme_toggle: 'Wissel Tema'
            },
            'xh': {
                title: 'Phoenix',
                status: 'Kwi-intanethi  RAG yenziwe yasebenza',
                english: 'isiXhosa',
                welcome_title: 'Wamkelekile kwi-Phoenix!',
                welcome_message: "Ndingumncedisi wakho we-AI oqhutywa yi-Claude Sonnet enofikelelo kwisiseko solwazi lwe-UEL. Ungabhala okanye usebenzise igalelo lezwi. Ndingakunceda njani namhlanje?",
                input_placeholder: 'Bhala umyalezo wakho apha okanye cofa imakrofoni ukuze uthethe...',
                mic_button_title: 'Cofa ukuze uqalise/uyeke igalelo lezwi',
                clear_chat: 'Susa Incoko',
                session_id: 'I-ID Yeseshini:',
                feedback_title: 'Yabelana nengxelo yakho',
                feedback_good_title: 'Kuhle! Yintoni oyithandileyo ngalo mpendulo?',
                feedback_bad_title: 'Sincede siphucule - yintoni ehambe kakubi?',
                feedback_placeholder: 'Nceda usixelele ngakumbi malunga namava akho ngalo mpendulo...',
                cancel: 'Rhoxisa',
                submit: 'Thumela',
                thumbs_up_title: 'Impendulo elungileyo',
                thumbs_down_title: 'Impendulo embi',
                rag_indicator: 'Iphuculwe nge-UEL Knowledge Base',
                voice_recording: 'Iyarekhoda... Cofa imakrofoni kwakhona ukuze uyeke',
                voice_complete: 'Igalelo lezwi ligqityiwe. Ungarilungisa isicatshulwa uthumele.',
                voice_error: 'Imposiso yegalelo lezwi',
                voice_no_speech: 'Akukho ntetho ifunyenweyo. Nceda uzame kwakhona.',
                voice_network: 'Imposiso yenethiwekhi. Jonga unxibelelwano lwakho.',
                voice_not_allowed: 'Ufikelelo lwemakrofoni lukhanyiwe. Nceda uvumele ufikelelo lwemakrofoni.',
                voice_not_supported: 'Igalelo lezwi alixhaswanga kwesi siphequluli',
                processing: 'Isebenza intetho...',
                error_message: 'Uxolo, ndifumene imposiso. Nceda uzame kwakhona.',
                clear_confirmation: 'Incoko isusiwe ngempumelelo',
                feedback_thanks: 'Enkosi ngempendulo yakho!',
                theme_light: 'Umxholo Okhanyayo',
                theme_dark: 'Umxholo Omnyama',
                theme_toggle: 'Tshintsha Umxholo'
            },
            'is': {
                title: 'Phoenix',
                status: ' netinu  RAG virkja',
                english: 'slenska',
                welcome_title: 'Velkomin  Phoenix!',
                welcome_message: "g er AI astoarmaur inn sem er kninn af Claude Sonnet me agang a ekkingargrunni UEL.  getur skrifa ea nota raddinntak. Hvernig get g hjlpa r  dag?",
                input_placeholder: 'Skrifau skilaboin n hr ea smelltu  hljnemann til a tala...',
                mic_button_title: 'Smelltu til a byrja/stoppa raddinntak',
                clear_chat: 'Hreinsa spjall',
                session_id: 'Aukenni lotunnar:',
                feedback_title: 'Deildu num athugasemdum',
                feedback_good_title: 'Frbrt! Hva lkai r vi etta svar?',
                feedback_bad_title: 'Hjlpau okkur a bta okkur - hva fr rskeiis?',
                feedback_placeholder: 'Vinsamlegast segu okkur meira um upplifun na af essu svari...',
                cancel: 'Htta vi',
                submit: 'Senda inn',
                thumbs_up_title: 'Gott svar',
                thumbs_down_title: 'Slmt svar',
                rag_indicator: 'Btt me ekkingargrunni UEL',
                voice_recording: 'Upptaka... Smelltu  hljnemann aftur til a stoppa',
                voice_complete: 'Raddinntak loki.  getur breytt textanum og sent.',
                voice_error: 'Villa  raddinntak',
                voice_no_speech: 'Engin tal greind. Vinsamlegast reyndu aftur.',
                voice_network: 'Netvilla. Athugau tenginguna na.',
                voice_not_allowed: 'Agangur a hljnemann hafna. Vinsamlegast leyfu agang a hljnemann.',
                voice_not_supported: 'Raddinntak ekki stutt  essum vafra',
                processing: 'Vinnur r tali...',
                error_message: 'Fyrirgefu, g lenti  villu. Vinsamlegast reyndu aftur.',
                clear_confirmation: 'Spjall hreinsa me gum rangri',
                feedback_thanks: 'Takk fyrir athugasemdirnar nar!',
                theme_light: 'Ljst ema',
                theme_dark: 'Dkkt ema',
                theme_toggle: 'Skipta um emu'
            },
            'ga': {
                title: 'Phoenix',
                status: 'Ar lne  RAG cumasaithe',
                english: 'Gaeilge',
                welcome_title: 'Filte go Phoenix!',
                welcome_message: "Is mise do chntir AI at cumhachtaithe ag Claude Sonnet le rochtain ar bhunachar eolais UEL. Is fidir leat clscrobh n ionchur gutha a sid. Conas is fidir liom cabhr leat inniu?",
                input_placeholder: 'Clscrobh do theachtaireacht anseo n cliceil an micreafn le labhairt...',
                mic_button_title: 'Cliceil chun ionchur gutha a thos/stopadh',
                clear_chat: 'Glan Comhr',
                session_id: 'Aitheantas Seisiin:',
                feedback_title: 'Roinn do chuid aiseolais',
                feedback_good_title: 'Iontach! Cad a thaitin leat faoin bhfreagra seo?',
                feedback_bad_title: 'Cabhraigh linn feabhs - cad a chuaigh mcheart?',
                feedback_placeholder: 'Le do thoil inis dinn nos m faoi do thaith leis an bhfreagra seo...',
                cancel: 'Cealaigh',
                submit: 'Cuir isteach',
                thumbs_up_title: 'Freagra maith',
                thumbs_down_title: 'Drochfhreagra',
                rag_indicator: 'Feabhsaithe le Bunachar Eolais UEL',
                voice_recording: 'Ag taifeadadh... Cliceil an micreafn ars chun stopadh',
                voice_complete: 'Ionchur gutha crochnaithe. Is fidir leat an tacs a eagr agus a sheoladh.',
                voice_error: 'Earrid ionchur gutha',
                voice_no_speech: 'Nor braitheadh caint ar bith. Le do thoil dan iarracht ars.',
                voice_network: 'Earrid lonra. Seiceil do nasc.',
                voice_not_allowed: 'Rochtain ar an micreafn diltaithe. Le do thoil ceadaigh rochtain ar an micreafn.',
                voice_not_supported: 'N thacatear le hionchur gutha sa bhrabhsla seo',
                processing: 'Ag priseil cainte...',
                error_message: 'Gabh mo leithscal, thinig earrid orm. Le do thoil dan iarracht ars.',
                clear_confirmation: 'Comhr glanta go rathil',
                feedback_thanks: 'Go raibh maith agat as do thuairim!',
                theme_light: 'Tama adrom',
                theme_dark: 'Tama Dorcha',
                theme_toggle: 'Athraigh Tama'
            },
            'cy': {
                title: 'Phoenix',
                status: "Ar-lein  RAG wedi'i alluogi",
                english: 'Cymraeg',
                welcome_title: 'Croeso i Phoenix!',
                welcome_message: "Fi yw eich cynorthwyydd AI sy'n cael ei bweru gan Claude Sonnet gyda mynediad at gronfa wybodaeth UEL. Gallwch deipio neu ddefnyddio mewnbwn llais. Sut alla i'ch helpu heddiw?",
                input_placeholder: 'Teipiwch eich neges yma neu cliciwch y meicroffon i siarad...',
                mic_button_title: 'Cliciwch i ddechrau/atal mewnbwn llais',
                clear_chat: 'Clirio Sgwrs',
                session_id: 'ID Sesiwn:',
                feedback_title: 'Rhannwch eich adborth',
                feedback_good_title: 'Ardderchog! Beth hoffech chi am yr ateb hwn?',
                feedback_bad_title: "Helpwch ni i wella - beth aeth o'i le?",
                feedback_placeholder: "Dywedwch wrthym fwy am eich profiad gyda'r ateb hwn os gwelwch yn dda...",
                cancel: 'Diddymu',
                submit: 'Cyflwyno',
                thumbs_up_title: 'Ateb da',
                thumbs_down_title: 'Ateb gwael',
                rag_indicator: "Wedi'i wella gyda Chronfa Wybodaeth UEL",
                voice_recording: 'Yn recordio... Cliciwch y meicroffon eto i stopio',
                voice_complete: "Mewnbwn llais wedi'i gwblhau. Gallwch olygu'r testun ac anfon.",
                voice_error: 'Gwall mewnbwn llais',
                voice_no_speech: "Dim lleferydd wedi'i ganfod. Rhowch gynnig arall arni os gwelwch yn dda.",
                voice_network: 'Gwall rhwydwaith. Gwiriwch eich cysylltiad.',
                voice_not_allowed: "Mynediad meicroffon wedi'i wrthod. Caniatewch fynediad meicroffon os gwelwch yn dda.",
                voice_not_supported: 'Mewnbwn llais ddim yn cael ei gefnogi yn y porwr hwn',
                processing: 'Yn prosesu lleferydd...',
                error_message: "Mae'n ddrwg gennyf, rwyf wedi dod ar draws gwall. Rhowch gynnig arall arni os gwelwch yn dda.",
                clear_confirmation: "Sgwrs wedi'i chlirio'n llwyddiannus",
                feedback_thanks: 'Diolch am eich adborth!',
                theme_light: 'Thema Golau',
                theme_dark: 'Thema Tywyll',
                theme_toggle: 'Newid Thema'
            },
            'mt': {
                title: 'Phoenix',
                status: 'Online  RAG attivat',
                english: 'Malti',
                welcome_title: 'Merba gal Phoenix!',
                welcome_message: "Jien l-assistent AI tiegek li jitmexxa minn Claude Sonnet b'aess gall-bai ta' garfien tal-UEL. Tista' tittajpja jew tua input tal-vui. Kif nista' nginek illum?",
                input_placeholder: 'Ittajpja l-messa tiegek hawn jew ikklikkja l-mikrofonu biex titkellem...',
                mic_button_title: 'Ikklikkja biex tibda/twaqqaf l-input tal-vui',
                clear_chat: 'Nei Chat',
                session_id: 'ID tas-Sessjoni:',
                feedback_title: 'Aqsam il-feedback tiegek',
                feedback_good_title: "Tajjeb! X'gogbok dwar din it-tweiba?",
                feedback_bad_title: "Ginna ntejbu - x'mar ain?",
                feedback_placeholder: "Jekk jogbok gidilna aktar dwar l-esperjenza tiegek ma' din it-tweiba...",
                cancel: 'Ikkanella',
                submit: 'Ibgat',
                thumbs_up_title: 'Tweiba tajba',
                thumbs_down_title: 'Tweiba aina',
                rag_indicator: "Imtejjeb bil-Bai ta' Garfien tal-UEL",
                voice_recording: "Qed jirrekordi... Ikklikkja l-mikrofonu gal darb'ora biex twaqqaf",
                voice_complete: "Input tal-vui komplet. Tista' teditja t-test u tibgat.",
                voice_error: 'ball fl-input tal-vui',
                voice_no_speech: "L-ebda kellem ma nstab. Jekk jogbok era' pprova.",
                voice_network: 'ball fin-network. Iekkja l-konnessjoni tiegek.',
                voice_not_allowed: 'Aess gall-mikrofonu miud. Jekk jogbok ippermetti l-aess gall-mikrofonu.',
                voice_not_supported: "Input tal-vui mhux appoat f'dan il-browser",
                processing: 'Qed jipproessa l-kellem...',
                error_message: "Skuani, ltqajt ma' ball. Jekk jogbok era' pprova.",
                clear_confirmation: "Chat nei b'suess",
                feedback_thanks: 'Grazzi gall-feedback tiegek!',
                theme_light: 'Tema afifa',
                theme_dark: 'Tema Mudlama',
                theme_toggle: 'Ibdel it-Tema'
            },
            'eu': {
                title: 'Phoenix',
                status: 'Linean  RAG gaituta',
                english: 'Euskera',
                welcome_title: 'Ongi etorri Phoenix-era!',
                welcome_message: "Claude Sonnet-ek bultzatutako zure AI laguntzailea naiz, UEL-en ezagutza-basera sarbidea duena. Idatzi edo ahots-sarrera erabili dezakezu. Nola lagun zaitzaket gaur?",
                input_placeholder: 'Idatzi zure mezua hemen edo klikatu mikrofonoa hitz egiteko...',
                mic_button_title: 'Klikatu ahots-sarrera hasi/gelditzeko',
                clear_chat: 'Garbitu Txata',
                session_id: 'Saioaren IDa:',
                feedback_title: 'Partekatu zure iritzia',
                feedback_good_title: 'Bikaina! Zer gustatu zaizu erantzun honetan?',
                feedback_bad_title: 'Lagun gaitzazu hobetzen - zer joan da gaizki?',
                feedback_placeholder: 'Mesedez, konta iezaguzu gehiago erantzun honekin izan duzun esperientziari buruz...',
                cancel: 'Ezeztatu',
                submit: 'Bidali',
                thumbs_up_title: 'Erantzun ona',
                thumbs_down_title: 'Erantzun txarra',
                rag_indicator: 'UEL Ezagutza-basearekin hobetua',
                voice_recording: 'Grabatzen... Klikatu mikrofonoa berriro gelditzeko',
                voice_complete: 'Ahots-sarrera osatuta. Testua editatu eta bidali dezakezu.',
                voice_error: 'Ahots-sarreraren errorea',
                voice_no_speech: 'Ez da hizketarik detektatu. Mesedez, saiatu berriro.',
                voice_network: 'Sare-errorea. Egiaztatu zure konexioa.',
                voice_not_allowed: 'Mikrofonoaren sarbidea ukatuta. Mesedez, baimendu mikrofonoaren sarbidea.',
                voice_not_supported: 'Ahots-sarrera ez dago onartuta nabigatzaile honetan',
                processing: 'Hizketa prozesatzen...',
                error_message: 'Barkatu, errore batekin topo egin dut. Mesedez, saiatu berriro.',
                clear_confirmation: 'Txata arrakastaz garbitu da',
                feedback_thanks: 'Eskerrik asko zure iritziagatik!',
                theme_light: 'Gai Argia',
                theme_dark: 'Gai Iluna',
                theme_toggle: 'Gaia Aldatu'
            },
            'lb': {
                title: 'Phoenix',
                status: 'Online  RAG aktiviert',
                english: 'Ltzebuergesch',
                welcome_title: 'Wllkommen bei Phoenix!',
                welcome_message: "Ech sinn ren AI Assistent, deen vu Claude Sonnet ugedriwwen gtt mat Zougang zu der UEL Wssensbase. Dir knnt schreiwen oder Sprocheeingab benotzen. Wi kann ech Iech haut hllefen?",
                input_placeholder: 'Tippt r Message hei oder klickt op de Mikrofon fir ze schwtzen...',
                mic_button_title: 'Klickt fir Sprocheeingab ze starten/stoppen',
                clear_chat: 'Chat lschen',
                session_id: 'Session ID:',
                feedback_title: 'Deelt r Feedback',
                feedback_good_title: 'Groussarteg! Wat hutt Dir un dser ntwert gr?',
                feedback_bad_title: 'Hlleft eis ze verbesseren - wat ass falsch gaang?',
                feedback_placeholder: 'Erzielt eis w.e.g. mi iwwer r Erfarung mat dser ntwert...',
                cancel: 'Annulieren',
                submit: 'Schcken',
                thumbs_up_title: 'Gutt ntwert',
                thumbs_down_title: 'Schlecht ntwert',
                rag_indicator: 'Verbessert mat UEL Wssensbase',
                voice_recording: 'Ophuelen... Klickt de Mikrofon erm fir ze stoppen',
                voice_complete: 'Sprocheeingab ferdeg. Dir knnt den Text editieren an schcken.',
                voice_error: 'Sprocheeingab Feeler',
                voice_no_speech: 'Keng Sprooch detektiert. Probiert w.e.g. erm.',
                voice_network: 'Netzwierk Feeler. Iwwerprift r Verbindung.',
                voice_not_allowed: 'Mikrofon Zougang refusiert. Erlaabt w.e.g. de Mikrofon Zougang.',
                voice_not_supported: 'Sprocheeingab gtt net nnersttzt an dsem Browser',
                processing: 'Sprooch verarbechten...',
                error_message: 'Entschllegt, ech sinn op e Feeler gestouss. Probiert w.e.g. erm.',
                clear_confirmation: 'Chat erfollegrich gelscht',
                feedback_thanks: 'Merci fir ert Feedback!',
                theme_light: 'Hll Thema',
                theme_dark: 'Donkel Thema',
                theme_toggle: 'Thema wiesselen'
            },
            'mk': {
                title: 'Phoenix',
                status: '   RAG ',
                english: '',
                welcome_title: '  Phoenix!',
                welcome_message: "   AI    Claude Sonnet        UEL.        .      ?",
                input_placeholder: '           ...',
                mic_button_title: '   /  ',
                clear_chat: ' ',
                session_id: 'ID  :',
                feedback_title: '   ',
                feedback_good_title: '!       ?',
                feedback_bad_title: '     -   ?',
                feedback_placeholder: '          ...',
                cancel: '',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: '      UEL',
                voice_recording: '...       ',
                voice_complete: '   .         .',
                voice_error: '   ',
                voice_no_speech: '   .     .',
                voice_network: ' .    .',
                voice_not_allowed: '    .      .',
                voice_not_supported: '       ',
                processing: '  ...',
                error_message: ',   .     .',
                clear_confirmation: '   ',
                feedback_thanks: '   !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'sq': {
                title: 'Phoenix',
                status: 'Online  RAG aktivizuar',
                english: 'Shqip',
                welcome_title: 'Mir se erdhe n Phoenix!',
                welcome_message: "Un jam asistenti juaj AI i mundsuar nga Claude Sonnet me qasje n bazn e dijeve t UEL. Mund t shkruani ose t prdorni hyrjen zanore. Si mund t'ju ndihmoj sot?",
                input_placeholder: 'Shkruani mesazhin tuaj ktu ose klikoni mikrofonin pr t folur...',
                mic_button_title: 'Klikoni pr t filluar/ndaluar hyrjen zanore',
                clear_chat: 'Pastro Bisedn',
                session_id: 'ID e Seancs:',
                feedback_title: 'Ndani mendimin tuaj',
                feedback_good_title: 'Shklqyer! far ju plqeu n kt prgjigje?',
                feedback_bad_title: 'Na ndihmoni t prmirsohemi - far shkoi gabim?',
                feedback_placeholder: 'Ju lutemi na tregoni m shum pr prvojn tuaj me kt prgjigje...',
                cancel: 'Anulo',
                submit: 'Drgo',
                thumbs_up_title: 'Prgjigje e mir',
                thumbs_down_title: 'Prgjigje e keqe',
                rag_indicator: 'E prmirsuar me bazn e dijeve t UEL',
                voice_recording: 'Duke regjistruar... Klikoni mikrofonin prsri pr t ndaluar',
                voice_complete: 'Hyrja zanore prfundoi. Mund ta editoni tekstin dhe ta drgoni.',
                voice_error: 'Gabim n hyrjen zanore',
                voice_no_speech: 'Nuk u zbulua t folur. Ju lutemi provoni prsri.',
                voice_network: 'Gabim rrjeti. Kontrolloni lidhjen tuaj.',
                voice_not_allowed: 'Qasja n mikrofon u refuzua. Ju lutemi lejoni qasjen n mikrofon.',
                voice_not_supported: 'Hyrja zanore nuk mbshtetet n kt shfletues',
                processing: 'Duke prpunuar t folurn...',
                error_message: 'Na vjen keq, hasova nj gabim. Ju lutemi provoni prsri.',
                clear_confirmation: 'Biseda u pastrua me sukses',
                feedback_thanks: 'Faleminderit pr mendimin tuaj!',
                theme_light: 'Tema e Ndritshme',
                theme_dark: 'Tema e Errt',
                theme_toggle: 'Ndrysho Temn'
            },
            'be': {
                title: 'Phoenix',
                status: '   RAG ',
                english: '',
                welcome_title: '   Phoenix!',
                welcome_message: "  AI-   Claude Sonnet      UEL.       .      ?",
                input_placeholder: '      ,  ...',
                mic_button_title: ',  /  ',
                clear_chat: ' ',
                session_id: 'ID :',
                feedback_title: '  ',
                feedback_good_title: '!      ?',
                feedback_bad_title: '   -    ?',
                feedback_placeholder: ' ,        ...',
                cancel: '',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: '   UEL',
                voice_recording: '...   ,  ',
                voice_complete: '  .      .',
                voice_error: '  ',
                voice_no_speech: '  .  ,  .',
                voice_network: ' .   .',
                voice_not_allowed: '   .  ,    .',
                voice_not_supported: '      ',
                processing: ' ...',
                error_message: ',  .  ,  .',
                clear_confirmation: '  ',
                feedback_thanks: '   !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'hy': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: '  Phoenix!',
                welcome_message: "  AI    Claude Sonnet-    UEL-  :       :      :",
                input_placeholder: '        ...',
                mic_button_title: '   / ',
                clear_chat: ' ',
                session_id: ' ID:',
                feedback_title: '  ',
                feedback_good_title: '!       :',
                feedback_bad_title: '   -   :',
                feedback_placeholder: '         ...',
                cancel: '',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: ' UEL  ',
                voice_recording: '...     ',
                voice_complete: '   :      :',
                voice_error: '  ',
                voice_no_speech: '  :    :',
                voice_network: ' :   :',
                voice_not_allowed: '   :      :',
                voice_not_supported: '     ',
                processing: ' ...',
                error_message: ',   :    :',
                clear_confirmation: '   ',
                feedback_thanks: '   !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'ka': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: '    Phoenix-!',
                welcome_message: "   AI ,   Claude Sonnet-    UEL-  .      .    ?",
                input_placeholder: '       ...',
                mic_button_title: '   /',
                clear_chat: ' ',
                session_id: ' ID:',
                feedback_title: '  ',
                feedback_good_title: '!    ?',
                feedback_bad_title: '  -   ?',
                feedback_placeholder: '       ...',
                cancel: '',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: ' UEL  ',
                voice_recording: '...    ',
                voice_complete: '  .     .',
                voice_error: '  ',
                voice_no_speech: '   .   .',
                voice_network: ' .   .',
                voice_not_allowed: '  .     .',
                voice_not_supported: '      ',
                processing: ' ...',
                error_message: ',  .   .',
                clear_confirmation: '  ',
                feedback_thanks: '  !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'az': {
                title: 'Phoenix',
                status: 'Onlayn  RAG aktivdir',
                english: 'Azrbaycan',
                welcome_title: 'Phoenix- xo glmisiniz!',
                welcome_message: "Mn Claude Sonnet trfindn ildiln v UEL-in bilik bazasna girii olan AI kmkinizm. Yaza v ya ss giriindn istifad ed bilrsiniz. Bu gn siz nec kmk ed bilrm?",
                input_placeholder: 'Mesajnz burada yazn v ya danmaq n mikrofona kliklyin...',
                mic_button_title: 'Ss giriini balatmaq/dayandrmaq n kliklyin',
                clear_chat: 'Shbti Tmizl',
                session_id: 'Sesiya ID:',
                feedback_title: 'Ryinizi bln',
                feedback_good_title: 'la! Bu cavabda nyiniz xouna gldi?',
                feedback_bad_title: 'Tkmillmy kmk edin - n shv oldu?',
                feedback_placeholder: 'Xahi edirik bu cavabla bal tcrbniz haqqnda daha ox dann...',
                cancel: 'Lv et',
                submit: 'Gndr',
                thumbs_up_title: 'Yax cavab',
                thumbs_down_title: 'Pis cavab',
                rag_indicator: 'UEL bilik bazas il tkmilldirilmidir',
                voice_recording: 'Qeydiyyat... Dayandrmaq n mikrofona yenidn kliklyin',
                voice_complete: 'Ss girii tamamland. Mtni redakt edib gndr bilrsiniz.',
                voice_error: 'Ss giri xtas',
                voice_no_speech: 'Nitq akar edilmdi. Xahi edirik yenidn chd edin.',
                voice_network: 'bk xtas. Balantnz yoxlayn.',
                voice_not_allowed: 'Mikrofon girii rdd edildi. Xahi edirik mikrofon giriin icaz verin.',
                voice_not_supported: 'Ss girii bu brauzerd dstklnmir',
                processing: 'Nitq emal olunur...',
                error_message: 'Balayn, xta il qarladm. Xahi edirik yenidn chd edin.',
                clear_confirmation: 'Shbt uurla tmizlndi',
                feedback_thanks: 'Ryiniz n tkkrlr!',
                theme_light: 'znl Tema',
                theme_dark: 'Tund Tema',
                theme_toggle: 'Tema Dyi'
            },
            'ca': {
                title: 'Phoenix',
                status: 'En lnia  RAG activat',
                english: 'Catal',
                welcome_title: 'Benvingut a Phoenix!',
                welcome_message: "Sc el teu assistent d'IA impulsat per Claude Sonnet amb accs a la base de coneixement d'UEL. Pots escriure o utilitzar l'entrada de veu. Com et puc ajudar avui?",
                input_placeholder: 'Escriu el teu missatge aqu o fes clic al micrfon per parlar...',
                mic_button_title: "Fes clic per iniciar/aturar l'entrada de veu",
                clear_chat: 'Esborrar Xat',
                session_id: 'ID de Sessi:',
                feedback_title: 'Comparteix els teus comentaris',
                feedback_good_title: "Excellent! Qu t'ha agradat d'aquesta resposta?",
                feedback_bad_title: "Ajuda'ns a millorar - qu ha anat malament?",
                feedback_placeholder: "Si us plau, explica'ns ms sobre la teva experincia amb aquesta resposta...",
                cancel: 'Cancellar',
                submit: 'Enviar',
                thumbs_up_title: 'Bona resposta',
                thumbs_down_title: 'Mala resposta',
                rag_indicator: "Millorat amb la Base de Coneixement d'UEL",
                voice_recording: 'Gravant... Fes clic al micrfon de nou per aturar',
                voice_complete: 'Entrada de veu completada. Pots editar el text i enviar.',
                voice_error: "Error d'entrada de veu",
                voice_no_speech: "No s'ha detectat cap veu. Si us plau, torna-ho a provar.",
                voice_network: 'Error de xarxa. Comprova la teva connexi.',
                voice_not_allowed: "Accs al micrfon denegat. Si us plau, permet l'accs al micrfon.",
                voice_not_supported: "L'entrada de veu no s compatible amb aquest navegador",
                processing: 'Processant la veu...',
                error_message: 'Ho sento, he trobat un error. Si us plau, torna-ho a provar.',
                clear_confirmation: 'Xat esborrat amb xit',
                feedback_thanks: 'Grcies pel teu comentari!',
                theme_light: 'Tema Clara',
                theme_dark: 'Tema Fosca',
                theme_toggle: 'Canviar Tema'
            },
            'gl': {
                title: 'Phoenix',
                status: 'En lia  RAG activado',
                english: 'Galego',
                welcome_title: 'Benvido a Phoenix!',
                welcome_message: "Son o teu asistente de IA impulsado por Claude Sonnet con acceso  base de coecemento de UEL. Podes escribir ou usar entrada de voz. Como che podo axudar hoxe?",
                input_placeholder: 'Escribe a ta mensaxe aqu ou preme no micrfono para falar...',
                mic_button_title: 'Preme para iniciar/parar a entrada de voz',
                clear_chat: 'Limpar Chat',
                session_id: 'ID de Sesin:',
                feedback_title: 'Comparte os teus comentarios',
                feedback_good_title: 'Excelente! Que che gustou desta resposta?',
                feedback_bad_title: 'Axdanos a mellorar - que foi mal?',
                feedback_placeholder: 'Por favor, cntanos mis sobre a ta experiencia con esta resposta...',
                cancel: 'Cancelar',
                submit: 'Enviar',
                thumbs_up_title: 'Boa resposta',
                thumbs_down_title: 'Mala resposta',
                rag_indicator: 'Mellorado coa Base de Coecemento de UEL',
                voice_recording: 'Gravando... Preme no micrfono de novo para parar',
                voice_complete: 'Entrada de voz completada. Podes editar o texto e enviar.',
                voice_error: 'Erro de entrada de voz',
                voice_no_speech: 'Non se detectou ningunha fala. Por favor, tntao de novo.',
                voice_network: 'Erro de rede. Comproba a ta conexin.',
                voice_not_allowed: 'Acceso ao micrfono denegado. Por favor, permite o acceso ao micrfono.',
                voice_not_supported: 'A entrada de voz non  compatible con este navegador',
                processing: 'Procesando a fala...',
                error_message: 'Sntoo, atopei un erro. Por favor, tntao de novo.',
                clear_confirmation: 'Chat limpo con xito',
                feedback_thanks: 'Grazas pola ta opinin!',
                theme_light: 'Tema Clara',
                theme_dark: 'Tema Escura',
                theme_toggle: 'Cambiar Tema'
            },
            'kk': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: 'Phoenix-  !',
                welcome_message: " UEL      Claude Sonnet    AI .         .     ?",
                input_placeholder: '       ...',
                mic_button_title: '  /  ',
                clear_chat: ' ',
                session_id: ' ID:',
                feedback_title: ' ',
                feedback_good_title: '!     ?',
                feedback_bad_title: '  -   ?',
                feedback_placeholder: '     ...',
                cancel: '',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: 'UEL   ',
                voice_recording: '...     ',
                voice_complete: '  .  ,  .',
                voice_error: '  ',
                voice_no_speech: ' .  .',
                voice_network: ' .  .',
                voice_not_allowed: '    .     .',
                voice_not_supported: '     ',
                processing: ' ...',
                error_message: ',   .  .',
                clear_confirmation: '  ',
                feedback_thanks: '  !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'ky': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: 'Phoenix\'  !',
                welcome_message: " UEL      Claude Sonnet   AI .         .      ?",
                input_placeholder: '        ...',
                mic_button_title: '  /  ',
                clear_chat: ' ',
                session_id: ' ID:',
                feedback_title: '  ',
                feedback_good_title: '!    ?',
                feedback_bad_title: '   -    ?',
                feedback_placeholder: '      ...',
                cancel: ' ',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: 'UEL    ',
                voice_recording: '...     ',
                voice_complete: '  .  ,  .',
                voice_error: '  ',
                voice_no_speech: '  .  .',
                voice_network: ' .  .',
                voice_not_allowed: '   .    .',
                voice_not_supported: '     ',
                processing: ' ...',
                error_message: ',  .  .',
                clear_confirmation: '  ',
                feedback_thanks: '  !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            },
            'uz': {
                title: 'Phoenix',
                status: "Onlayn  RAG yoqilgan",
                english: "O'zbekcha",
                welcome_title: "Phoenix'ga xush kelibsiz!",
                welcome_message: "Men UEL bilimlar bazasiga kirish imkoniyati bor Claude Sonnet tomonidan ishlaydigan AI yordamchisiman. Siz matn kiritishingiz yoki ovozli kiritishdan foydalanishingiz mumkin. Bugun sizga qanday yordam bera olaman?",
                input_placeholder: "Xabaringizni shu yerga yozing yoki gapirish uchun mikrofonga bosing...",
                mic_button_title: "Ovozli kiritishni boshlash/to'xtatish uchun bosing",
                clear_chat: "Chatni tozalash",
                session_id: "Sessiya ID:",
                feedback_title: "Fikringiz bilan bo'lishing",
                feedback_good_title: "Ajoyib! Ushbu javobda sizga nima yoqdi?",
                feedback_bad_title: "Yaxshilashga yordam bering - nima noto'g'ri bo'ldi?",
                feedback_placeholder: "Ushbu javob bilan tajribangiz haqida ko'proq aytib bering...",
                cancel: "Bekor qilish",
                submit: "Yuborish",
                thumbs_up_title: "Yaxshi javob",
                thumbs_down_title: "Yomon javob",
                rag_indicator: "UEL Bilimlar Bazasi bilan kengaytirilgan",
                voice_recording: "Yozish... To'xtatish uchun mikrofonga qayta bosing",
                voice_complete: "Ovozli kiritish tugallandi. Matnni tahrirlashingiz va yuborishingiz mumkin.",
                voice_error: "Ovozli kiritish xatosi",
                voice_no_speech: "Nutq aniqlanmadi. Qaytadan urinib ko'ring.",
                voice_network: "Tarmoq xatosi. Ulanishingizni tekshiring.",
                voice_not_allowed: "Mikrofonga kirish rad etildi. Mikrofonga kirish uchun ruxsat bering.",
                voice_not_supported: "Ushbu brauzerda ovozli kiritish qo'llab-quvvatlanmaydi",
                processing: "Nutq qayta ishlanmoqda...",
                error_message: "Kechirasiz, xatolik yuz berdi. Qaytadan urinib ko'ring.",
                clear_confirmation: "Chat muvaffaqiyatli tozalandi",
                feedback_thanks: 'Fikringiz uchun rahmat!',
                theme_light: 'Yorug Tema',
                theme_dark: 'Qorongu Tema',
                theme_toggle: 'Temani Ozgartirish'
            },
            'tg': {
                title: 'Phoenix',
                status: '   RAG ',
                english: '',
                welcome_title: ' Phoenix  !',
                welcome_message: "  AI ,   Claude Sonnet       UEL  .           .        ?",
                input_placeholder: '          ...',
                mic_button_title: ' /    ',
                clear_chat: '  ',
                session_id: 'ID- :',
                feedback_title: '  ',
                feedback_good_title: '!        ?',
                feedback_bad_title: '     -   ?',
                feedback_placeholder: '        ...',
                cancel: ' ',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: '   UEL   ',
                voice_recording: ' ...      ',
                voice_complete: '    .       .',
                voice_error: '  ',
                voice_no_speech: '  .    .',
                voice_network: ' .  .',
                voice_not_allowed: '     .     .',
                voice_not_supported: '      ',
                processing: ' ...',
                error_message: ',    .    .',
                clear_confirmation: '     ',
                feedback_thanks: '  !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: '  '
            },
            'mn': {
                title: 'Phoenix',
                status: '  RAG ',
                english: '',
                welcome_title: 'Phoenix-   !',
                welcome_message: " UEL-     Claude Sonnet-  AI  .        .      ?",
                input_placeholder: '          ...',
                mic_button_title: '  /   ',
                clear_chat: ' ',
                session_id: ' ID:',
                feedback_title: '  ',
                feedback_good_title: ' !      ?',
                feedback_bad_title: '   -    ?',
                feedback_placeholder: '        ...',
                cancel: '',
                submit: '',
                thumbs_up_title: ' ',
                thumbs_down_title: ' ',
                rag_indicator: 'UEL   ',
                voice_recording: ' ...      ',
                voice_complete: '  .     .',
                voice_error: '  ',
                voice_no_speech: '  .   .',
                voice_network: ' .   .',
                voice_not_allowed: '  .    .',
                voice_not_supported: '    ',
                processing: '  ...',
                error_message: ',  .   .',
                clear_confirmation: '  ',
                feedback_thanks: '  !',
                theme_light: ' ',
                theme_dark: ' ',
                theme_toggle: ' '
            }
        };
        
        // Add all other language translations - truncated for brevity but would include complete translations for all 65+ languages
        
        // Initialize the application
        function init() {
            if (accessToken) {
                verifyToken().then(valid => {
                    if (valid) {
                        showMainApp();
                        loadUserSessions();
                    } else {
                        showAuth();
                    }
                });
            } else {
                showAuth();
            }
        }
        

        // Authentication functions
        function showAuth() {
            document.getElementById('authContainer').style.display = 'flex';
            document.getElementById('mainContainer').classList.remove('authenticated');
        }
        
        function showMainApp() {
            // Check if we're already in main app mode to avoid resetting existing sessions
            const isAlreadyAuthenticated = document.getElementById('mainContainer').classList.contains('authenticated');
            
            document.getElementById('authContainer').style.display = 'none';
            document.getElementById('mainContainer').classList.add('authenticated');
            
            // Only create a new session if this is a fresh login
            if (!isAlreadyAuthenticated) {
                console.log('Fresh login - creating new session');
                createNewSession();
            } else {
                console.log('Already authenticated - preserving existing session');
            }
            
            setupEventListeners();
            populateLanguageDropdown();
            translatePage();
            updateUserDisplay();
            initializeSpeechRecognition();
            initializeTheme();
            updateSessionDisplay();
            
            // Setup theme toggle
            const themeToggleBtn = document.getElementById('themeToggle');
            if (themeToggleBtn) {
                themeToggleBtn.addEventListener('click', toggleTheme);
                console.log('Theme toggle event listener attached');
            } else {
                console.log('Theme toggle button not found!');
            }
            
            // Setup admin console
            setupAdminConsole();
            
            // Load user sessions now that CORS is fixed
            loadUserSessions();
        }
        
        async function verifyToken() {
            if (!accessToken) return false;
            
            try {
                const response = await fetch(AUTH_ENDPOINT + '/user-info', {
                    headers: { 'Authorization': 'Bearer ' + accessToken }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    currentUser = data;
                    updateUserDisplay();
                    return true;
                } else if (response.status === 401 && refreshToken) {
                    return await refreshAccessToken();
                }
                return false;
            } catch (error) {
                console.error('Token verification failed:', error);
                return false;
            }
        }
        
        async function refreshAccessToken() {
            try {
                const response = await fetch(AUTH_ENDPOINT + '/refresh', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ refreshToken: refreshToken })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    accessToken = data.accessToken;
                    localStorage.setItem('phoenix-access-token', accessToken);
                    
                    // Get updated user info
                    const userResponse = await fetch(AUTH_ENDPOINT + '/user-info', {
                        headers: { 'Authorization': 'Bearer ' + accessToken }
                    });
                    if (userResponse.ok) {
                        currentUser = await userResponse.json();
                        updateUserDisplay();
                    }
                    return true;
                }
                return false;
            } catch (error) {
                console.error('Token refresh failed:', error);
                return false;
            }
        }
        
        function updateUserDisplay() {
            if (currentUser && currentUser.userAttributes) {
                const firstName = currentUser.userAttributes.given_name || 'User';
                const lastName = currentUser.userAttributes.family_name || '';
                const email = currentUser.userAttributes.email || '';
                
                document.getElementById('userName').textContent = firstName + ' ' + lastName;
                document.getElementById('userEmail').textContent = email;
                document.getElementById('userAvatar').textContent = firstName.charAt(0).toUpperCase();
            }
        }
        
        // Authentication form handlers
        document.addEventListener('DOMContentLoaded', function() {
            // Form switching
            document.getElementById('showSignup').addEventListener('click', (e) => {
                e.preventDefault();
                showForm('signupForm');
            });
            
            document.getElementById('showLogin').addEventListener('click', (e) => {
                e.preventDefault();
                showForm('loginForm');
            });
            
            document.getElementById('showForgotPassword').addEventListener('click', (e) => {
                e.preventDefault();
                showForm('forgotPasswordForm');
            });
            
            document.getElementById('backToLogin').addEventListener('click', (e) => {
                e.preventDefault();
                showForm('loginForm');
            });
            
            document.getElementById('backToLoginFromForgot').addEventListener('click', (e) => {
                e.preventDefault();
                showForm('loginForm');
            });
            
            document.getElementById('backToLoginFromReset').addEventListener('click', (e) => {
                e.preventDefault();
                showForm('loginForm');
            });
            
            // Form submissions
            document.getElementById('loginBtn').addEventListener('click', handleLogin);
            document.getElementById('signupBtn').addEventListener('click', handleSignup);
            document.getElementById('confirmBtn').addEventListener('click', handleConfirmSignup);
            document.getElementById('forgotPasswordBtn').addEventListener('click', handleForgotPassword);
            document.getElementById('resetPasswordBtn').addEventListener('click', handleResetPassword);
            
            // Logout
            document.getElementById('logoutBtn').addEventListener('click', handleLogout);
            
            // Feedback modal
            document.getElementById('feedbackSubmit').addEventListener('click', submitFeedback);
            document.getElementById('feedbackCancel').addEventListener('click', closeFeedbackModal);
            document.getElementById('feedbackModal').addEventListener('click', function(e) {
                if (e.target === document.getElementById('feedbackModal')) {
                    closeFeedbackModal();
                }
            });
            
            // Theme toggle - moved to showMainInterface function
            
            // Enter key handling for forms
            document.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const activeForm = document.querySelector('.auth-form:not([style*="display: none"])');
                    if (activeForm) {
                        const submitBtn = activeForm.querySelector('.auth-button');
                        if (submitBtn) submitBtn.click();
                    }
                }
            });
            
            init();
        });
        
        function showForm(formId) {
            document.querySelectorAll('.auth-form').forEach(form => {
                form.style.display = 'none';
            });
            document.getElementById(formId).style.display = 'block';
            clearErrors();
        }
        
        function clearErrors() {
            document.querySelectorAll('.auth-error, .auth-success').forEach(el => {
                el.style.display = 'none';
                el.textContent = '';
            });
        }
        
        function showError(elementId, message) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = message;
                element.style.display = 'block';
            } else {
                // If element doesn't exist, show as notification instead
                console.error('Error element not found:', elementId, 'Message:', message);
                showNotification(message, 'error');
            }
        }
        
        function showSuccess(elementId, message) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.style.display = 'block';
        }
        
        async function handleLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const btn = document.getElementById('loginBtn');
            
            if (!email || !password) {
                showError('loginError', 'Please enter both email and password');
                return;
            }
            
            btn.disabled = true;
            btn.textContent = 'Signing in...';
            clearErrors();
            
            try {
                const response = await fetch(AUTH_ENDPOINT + '/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    accessToken = data.accessToken;
                    refreshToken = data.refreshToken;
                    currentUser = { userId: data.userId, userAttributes: data.userAttributes };
                    
                    localStorage.setItem('phoenix-access-token', accessToken);
                    localStorage.setItem('phoenix-refresh-token', refreshToken);
                    
                    showMainApp();
                    loadUserSessions();
                } else {
                    showError('loginError', data.error || 'Login failed');
                }
            } catch (error) {
                showError('loginError', 'Network error. Please try again.');
            } finally {
                btn.disabled = false;
                btn.textContent = 'Sign In';
            }
        }
        
        async function handleSignup() {
            const firstName = document.getElementById('signupFirstName').value;
            const lastName = document.getElementById('signupLastName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupConfirmPassword').value;
            const btn = document.getElementById('signupBtn');
            
            if (!firstName || !lastName || !email || !password || !confirmPassword) {
                showError('signupError', 'Please fill in all fields');
                return;
            }
            
            if (password !== confirmPassword) {
                showError('signupError', 'Passwords do not match');
                return;
            }
            
            if (password.length < 8) {
                showError('signupError', 'Password must be at least 8 characters long');
                return;
            }
            
            btn.disabled = true;
            btn.textContent = 'Creating Account...';
            clearErrors();
            
            try {
                const response = await fetch(AUTH_ENDPOINT + '/signup', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ firstName, lastName, email, password })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    showSuccess('signupSuccess', 'Account created successfully! Please check your email for verification code.');
                    // Store email for confirmation
                    localStorage.setItem('phoenix-signup-email', email);
                    setTimeout(() => showForm('confirmForm'), 2000);
                } else {
                    showError('signupError', data.error || 'Signup failed');
                }
            } catch (error) {
                showError('signupError', 'Network error. Please try again.');
            } finally {
                btn.disabled = false;
                btn.textContent = 'Create Account';
            }
        }
        
        async function handleConfirmSignup() {
            const code = document.getElementById('confirmCode').value;
            const email = localStorage.getItem('phoenix-signup-email');
            const btn = document.getElementById('confirmBtn');
            
            if (!code) {
                showError('confirmError', 'Please enter the verification code');
                return;
            }
            
            if (!email) {
                showError('confirmError', 'Email not found. Please sign up again.');
                return;
            }
            
            btn.disabled = true;
            btn.textContent = 'Verifying...';
            clearErrors();
            
            try {
                const response = await fetch(AUTH_ENDPOINT + '/confirm', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, confirmationCode: code })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    showSuccess('confirmSuccess', 'Email verified successfully! You can now sign in.');
                    localStorage.removeItem('phoenix-signup-email');
                    setTimeout(() => showForm('loginForm'), 2000);
                } else {
                    showError('confirmError', data.error || 'Verification failed');
                }
            } catch (error) {
                showError('confirmError', 'Network error. Please try again.');
            } finally {
                btn.disabled = false;
                btn.textContent = 'Verify Email';
            }
        }
        
        async function handleForgotPassword() {
            const email = document.getElementById('forgotEmail').value;
            const btn = document.getElementById('forgotPasswordBtn');
            
            if (!email) {
                showError('forgotError', 'Please enter your email address');
                return;
            }
            
            btn.disabled = true;
            btn.textContent = 'Sending...';
            clearErrors();
            
            try {
                const response = await fetch(AUTH_ENDPOINT + '/forgot-password', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    showSuccess('forgotSuccess', 'Reset code sent to your email address.');
                    localStorage.setItem('phoenix-reset-email', email);
                    setTimeout(() => showForm('resetPasswordForm'), 2000);
                } else {
                    showError('forgotError', data.error || 'Failed to send reset code');
                }
            } catch (error) {
                showError('forgotError', 'Network error. Please try again.');
            } finally {
                btn.disabled = false;
                btn.textContent = 'Send Reset Code';
            }
        }
        
        async function handleResetPassword() {
            const code = document.getElementById('resetCode').value;
            const password = document.getElementById('resetPassword').value;
            const confirmPassword = document.getElementById('resetConfirmPassword').value;
            const email = localStorage.getItem('phoenix-reset-email');
            const btn = document.getElementById('resetPasswordBtn');
            
            if (!code || !password || !confirmPassword) {
                showError('resetError', 'Please fill in all fields');
                return;
            }
            
            if (password !== confirmPassword) {
                showError('resetError', 'Passwords do not match');
                return;
            }
            
            if (password.length < 8) {
                showError('resetError', 'Password must be at least 8 characters long');
                return;
            }
            
            if (!email) {
                showError('resetError', 'Email not found. Please start the reset process again.');
                return;
            }
            
            btn.disabled = true;
            btn.textContent = 'Resetting...';
            clearErrors();
            
            try {
                const response = await fetch(AUTH_ENDPOINT + '/reset-password', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, confirmationCode: code, newPassword: password })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    showSuccess('resetSuccess', 'Password reset successfully! You can now sign in.');
                    localStorage.removeItem('phoenix-reset-email');
                    setTimeout(() => showForm('loginForm'), 2000);
                } else {
                    showError('resetError', data.error || 'Password reset failed');
                }
            } catch (error) {
                showError('resetError', 'Network error. Please try again.');
            } finally {
                btn.disabled = false;
                btn.textContent = 'Reset Password';
            }
        }
        
        function handleLogout() {
            localStorage.removeItem('phoenix-access-token');
            localStorage.removeItem('phoenix-refresh-token');
            localStorage.removeItem('phoenix-current-session');
            accessToken = null;
            refreshToken = null;
            currentUser = null;
            conversationHistory = [];
            sessionId = generateSessionId();
            currentSessionId = sessionId;
            localStorage.setItem('phoenix-current-session', sessionId);
            showAuth();
        }
        
        // Chat History Management
        async function loadUserSessions() {
            try {
                console.log('Attempting to load user sessions...');
                const response = await fetch(CHAT_HISTORY_ENDPOINT + '/sessions', {
                    headers: { 'Authorization': 'Bearer ' + accessToken }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    console.log('Loaded sessions:', data);
                    displayChatHistory(data.sessions);
                } else if (response.status === 401) {
                    const refreshed = await refreshAccessToken();
                    if (refreshed) {
                        loadUserSessions(); // Retry
                    } else {
                        handleLogout();
                    }
                } else {
                    console.error('Failed to load sessions - status:', response.status);
                }
            } catch (error) {
                console.error('Failed to load user sessions:', error);
                // For now, show empty chat history instead of failing
                displayChatHistory({ today: [], thisWeek: [], older: [] });
            }
        }
        
        function displayChatHistory(sessions) {
            const todayChats = document.getElementById('todayChats');
            const thisWeekChats = document.getElementById('thisWeekChats');
            const olderChats = document.getElementById('olderChats');
            
            todayChats.innerHTML = '';
            thisWeekChats.innerHTML = '';
            olderChats.innerHTML = '';
            
            sessions.today.forEach(session => {
                todayChats.appendChild(createSessionElement(session));
            });
            
            sessions.thisWeek.forEach(session => {
                thisWeekChats.appendChild(createSessionElement(session));
            });
            
            sessions.older.forEach(session => {
                olderChats.appendChild(createSessionElement(session));
            });
            
            // Hide empty sections
            document.getElementById('todaySection').style.display = sessions.today.length ? 'block' : 'none';
            document.getElementById('thisWeekSection').style.display = sessions.thisWeek.length ? 'block' : 'none';
            document.getElementById('olderSection').style.display = sessions.older.length ? 'block' : 'none';
        }
        
        function createSessionElement(session) {
            const div = document.createElement('div');
            div.className = 'session-item';
            div.dataset.sessionId = session.sessionId;
            
            // Create content wrapper
            const contentDiv = document.createElement('div');
            contentDiv.className = 'session-content';
            
            const title = document.createElement('div');
            title.className = 'session-title';
            title.textContent = session.title;
            
            const preview = document.createElement('div');
            preview.className = 'session-preview';
            preview.textContent = session.preview || 'No messages yet';
            
            const time = document.createElement('div');
            time.className = 'session-time';
            time.textContent = formatTimestamp(session.lastActivity);
            
            contentDiv.appendChild(title);
            contentDiv.appendChild(preview);
            contentDiv.appendChild(time);
            
            // Create delete button
            const deleteBtn = document.createElement('button');
            deleteBtn.className = 'session-delete-btn';
            const currentTranslations = translations[currentLanguage] || translations['en'];
            deleteBtn.textContent = currentTranslations['delete'] || 'Delete';
            deleteBtn.title = currentTranslations['delete_conversation'] || 'Delete conversation';
            
            let confirmingDelete = false;
            deleteBtn.addEventListener('click', (e) => {
                e.stopPropagation(); // Prevent session loading
                
                if (!confirmingDelete) {
                    // First click - show confirmation
                    confirmingDelete = true;
                    deleteBtn.textContent = currentTranslations['confirm_delete'] || 'Confirm?';
                    deleteBtn.classList.add('confirming');
                    
                    // Reset after 3 seconds if no second click
                    setTimeout(() => {
                        if (confirmingDelete) {
                            confirmingDelete = false;
                            deleteBtn.textContent = currentTranslations['delete'] || 'Delete';
                            deleteBtn.classList.remove('confirming');
                        }
                    }, 3000);
                } else {
                    // Second click - actually delete
                    deleteSession(session.sessionId);
                }
            });
            
            div.appendChild(contentDiv);
            div.appendChild(deleteBtn);
            
            // Only add click handler to content div, not the whole item
            contentDiv.addEventListener('click', () => loadSession(session.sessionId));
            
            return div;
        }
        
        async function deleteSession(sessionId) {
            try {
                console.log('Deleting session:', sessionId);
                const response = await fetch(CHAT_HISTORY_ENDPOINT + '/sessions/' + sessionId, {
                    method: 'DELETE',
                    headers: { 'Authorization': 'Bearer ' + accessToken }
                });
                
                if (response.ok) {
                    console.log('Session deleted successfully');
                    // Remove the session from the UI
                    const sessionElement = document.querySelector(`[data-session-id="${sessionId}"]`);
                    if (sessionElement) {
                        sessionElement.remove();
                    }
                    
                    // If this was the current session, start a new one
                    if (currentSessionId === sessionId) {
                        createNewSession();
                    }
                    
                    // Refresh the sidebar to get updated list
                    setTimeout(() => {
                        loadUserSessions();
                    }, 500);
                    
                } else if (response.status === 401) {
                    const refreshed = await refreshAccessToken();
                    if (refreshed) {
                        deleteSession(sessionId); // Retry
                    } else {
                        handleLogout();
                    }
                } else {
                    console.error('Failed to delete session - status:', response.status);
                    alert('Failed to delete conversation. Please try again.');
                }
            } catch (error) {
                console.error('Failed to delete session:', error);
                alert('Failed to delete conversation. Please try again.');
            }
        }
        
        async function loadSession(sessionId) {
            try {
                console.log('=== LOADING SESSION ===');
                console.log('Loading session:', sessionId);
                console.log('Current sessionId before load:', currentSessionId);
                console.log('Current conversationHistory before load:', conversationHistory.length);
                const response = await fetch(CHAT_HISTORY_ENDPOINT + '/sessions/' + sessionId, {
                    headers: { 'Authorization': 'Bearer ' + accessToken }
                });
                
                console.log('Response status:', response.status);
                
                if (response.ok) {
                    const data = await response.json();
                    console.log('Session data loaded:', data);
                    currentSessionId = sessionId;
                    sessionId = sessionId; // Update global sessionId as well
                    
                    // Save current session to localStorage
                    localStorage.setItem('phoenix-current-session', sessionId);
                    
                    // Convert timestamps from seconds to milliseconds and ensure proper structure
                    if (data.messages && Array.isArray(data.messages)) {
                        conversationHistory = data.messages.map(msg => ({
                            content: msg.content,
                            role: msg.role,
                            timestamp: msg.timestamp * 1000, // Convert seconds to milliseconds
                            messageId: msg.messageId,
                            ragEnabled: msg.ragEnabled || false
                        }));
                    } else {
                        conversationHistory = [];
                    }
                    
                    console.log('Conversation history set:', conversationHistory);
                    displayConversationHistory();
                    updateSessionDisplay();
                    
                    // Update active session in sidebar
                    document.querySelectorAll('.session-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    const activeElement = document.querySelector(`[data-session-id="${sessionId}"]`);
                    console.log('Active element found:', activeElement);
                    if (activeElement) {
                        activeElement.classList.add('active');
                    }
                } else if (response.status === 401) {
                    const refreshed = await refreshAccessToken();
                    if (refreshed) {
                        loadSession(sessionId); // Retry
                    } else {
                        handleLogout();
                    }
                } else {
                    console.error('Failed to load session - status:', response.status);
                    const errorData = await response.text();
                    console.error('Error response:', errorData);
                }
            } catch (error) {
                console.error('Failed to load session:', error);
            }
        }
        
        function createNewSession() {
            console.log('=== CREATE NEW SESSION CALLED ===');
            console.trace('createNewSession stack trace:');
            
            // Generate a new session locally
            const newSessionId = generateSessionId();
            currentSessionId = newSessionId;
            conversationHistory = [];
            sessionId = newSessionId;
            
            // Save new sessionId to localStorage
            localStorage.setItem('phoenix-current-session', newSessionId);
            
            clearChatMessages();
            updateSessionDisplay();
            
            // Remove active class from all sessions
            document.querySelectorAll('.session-item').forEach(item => {
                item.classList.remove('active');
            });
        }
        
        function displayConversationHistory() {
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = '';
            
            if (conversationHistory.length === 0) {
                const currentTranslations = translations[currentLanguage] || translations['en'];
                const welcomeTitle = currentTranslations['welcome_title'] || translations['en']['welcome_title'];
                const welcomeMessage = currentTranslations['welcome_message'] || translations['en']['welcome_message'];
                chatMessages.innerHTML = '<div class="welcome-message"><h2>' + welcomeTitle + '</h2><p>' + welcomeMessage + '</p></div>';
            } else {
                conversationHistory.forEach(msg => {
                    addMessage(msg.content, msg.role, msg.timestamp, msg.messageId, msg.ragEnabled);
                });
            }
        }
        
        function clearChatMessages() {
            const chatMessages = document.getElementById('chatMessages');
            const currentTranslations = translations[currentLanguage] || translations['en'];
            const welcomeTitle = currentTranslations['welcome_title'] || translations['en']['welcome_title'];
            const welcomeMessage = currentTranslations['welcome_message'] || translations['en']['welcome_message'];
            chatMessages.innerHTML = '<div class="welcome-message"><h2>' + welcomeTitle + '</h2><p>' + welcomeMessage + '</p></div>';
        }
        
        function clearCurrentChat() {
            // Clear the visual chat messages
            clearChatMessages();
            
            // Clear the input field
            document.getElementById('chatInput').value = '';
            
            // Reset conversation history (but keep session ID)
            conversationHistory = [];
            
            // Optional: Show confirmation
            const currentTranslations = translations[currentLanguage] || translations['en'];
            const chatMessages = document.getElementById('chatMessages');
            const tempMessage = document.createElement('div');
            tempMessage.className = 'system-message';
            tempMessage.style.cssText = 'text-align: center; color: #666; padding: 10px; font-style: italic;';
            tempMessage.textContent = 'Chat cleared';
            chatMessages.appendChild(tempMessage);
            
            // Remove the confirmation message after 2 seconds
            setTimeout(() => {
                if (tempMessage.parentNode) {
                    tempMessage.parentNode.removeChild(tempMessage);
                }
            }, 2000);
        }
        
        // Search functionality
        async function searchConversations(query) {
            if (!query.trim()) {
                loadUserSessions();
                return;
            }
            
            try {
                const response = await fetch(CHAT_HISTORY_ENDPOINT + '/search?q=' + encodeURIComponent(query), {
                    headers: { 'Authorization': 'Bearer ' + accessToken }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    displaySearchResults(data.matches);
                } else if (response.status === 401) {
                    const refreshed = await refreshAccessToken();
                    if (refreshed) {
                        searchConversations(query); // Retry
                    } else {
                        handleLogout();
                    }
                }
            } catch (error) {
                console.error('Search failed:', error);
            }
        }
        
        function displaySearchResults(matches) {
            const todayChats = document.getElementById('todayChats');
            const thisWeekChats = document.getElementById('thisWeekChats');
            const olderChats = document.getElementById('olderChats');
            
            todayChats.innerHTML = '';
            thisWeekChats.innerHTML = '';
            olderChats.innerHTML = '';
            
            // Group search results by session
            const sessionMap = {};
            matches.forEach(match => {
                if (!sessionMap[match.sessionId]) {
                    sessionMap[match.sessionId] = {
                        sessionId: match.sessionId,
                        title: match.sessionTitle,
                        preview: match.content.substring(0, 50) + '...',
                        lastActivity: match.timestamp
                    };
                }
            });
            
            Object.values(sessionMap).forEach(session => {
                todayChats.appendChild(createSessionElement(session));
            });
            
            // Show only today section for search results
            document.getElementById('todaySection').style.display = 'block';
            document.getElementById('thisWeekSection').style.display = 'none';
            document.getElementById('olderSection').style.display = 'none';
            
            // Update title to show search results
            document.querySelector('#todaySection .history-title').textContent = 'Search Results';
        }
        
        // Admin Console Functions
        let adminSettings = {
            adaptiveModel: true,
            defaultModel: 'sonnet',
            ragEnabled: true,
            streamingEnabled: true,
            debugMode: false
        };
        
        function setupAdminConsole() {
            console.log('Setting up admin console...');
            // Load saved settings
            const savedSettings = localStorage.getItem('phoenixAdminSettings');
            if (savedSettings) {
                console.log('Loading saved settings:', savedSettings);
                adminSettings = { ...adminSettings, ...JSON.parse(savedSettings) };
            }
            console.log('Final adminSettings after setup:', adminSettings);
            
            // Setup event listeners
            const adminBtn = document.getElementById('adminConsoleBtn');
            const adminOverlay = document.getElementById('adminModalOverlay');
            const adminClose = document.getElementById('adminModalClose');
            const saveBtn = document.getElementById('saveAdminSettings');
            const resetBtn = document.getElementById('resetAdminSettings');
            
            if (adminBtn) {
                adminBtn.addEventListener('click', showAdminConsole);
            }
            
            if (adminClose) {
                adminClose.addEventListener('click', hideAdminConsole);
            }
            
            if (adminOverlay) {
                adminOverlay.addEventListener('click', (e) => {
                    if (e.target === adminOverlay) {
                        hideAdminConsole();
                    }
                });
            }
            
            if (saveBtn) {
                saveBtn.addEventListener('click', saveAdminSettings);
            }
            
            if (resetBtn) {
                resetBtn.addEventListener('click', resetAdminSettings);
            }
            
            // Setup adaptive model toggle
            const adaptiveToggle = document.getElementById('adaptiveModelToggle');
            const modelSelection = document.getElementById('modelSelection');
            
            if (adaptiveToggle) {
                adaptiveToggle.addEventListener('change', (e) => {
                    const isEnabled = e.target.checked;
                    console.log('Adaptive toggle changed:', isEnabled);
                    
                    // Update the settings immediately
                    adminSettings.adaptiveModel = isEnabled;
                    console.log('Updated adminSettings.adaptiveModel to:', isEnabled);
                    
                    if (modelSelection) {
                        modelSelection.style.display = isEnabled ? 'none' : 'flex';
                    }
                });
            }
            
            // Initialize UI state
            updateAdminUI();
        }
        
        function showAdminConsole() {
            const overlay = document.getElementById('adminModalOverlay');
            if (overlay) {
                overlay.classList.add('show');
                updateAdminUI();
            }
        }
        
        function hideAdminConsole() {
            const overlay = document.getElementById('adminModalOverlay');
            if (overlay) {
                overlay.classList.remove('show');
            }
        }
        
        function updateAdminUI() {
            // Update toggle states
            const adaptiveToggle = document.getElementById('adaptiveModelToggle');
            const ragToggle = document.getElementById('ragToggle');
            const streamingToggle = document.getElementById('streamingToggle');
            const debugToggle = document.getElementById('debugToggle');
            const defaultModelSelect = document.getElementById('defaultModelSelect');
            const modelSelection = document.getElementById('modelSelection');
            
            if (adaptiveToggle) {
                adaptiveToggle.checked = adminSettings.adaptiveModel;
            }
            if (ragToggle) {
                ragToggle.checked = adminSettings.ragEnabled;
            }
            if (streamingToggle) {
                streamingToggle.checked = adminSettings.streamingEnabled;
            }
            if (debugToggle) {
                debugToggle.checked = adminSettings.debugMode;
            }
            if (defaultModelSelect) {
                defaultModelSelect.value = adminSettings.defaultModel;
            }
            if (modelSelection) {
                modelSelection.style.display = adminSettings.adaptiveModel ? 'none' : 'flex';
            }
        }
        
        function saveAdminSettings() {
            // Gather settings from UI
            const adaptiveToggle = document.getElementById('adaptiveModelToggle');
            const ragToggle = document.getElementById('ragToggle');
            const streamingToggle = document.getElementById('streamingToggle');
            const debugToggle = document.getElementById('debugToggle');
            const defaultModelSelect = document.getElementById('defaultModelSelect');
            
            adminSettings = {
                adaptiveModel: adaptiveToggle?.checked || false,
                defaultModel: defaultModelSelect?.value || 'sonnet',
                ragEnabled: ragToggle?.checked || false,
                streamingEnabled: streamingToggle?.checked || false,
                debugMode: debugToggle?.checked || false
            };
            
            // Save to localStorage
            localStorage.setItem('phoenixAdminSettings', JSON.stringify(adminSettings));
            
            // Show success message
            showNotification('Admin settings saved successfully!', 'success');
            
            // Close modal
            hideAdminConsole();
            
            console.log('Admin settings saved:', adminSettings);
        }
        
        function resetAdminSettings() {
            adminSettings = {
                adaptiveModel: true,
                defaultModel: 'sonnet',
                ragEnabled: true,
                streamingEnabled: true,
                debugMode: false
            };
            
            localStorage.removeItem('phoenixAdminSettings');
            updateAdminUI();
            showNotification('Settings reset to defaults', 'info');
        }
        
        function determineModelForQuery(query) {
            // Ensure adminSettings is initialized
            if (!adminSettings) {
                console.error('adminSettings not initialized, using default');
                return 'sonnet';
            }
            
            console.log('Current adminSettings:', adminSettings);
            
            if (!adminSettings.adaptiveModel) {
                console.log('Adaptive model disabled, using default:', adminSettings.defaultModel);
                return adminSettings.defaultModel;
            }
            
            console.log('Adaptive model enabled, analyzing query:', query.substring(0, 100));
            
            // Simple complexity analysis
            const complexityIndicators = [
                'analyze', 'explain', 'compare', 'evaluate', 'synthesize',
                'complex', 'detailed', 'comprehensive', 'elaborate',
                'code', 'programming', 'algorithm', 'technical',
                'research', 'academic', 'scholarly', 'thesis'
            ];
            
            const simpleIndicators = [
                'what is', 'who is', 'when', 'where', 'define',
                'yes', 'no', 'simple', 'quick', 'brief'
            ];
            
            const queryLower = query.toLowerCase();
            const complexScore = complexityIndicators.filter(indicator => 
                queryLower.includes(indicator)).length;
            const simpleScore = simpleIndicators.filter(indicator => 
                queryLower.includes(indicator)).length;
            
            const wordCount = query.trim().split(/\s+/).length;
            const hasCodeBlock = query.includes('```') || query.includes('function') || query.includes('class');
            
            // Decision logic - TESTING HAIKU
            let selectedModel = 'haiku'; // Default to faster model
            
            if (hasCodeBlock || complexScore > simpleScore || wordCount > 50) {
                selectedModel = 'sonnet';
            }
            
            console.log('Model selection result:', {
                query: query.substring(0, 50) + '...',
                complexScore,
                simpleScore,
                wordCount,
                hasCodeBlock,
                selectedModel
            });
            
            if (adminSettings.debugMode) {
                console.log('Model Selection Debug:', {
                    query: query.substring(0, 100) + '...',
                    complexScore,
                    simpleScore,
                    wordCount,
                    hasCodeBlock,
                    selectedModel
                });
                
                // Show debug info in chat if enabled
                const debugMessage = ` Debug: Selected ${selectedModel.toUpperCase()} model (complexity: ${complexScore}, simple: ${simpleScore}, words: ${wordCount})`;
                addDebugMessage(debugMessage);
            }
            
            return selectedModel;
        }
        
        function addDebugMessage(message) {
            const chatMessages = document.getElementById('chatMessages');
            if (!chatMessages) return;
            
            const debugDiv = document.createElement('div');
            debugDiv.className = 'debug-message';
            debugDiv.style.cssText = `
                background: #f0f8ff; 
                border-left: 4px solid #14a085; 
                padding: 8px 12px; 
                margin: 5px 0; 
                font-size: 12px; 
                color: #666; 
                border-radius: 4px;
            `;
            debugDiv.textContent = message;
            
            chatMessages.appendChild(debugDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#4caf50' : type === 'error' ? '#f44336' : '#2196f3'};
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                z-index: 10000;
                animation: slideInRight 0.3s ease-out;
            `;
            notification.textContent = message;
            
            // Add to DOM
            document.body.appendChild(notification);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease-in';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // Code Detection and Formatting Functions
        function detectLanguage(code) {
            // Language detection patterns
            const patterns = {
                javascript: [/\b(function|const|let|var|=&gt;|console\.log|document\.|window\.)/i, /\.js$/i],
                python: [/\b(def|import|from|class|if __name__|print\()/i, /\.py$/i],
                html: [/&lt;!DOCTYPE|&lt;html|&lt;head|&lt;body|&lt;div/i, /\.html$/i],
                css: [/\{[^}]*:[^}]*\}|@media|@import|@keyframes/i, /\.css$/i],
                sql: [/\b(SELECT|INSERT|UPDATE|DELETE|CREATE|ALTER|DROP)\b/i, /\.sql$/i],
                bash: [/^\$|#!/i, /\.(sh|bash)$/i],
                json: [/^\s*[\{\[][\s\S]*[\}\]]\s*$/i, /\.json$/i],
                xml: [/&lt;\?xml|&lt;!\[CDATA\[/i, /\.xml$/i],
                java: [/\b(public|private|protected|class|interface|import)\b/i, /\.java$/i],
                cpp: [/\b(#include|using namespace|std::|cout|cin)\b/i, /\.(cpp|c\+\+|cc)$/i],
                c: [/\b(#include|printf|scanf|int main)\b/i, /\.c$/i],
                php: [/&lt;\?php|\b(echo|var_dump|\$[a-zA-Z_])/i, /\.php$/i],
                ruby: [/\b(def|end|puts|class|require)\b/i, /\.rb$/i],
                go: [/\b(package|import|func|var|:=)\b/i, /\.go$/i],
                rust: [/\b(fn|let|mut|struct|impl|use)\b/i, /\.rs$/i],
                swift: [/\b(func|var|let|class|struct|import)\b/i, /\.swift$/i],
                kotlin: [/\b(fun|val|var|class|object|import)\b/i, /\.kt$/i],
                yaml: [/^[a-zA-Z0-9_-]+:\s*$|^-\s+/im, /\.(yml|yaml)$/i],
                markdown: [/^#{1,6}\s|^\*{1,2}[^*]|\[.*\]\(.*\)/im, /\.md$/i]
            };
            
            // Count matches for each language
            const scores = {};
            for (const [lang, langPatterns] of Object.entries(patterns)) {
                scores[lang] = 0;
                langPatterns.forEach(pattern => {
                    if (pattern.test(code)) {
                        scores[lang]++;
                    }
                });
            }
            
            // Find language with highest score
            const bestMatch = Object.entries(scores).reduce((a, b) => a[1] > b[1] ? a : b);
            return bestMatch[1] > 0 ? bestMatch[0] : 'code';
        }
        
        function formatCodeBlock(code, language = null) {
            const detectedLang = language || detectLanguage(code);
            const copyId = 'copy-' + Math.random().toString(36).substr(2, 9);
            
            return `
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-language">${detectedLang}</span>
                        <button class="code-copy-btn" onclick="copyCode('${copyId}')">Copy</button>
                    </div>
                    <div class="code-content">
                        <pre id="${copyId}"><code>${code}</code></pre>
                    </div>
                </div>
            `;
        }
        
        function copyCode(elementId) {
            const codeElement = document.getElementById(elementId);
            const text = codeElement.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                // Show temporary feedback
                const button = document.querySelector(`button[onclick="copyCode('${elementId}')"]`);
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                button.style.background = '#28a745';
                button.style.color = 'white';
                button.style.borderColor = '#28a745';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                    button.style.color = '';
                    button.style.borderColor = '';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy code:', err);
            });
        }
        
        function formatMessageContent(content) {
            // Escape HTML first
            const escapeHtml = (text) => {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            };
            
            // Convert back to text to work with
            let processedContent = content;
            
            // 1. Handle multi-line code blocks (```language)
            processedContent = processedContent.replace(/```(\w+)?\n?([\s\S]*?)```/g, (match, language, code) => {
                const trimmedCode = code.trim();
                return formatCodeBlock(escapeHtml(trimmedCode), language);
            });
            
            // 2. Handle single backtick inline code
            processedContent = processedContent.replace(/`([^`]+)`/g, (match, code) => {
                return `<span class="inline-code">${escapeHtml(code)}</span>`;
            });
            
            // 3. Handle common code patterns without backticks
            // Multi-line code blocks that look like code
            processedContent = processedContent.replace(/\n((?:[ ]{4}|\t).+(?:\n(?:[ ]{4}|\t).+)*)/g, (match, code) => {
                const cleanCode = code.replace(/^[ ]{4}|\t/gm, '').trim();
                if (cleanCode.length > 10) { // Only if substantial
                    return '\n' + formatCodeBlock(escapeHtml(cleanCode));
                }
                return match;
            });
            
            // 4. Detect code-like lines (function definitions, imports, etc.)
            const codePatterns = [
                /^(function|def|class|import|from|#include|public class|private class|\$|&gt;|curl|git)/im,
                /^[a-zA-Z_$][a-zA-Z0-9_$]*\s*\([^)]*\)\s*[{:]?\s*$/gm, // Function signatures
                /^[a-zA-Z_$][a-zA-Z0-9_$]*\s*=\s*.+[;}]?\s*$/gm, // Variable assignments
            ];
            
            // Format detected code patterns
            processedContent = processedContent.replace(/\n([^\n]+(?:\n[^\n]+){0,10})/g, (match, block) => {
                if (codePatterns.some(pattern => pattern.test(block))) {
                    const lines = block.split('\n');
                    if (lines.length >= 2) { // Multi-line code
                        return '\n' + formatCodeBlock(escapeHtml(block.trim()));
                    }
                }
                return match;
            });
            
            // 5. Format remaining content: convert double line breaks to paragraphs, single to <br>
            const parts = processedContent.split(/(<div class="code-block">[\s\S]*?<\/div>)/);
            
            return parts.map(part => {
                if (part.includes('code-block')) {
                    return part; // Keep code blocks as-is
                } else {
                    // Format regular text content
                    return part
                        .split(/\n\n+/)
                        .map(paragraph => paragraph.trim())
                        .filter(paragraph => paragraph)
                        .map(paragraph => `<p style="margin: 0 0 1em 0;">${paragraph.replace(/\n/g, '<br>')}</p>`)
                        .join('');
                }
            }).join('');
        }
        
        // Streaming Response Functions
        async function streamResponseToMessage(fullResponse, messageId) {
            const messageElement = document.querySelector(`[data-message-id="${messageId}"] .message-content`);
            if (!messageElement) {
                console.error('Message element not found for streaming');
                return;
            }
            
            // Split response into words for streaming simulation
            const words = fullResponse.split(' ');
            let currentText = '';
            
            // Stream words with typing effect
            for (let i = 0; i < words.length; i++) {
                currentText += (i > 0 ? ' ' : '') + words[i];
                
                // Format the accumulated text with paragraphs
                const formattedText = currentText
                    .split(/\n\n+/)
                    .map(paragraph => paragraph.trim())
                    .filter(paragraph => paragraph)
                    .map(paragraph => `<p style="margin: 0 0 1em 0;">${paragraph.replace(/\n/g, '<br>')}</p>`)
                    .join('');
                
                // Update the message content with cursor
                messageElement.innerHTML = formattedText + '<span class="typing-cursor">|</span>';
                
                // Auto-scroll to bottom
                const chatMessages = document.getElementById('chatMessages');
                if (chatMessages) {
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }
                
                // Delay between words (adjust for speed)
                const delay = words[i].length > 8 ? 100 : 50; // Longer words get more delay
                await new Promise(resolve => setTimeout(resolve, delay));
            }
            
            // Remove cursor after streaming is complete and apply final formatting with code detection
            messageElement.innerHTML = formatMessageContent(currentText);
            
            // Final scroll to bottom
            const chatMessages = document.getElementById('chatMessages');
            if (chatMessages) {
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }
        
        // Utility functions
        function generateSessionId() {
            return 'phoenix-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        }
        
        function generateMessageId() {
            return 'msg-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        }
        
        function formatTimestamp(timestamp) {
            // Handle both Unix timestamps (seconds) and milliseconds
            let date;
            if (typeof timestamp === 'string') {
                date = new Date(timestamp);
            } else if (timestamp > 1000000000000) {
                // Timestamp in milliseconds
                date = new Date(timestamp);
            } else {
                // Timestamp in seconds
                date = new Date(timestamp * 1000);
            }
            
            // Check if date is valid
            if (isNaN(date.getTime())) {
                return 'now';
            }
            
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 1) return 'now';
            if (diffMins < 60) return diffMins + 'm ago';
            if (diffHours < 24) return diffHours + 'h ago';
            if (diffDays < 7) return diffDays + 'd ago';
            return date.toLocaleDateString();
        }
        
        function updateSessionDisplay() {
            const sessionIdDisplay = document.getElementById('sessionIdDisplay');
            sessionIdDisplay.textContent = currentSessionId.substring(0, 8) + '...';
        }
        
        // Update chat history in real-time when new messages are sent
        function updateChatHistoryRealTime(latestUserMessage) {
            console.log('=== REAL-TIME CHAT HISTORY UPDATE ===');
            console.log('Latest user message:', latestUserMessage);
            console.log('Current session ID:', currentSessionId);
            
            if (!latestUserMessage) {
                console.log('No latest user message provided');
                return;
            }
            
            // Find the current session in the sidebar
            const currentSessionElement = document.querySelector(`[data-session-id="${currentSessionId}"]`);
            console.log('Current session element found:', !!currentSessionElement);
            
            if (currentSessionElement) {
                // Update existing session
                const previewElement = currentSessionElement.querySelector('.session-preview');
                const titleElement = currentSessionElement.querySelector('.session-title');
                const timeElement = currentSessionElement.querySelector('.session-time');
                
                if (previewElement) {
                    // Update preview with latest user message
                    const preview = latestUserMessage.length > 50 ? 
                        latestUserMessage.substring(0, 50) + '...' : 
                        latestUserMessage;
                    previewElement.textContent = preview;
                }
                
                if (timeElement) {
                    // Update timestamp to "now"
                    timeElement.textContent = 'now';
                }
                
                // If this is the first message, update the title
                if (titleElement && (titleElement.textContent === 'New Conversation' || titleElement.textContent.includes('New Chat'))) {
                    const title = latestUserMessage.length > 60 ? 
                        latestUserMessage.substring(0, 60) + '...' : 
                        latestUserMessage;
                    titleElement.textContent = title;
                }
                
                // Move session to top of the list (most recent)
                const sessionsList = currentSessionElement.parentNode;
                if (sessionsList && sessionsList.firstChild !== currentSessionElement) {
                    sessionsList.insertBefore(currentSessionElement, sessionsList.firstChild);
                }
                
            } else {
                console.log('Session not found in sidebar - creating new entry');
                // Create new session entry if it doesn't exist
                // This handles the case where we're in a completely new session
                const firstUserMessage = conversationHistory.find(msg => msg.role === 'user');
                console.log('First user message:', firstUserMessage);
                console.log('Conversation history length:', conversationHistory.length);
                
                if (firstUserMessage) {
                    const sessionData = {
                        sessionId: currentSessionId,
                        title: firstUserMessage.content.length > 60 ? 
                            firstUserMessage.content.substring(0, 60) + '...' : 
                            firstUserMessage.content,
                        preview: latestUserMessage.length > 50 ? 
                            latestUserMessage.substring(0, 50) + '...' : 
                            latestUserMessage,
                        lastActivity: Math.floor(Date.now() / 1000),
                        messageCount: conversationHistory.length
                    };
                    
                    // Add to the "Today" section
                    const todayChats = document.getElementById('todayChats');
                    const todaySection = document.getElementById('todaySection');
                    
                    console.log('Today chats element found:', !!todayChats);
                    console.log('Today section element found:', !!todaySection);
                    
                    if (todayChats && todaySection) {
                        const sessionElement = createSessionElement(sessionData);
                        sessionElement.classList.add('active');
                        todayChats.insertBefore(sessionElement, todayChats.firstChild);
                        
                        // Make sure the today section is visible
                        todaySection.style.display = 'block';
                        console.log('New session added to sidebar successfully');
                    } else {
                        console.log('Could not find today section elements');
                    }
                }
            }
        }
        
        // Event listeners setup
        function setupEventListeners() {
            const sendButton = document.getElementById('sendBtn');
            const clearButton = document.getElementById('clearBtn');
            const micButton = document.getElementById('voiceBtn');
            const chatInput = document.getElementById('chatInput');
            const newChatBtn = document.getElementById('newChatBtn');
            const searchInput = document.getElementById('searchInput');
            const languageBtn = document.getElementById('languageBtn');
            const languageDropdown = document.getElementById('languageDropdown');
            
            sendButton.addEventListener('click', sendMessage);
            clearButton.addEventListener('click', clearCurrentChat);
            micButton.addEventListener('click', toggleVoiceInput);
            newChatBtn.addEventListener('click', () => createNewSession());
            languageBtn.addEventListener('click', toggleLanguageDropdown);
            
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
            
            // Clear all history button
            const clearAllBtn = document.getElementById('clearAllHistoryBtn');
            if (clearAllBtn) {
                clearAllBtn.addEventListener('click', showClearAllHistoryModal);
            }
            
            // Ensure normal text input behavior for key repetition
            chatInput.addEventListener('keydown', function(e) {
                // Allow all normal text input keys including key repetition
                // Only handle special cases if needed
                if (e.key === 'Tab') {
                    // Allow tab to maintain focus management
                    return;
                }
            });
            
            chatInput.addEventListener('input', function() {
                // Use requestAnimationFrame to avoid blocking key repetition
                requestAnimationFrame(() => {
                    chatInput.style.height = 'auto';
                    chatInput.style.height = Math.min(chatInput.scrollHeight, 200) + 'px';
                });
            });
            
            // Search with debounce
            let searchTimeout;
            searchInput.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    const query = searchInput.value.trim();
                    if (query) {
                        searchConversations(query);
                    } else {
                        loadUserSessions();
                    }
                }, 300);
            });
            
            // Close language dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!languageBtn.contains(e.target)) {
                    languageDropdown.classList.remove('show');
                }
            });
        }
        
        // Updated sendMessage function to work with authentication
        async function sendMessage() {
            const message = document.getElementById('chatInput').value.trim();
            if (!message || isTyping) return;
            
            // Determine which model to use based on admin settings
            let selectedModel;
            try {
                selectedModel = determineModelForQuery(message);
                console.log('Sending message with sessionId:', currentSessionId, 'model:', selectedModel);
            } catch (error) {
                console.error('Error in model selection:', error);
                selectedModel = 'sonnet'; // Fallback to default
                console.log('Using fallback model:', selectedModel);
            }
            
            if (!selectedModel) {
                console.error('No model selected, using default');
                selectedModel = 'sonnet';
            }
            const userMessageId = generateMessageId();
            
            // Debug conversation history for follow-up messages
            console.log('=== FOLLOW-UP MESSAGE DEBUG ===');
            console.log('Current sessionId:', currentSessionId);
            console.log('ConversationHistory length:', conversationHistory.length);
            console.log('ConversationHistory:', conversationHistory);
            console.log('Message:', message);
            console.log('=== END DEBUG ===');
            
            addMessage(message, 'user', Date.now(), userMessageId);
            
            // Update chat history in real-time
            updateChatHistoryRealTime(message);
            
            document.getElementById('chatInput').value = '';
            document.getElementById('chatInput').style.height = 'auto';
            document.getElementById('sendBtn').disabled = true;
            showTypingIndicator();
            
            try {
                const response = await fetch(API_ENDPOINT + '/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + accessToken
                    },
                    body: JSON.stringify({
                        message: message,
                        sessionId: currentSessionId,
                        userId: currentUser.userId,
                        history: conversationHistory.slice(-10),
                        messageId: userMessageId,
                        language: currentLanguage,
                        model: selectedModel,
                        ragEnabled: adminSettings.ragEnabled,
                        streamingEnabled: adminSettings.streamingEnabled,
                        adminSettings: adminSettings
                    })
                });
                
                if (!response.ok) {
                    if (response.status === 401) {
                        const refreshed = await refreshAccessToken();
                        if (refreshed) {
                            // Retry the request with updated token - don't call sendMessage() again
                            // as that would duplicate the user message
                            const retryResponse = await fetch(API_ENDPOINT + '/chat', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                    'Authorization': 'Bearer ' + accessToken
                                },
                                body: JSON.stringify({
                                    message: message,
                                    sessionId: currentSessionId,
                                    userId: currentUser.userId,
                                    history: conversationHistory.slice(-10),
                                    messageId: userMessageId,
                                    language: currentLanguage,
                                    model: selectedModel,
                                    ragEnabled: adminSettings.ragEnabled,
                                    streamingEnabled: adminSettings.streamingEnabled,
                                    adminSettings: adminSettings
                                })
                            });
                            if (retryResponse.ok) {
                                response = retryResponse;
                            } else {
                                throw new Error('HTTP error! status: ' + retryResponse.status);
                            }
                        } else {
                            handleLogout();
                            return;
                        }
                    }
                    throw new Error('HTTP error! status: ' + response.status);
                }
                
                const data = await response.json();
                const assistantMessageId = generateMessageId();
                
                // Hide typing indicator before showing response
                hideTypingIndicator();
                
                // Check if streaming is enabled
                if (adminSettings.streamingEnabled && data.response) {
                    console.log('Using streaming mode for response');
                    // Add message with empty content first
                    addMessage('', 'assistant', Date.now(), assistantMessageId, data.ragEnabled);
                    // Then stream the response
                    await streamResponseToMessage(data.response, assistantMessageId);
                } else {
                    console.log('Using regular mode for response (streaming disabled)');
                    // Regular non-streaming response
                    addMessage(data.response, 'assistant', Date.now(), assistantMessageId, data.ragEnabled);
                }
                
                // Update chat history after AI response to keep it current
                const lastUserMessage = conversationHistory.slice().reverse().find(msg => msg.role === 'user');
                if (lastUserMessage) {
                    updateChatHistoryRealTime(lastUserMessage.content);
                }
                
                // Update session in backend - disabled to prevent duplicate session creation
                // Backend chat handler now manages sessions automatically
                // await updateSessionActivity();
                
                // Refresh chat history sidebar with delay to avoid interfering with current conversation
                // TEMPORARILY DISABLED to test if this is causing the follow-up message issue
                // setTimeout(() => {
                //     console.log('=== LOADING USER SESSIONS AFTER MESSAGE ===');
                //     console.log('Before loadUserSessions - conversationHistory length:', conversationHistory.length);
                //     loadUserSessions();
                // }, 2000);
                
            } catch (error) {
                console.error('Error sending message:', error);
                const currentTranslations = translations[currentLanguage] || translations['en'];
                showError('error_message', currentTranslations['error_message'] || translations['en']['error_message']);
            } finally {
                hideTypingIndicator();
                document.getElementById('sendBtn').disabled = false;
                document.getElementById('chatInput').focus();
            }
        }
        
        async function updateSessionActivity() {
            try {
                // Get the first user message for title and last message for preview
                const firstUserMessage = conversationHistory.find(msg => msg.role === 'user');
                const lastMessage = conversationHistory[conversationHistory.length - 1];
                
                // Generate a title from the first user message (truncate to reasonable length)
                const title = firstUserMessage ? 
                    firstUserMessage.content.substring(0, 100).trim() + (firstUserMessage.content.length > 100 ? '...' : '') : 
                    'New Conversation';
                
                // Get preview from the last user message (not assistant message)
                const lastUserMessage = [...conversationHistory].reverse().find(msg => msg.role === 'user');
                const preview = lastUserMessage ? lastUserMessage.content.substring(0, 50) + '...' : '';
                
                // First, try to update the session
                console.log('Updating session with:', {
                    sessionId: currentSessionId,
                    title: title,
                    preview: preview,
                    messageCount: conversationHistory.length
                });
                
                let response = await fetch(CHAT_HISTORY_ENDPOINT + '/sessions/' + currentSessionId, {
                    method: 'PUT',
                    headers: {
                        'Authorization': 'Bearer ' + accessToken,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        title: title,
                        lastActivity: Math.floor(Date.now() / 1000),
                        messageCount: conversationHistory.length,
                        preview: preview
                    })
                });
                
                // If session doesn't exist (404), create it
                if (response.status === 404) {
                    console.log('Session not found, creating new session...');
                    const createResponse = await fetch(CHAT_HISTORY_ENDPOINT + '/sessions', {
                        method: 'POST',
                        headers: {
                            'Authorization': 'Bearer ' + accessToken,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            title: title,
                            sessionId: currentSessionId,
                            messages: conversationHistory,
                            lastActivity: Math.floor(Date.now() / 1000),
                            messageCount: conversationHistory.length,
                            preview: preview
                        })
                    });
                    
                    if (createResponse.ok) {
                        console.log('Session created successfully with title:', title);
                        const responseData = await createResponse.json();
                        console.log('Create session response:', responseData);
                    } else {
                        console.error('Failed to create session:', createResponse.status);
                        const errorData = await createResponse.text();
                        console.error('Error creating session:', errorData);
                    }
                }
                
            } catch (error) {
                console.error('Failed to update session activity:', error);
            }
        }
        
        // Language and Translation Functions
        function populateLanguageDropdown() {
            const dropdown = document.getElementById('languageDropdown');
            dropdown.innerHTML = '';
            
            Object.keys(supportedLanguages).forEach(code => {
                const lang = supportedLanguages[code];
                const option = document.createElement('div');
                option.className = 'language-option';
                if (code === currentLanguage) {
                    option.classList.add('selected');
                }
                
                option.innerHTML = `
                    <img src="https://flagcdn.com/20x15/${lang.flag}.png" alt="${lang.name}" class="flag-icon">
                    <span>${lang.name}</span>
                `;
                option.addEventListener('click', () => switchLanguage(code));
                dropdown.appendChild(option);
            });
        }
        
        function switchLanguage(newLanguage) {
            currentLanguage = newLanguage;
            localStorage.setItem('phoenix-language', currentLanguage);
            translatePage();
            populateLanguageDropdown();
            document.getElementById('languageDropdown').classList.remove('show');
            
            // Update speech recognition language if available
            if (recognition && supportedLanguages[currentLanguage]) {
                recognition.lang = supportedLanguages[currentLanguage].speechLang;
            }
        }
        
        function toggleLanguageDropdown() {
            const dropdown = document.getElementById('languageDropdown');
            dropdown.classList.toggle('show');
        }
        
        function translateElement(element, key, isPlaceholder = false, isTitle = false) {
            const currentTranslations = translations[currentLanguage] || translations['en'];
            const translation = currentTranslations[key] || (translations['en'][key] || key);
            
            if (isPlaceholder) {
                element.placeholder = translation;
            } else if (isTitle) {
                element.title = translation;
            } else {
                element.textContent = translation;
            }
        }
        
        function translatePage() {
            const currentTranslations = translations[currentLanguage] || translations['en'];
            
            // Translate elements with data-translate attribute
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                translateElement(element, key);
            });
            
            // Translate placeholders
            const chatInput = document.getElementById('chatInput');
            if (chatInput) {
                translateElement(chatInput, 'input_placeholder', true);
            }
            
            const searchInput = document.getElementById('searchInput');
            if (searchInput && currentTranslations['search_placeholder']) {
                searchInput.placeholder = currentTranslations['search_placeholder'] || 'Search conversations...';
            }
            
            // Update welcome message if visible
            const welcomeMessage = document.querySelector('.welcome-message');
            if (welcomeMessage) {
                const welcomeTitle = currentTranslations['welcome_title'] || translations['en']['welcome_title'];
                const welcomeText = currentTranslations['welcome_message'] || translations['en']['welcome_message'];
                welcomeMessage.innerHTML = '<h2>' + welcomeTitle + '</h2><p>' + welcomeText + '</p>';
            }
            
            // Translate button titles
            const micButton = document.getElementById('voiceBtn');
            if (micButton) {
                translateElement(micButton, 'mic_button_title', false, true);
            }
            
            // Update RAG indicators
            document.querySelectorAll('.rag-indicator').forEach(indicator => {
                const iconHtml = '<svg class="rag-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>';
                indicator.innerHTML = iconHtml + (currentTranslations['rag_indicator'] || translations['en']['rag_indicator']);
            });
            
            // Update current language display
            if (supportedLanguages[currentLanguage]) {
                document.getElementById('currentLanguage').textContent = supportedLanguages[currentLanguage].name;
                document.getElementById('currentFlag').src = 'https://flagcdn.com/20x15/' + supportedLanguages[currentLanguage].flag + '.png';
                document.getElementById('currentFlag').alt = supportedLanguages[currentLanguage].name;
            }
            
            // Update theme toggle button text
            const currentTheme = document.body.classList.contains('dark-theme') ? 'dark' : 'light';
            applyTheme(currentTheme);
        }
        
        // Voice Input Functions
        function initializeSpeechRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                
                recognition.continuous = true;
                recognition.interimResults = true;
                recognition.lang = supportedLanguages[currentLanguage] ? supportedLanguages[currentLanguage].speechLang : 'en-US';
                
                recognition.onstart = function() {
                    isListening = true;
                    document.getElementById('voiceBtn').classList.add('recording');
                    const currentTranslations = translations[currentLanguage] || translations['en'];
                    document.getElementById('voiceStatus').textContent = currentTranslations['voice_recording'] || translations['en']['voice_recording'];
                    document.getElementById('voiceStatus').classList.add('listening');
                };
                
                recognition.onresult = function(event) {
                    let finalTranscript = '';
                    let interimTranscript = '';
                    
                    // Process all results from the current event
                    for (let i = event.resultIndex; i < event.results.length; i++) {
                        const transcript = event.results[i][0].transcript;
                        if (event.results[i].isFinal) {
                            finalTranscript += transcript + ' ';
                        } else {
                            interimTranscript += transcript;
                        }
                    }
                    
                    // Build the complete transcript
                    let completeTranscript = '';
                    
                    // Add all previous final results
                    for (let i = 0; i < event.resultIndex; i++) {
                        if (event.results[i].isFinal) {
                            completeTranscript += event.results[i][0].transcript + ' ';
                        }
                    }
                    
                    // Add current results
                    completeTranscript += finalTranscript + interimTranscript;
                    
                    // Update the input field in real-time
                    document.getElementById('chatInput').value = completeTranscript.trim();
                    
                    // Visual feedback for final results
                    if (finalTranscript.trim()) {
                        const currentTranslations = translations[currentLanguage] || translations['en'];
                        document.getElementById('voiceStatus').textContent = currentTranslations['voice_complete'] || translations['en']['voice_complete'];
                    }
                };
                
                recognition.onerror = function(event) {
                    isListening = false;
                    document.getElementById('voiceBtn').classList.remove('recording', 'processing');
                    document.getElementById('voiceStatus').classList.remove('listening', 'processing');
                    
                    const currentTranslations = translations[currentLanguage] || translations['en'];
                    let errorMessage = currentTranslations['voice_error'] || translations['en']['voice_error'];
                    
                    switch(event.error) {
                        case 'no-speech':
                            errorMessage = currentTranslations['voice_no_speech'] || translations['en']['voice_no_speech'];
                            break;
                        case 'network':
                            errorMessage = currentTranslations['voice_network'] || translations['en']['voice_network'];
                            break;
                        case 'not-allowed':
                            errorMessage = currentTranslations['voice_not_allowed'] || translations['en']['voice_not_allowed'];
                            break;
                    }
                    
                    document.getElementById('voiceStatus').textContent = errorMessage;
                    document.getElementById('voiceStatus').classList.add('listening');
                    setTimeout(() => {
                        document.getElementById('voiceStatus').classList.remove('listening');
                    }, 3000);
                };
                
                recognition.onend = function() {
                    isListening = false;
                    document.getElementById('voiceBtn').classList.remove('recording', 'processing');
                    document.getElementById('voiceStatus').classList.remove('listening', 'processing');
                };
                
            } else {
                document.getElementById('voiceBtn').style.opacity = '0.5';
                document.getElementById('voiceBtn').disabled = true;
                const currentTranslations = translations[currentLanguage] || translations['en'];
                document.getElementById('voiceBtn').title = currentTranslations['voice_not_supported'] || translations['en']['voice_not_supported'];
            }
        }
        
        function toggleVoiceInput() {
            const currentTranslations = translations[currentLanguage] || translations['en'];
            
            if (!recognition) {
                document.getElementById('voiceStatus').textContent = currentTranslations['voice_not_supported'] || translations['en']['voice_not_supported'];
                document.getElementById('voiceStatus').classList.add('listening');
                setTimeout(() => {
                    document.getElementById('voiceStatus').classList.remove('listening');
                }, 3000);
                return;
            }
            
            if (isListening) {
                recognition.stop();
                isListening = false;
                document.getElementById('voiceBtn').classList.remove('recording');
                document.getElementById('voiceStatus').classList.remove('listening');
            } else {
                recognition.start();
            }
        }
        
        // Message Handling Functions
        function addMessage(content, role, timestamp, messageId, ragEnabled = false) {
            const chatMessages = document.getElementById('chatMessages');
            
            // Remove welcome message if it exists
            const welcomeMessage = chatMessages.querySelector('.welcome-message');
            if (welcomeMessage) {
                welcomeMessage.remove();
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ' + role;
            messageDiv.setAttribute('data-message-id', messageId);
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            
            if (role === 'user') {
                avatar.textContent = currentUser ? currentUser.userAttributes.given_name.charAt(0).toUpperCase() : 'U';
            } else {
                avatar.innerHTML = '<svg class="message-avatar-svg" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M12 2c-1.5 0-2.8.5-3.8 1.3-1.2 1-2 2.5-2.2 4.2-.1.8-.1 1.7 0 2.5.2 1.2.6 2.3 1.2 3.3.3.5.7 1 1.1 1.4.2.2.4.4.6.5.1.1.2.1.3.2l.2.1c.1 0 .1.1.2.1h.1c.1 0 .2 0 .3-.1.2-.1.4-.2.5-.4.3-.3.5-.7.6-1.1.1-.4.1-.8 0-1.2-.1-.4-.3-.7-.6-1-.2-.2-.4-.4-.7-.5-.2-.1-.4-.1-.6-.1-.2 0-.4.1-.6.2-.3.2-.5.5-.6.8 0 .1 0 .2.1.3 0 .1.1.2.2.2.1.1.2.1.3.1.1 0 .2 0 .3-.1.2-.1.3-.3.4-.5 0-.1.1-.2.1-.3 0-.1-.1-.2-.1-.3-.1-.1-.2-.1-.3-.1-.1 0-.2.1-.2.2 0 .1.1.2.2.2.1 0 .1-.1.1-.1 0-.1-.1-.1-.1-.1m7.8 3.7c.6-1 .9-2.2.9-3.4 0-1.2-.3-2.4-.9-3.4C18.7 3.5 17.4 2.5 16 2c.8.3 1.5.8 2.1 1.4 1 1 1.6 2.3 1.6 3.6 0 1.3-.6 2.6-1.6 3.6-.6.6-1.3 1.1-2.1 1.4 1.4-.5 2.7-1.5 3.8-3 M8 2c1.4.5 2.7 1.5 3.8 3 .6-1 .9-2.2.9-3.4 0-1.2-.3-2.4-.9-3.4C10.7 3.5 9.4 2.5 8 2m4 18c.8 0 1.5-.3 2.1-.9.6-.6.9-1.3.9-2.1s-.3-1.5-.9-2.1c-.6-.6-1.3-.9-2.1-.9s-1.5.3-2.1.9c-.6.6-.9 1.3-.9 2.1s.3 1.5.9 2.1c.6.6 1.3.9 2.1.9"/></svg>';
            }
            
            const contentWrapper = document.createElement('div');
            contentWrapper.className = 'message-content-wrapper';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            
            // Use enhanced content formatting for assistant messages, simple formatting for user messages
            if (role === 'assistant') {
                messageContent.innerHTML = formatMessageContent(content);
            } else {
                // Simple formatting for user messages
                const formattedContent = content
                    .split(/\n\n+/)
                    .map(paragraph => paragraph.trim())
                    .filter(paragraph => paragraph)
                    .map(paragraph => `<p style="margin: 0 0 1em 0;">${paragraph.replace(/\n/g, '<br>')}</p>`)
                    .join('');
                messageContent.innerHTML = formattedContent || content.replace(/\n/g, '<br>');
            }
            
            contentWrapper.appendChild(messageContent);
            
            if (role === 'assistant' && ragEnabled) {
                const ragIndicator = document.createElement('div');
                ragIndicator.className = 'rag-indicator';
                const currentTranslations = translations[currentLanguage] || translations['en'];
                const ragText = currentTranslations['rag_indicator'] || translations['en']['rag_indicator'];
                ragIndicator.innerHTML = '<svg class="rag-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>' + ragText;
                contentWrapper.appendChild(ragIndicator);
            }
            
            if (role === 'assistant') {
                const feedbackButtons = document.createElement('div');
                feedbackButtons.className = 'feedback-buttons';
                
                const thumbsUpBtn = document.createElement('button');
                thumbsUpBtn.className = 'feedback-btn thumbs-up';
                thumbsUpBtn.innerHTML = '';
                const currentTranslations = translations[currentLanguage] || translations['en'];
                thumbsUpBtn.title = currentTranslations['thumbs_up_title'] || translations['en']['thumbs_up_title'];
                thumbsUpBtn.addEventListener('click', function() {
                    handleFeedback(messageDiv.getAttribute('data-message-id'), 'good', content);
                });
                
                const thumbsDownBtn = document.createElement('button');
                thumbsDownBtn.className = 'feedback-btn thumbs-down';
                thumbsDownBtn.innerHTML = '';
                thumbsDownBtn.title = currentTranslations['thumbs_down_title'] || translations['en']['thumbs_down_title'];
                thumbsDownBtn.addEventListener('click', function() {
                    handleFeedback(messageDiv.getAttribute('data-message-id'), 'bad', content);
                });
                
                feedbackButtons.appendChild(thumbsUpBtn);
                feedbackButtons.appendChild(thumbsDownBtn);
                contentWrapper.appendChild(feedbackButtons);
            }
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(contentWrapper);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Add to conversation history
            conversationHistory.push({
                content: content,
                role: role,
                timestamp: Math.floor(timestamp / 1000),
                messageId: messageId,
                ragEnabled: ragEnabled
            });
        }
        
        function showTypingIndicator() {
            isTyping = true;
            document.getElementById('typingIndicator').classList.add('show');
            document.getElementById('chatMessages').scrollTop = document.getElementById('chatMessages').scrollHeight;
        }
        
        function hideTypingIndicator() {
            isTyping = false;
            document.getElementById('typingIndicator').classList.remove('show');
        }
        
        // Feedback Functions
        function handleFeedback(messageId, type, content) {
            currentFeedbackData = {
                messageId: messageId,
                feedbackType: type,
                messageContent: content,
                sessionId: currentSessionId
            };
            
            const currentTranslations = translations[currentLanguage] || translations['en'];
            document.getElementById('feedbackTitle').textContent = type === 'good' ? 
                (currentTranslations['feedback_good_title'] || translations['en']['feedback_good_title']) : 
                (currentTranslations['feedback_bad_title'] || translations['en']['feedback_bad_title']);
            
            document.getElementById('feedbackText').placeholder = currentTranslations['feedback_placeholder'] || translations['en']['feedback_placeholder'];
            document.getElementById('feedbackCancel').textContent = currentTranslations['cancel'] || translations['en']['cancel'];
            document.getElementById('feedbackSubmit').textContent = currentTranslations['submit'] || translations['en']['submit'];
            
            document.getElementById('feedbackModal').classList.add('show');
            document.getElementById('feedbackText').focus();
        }
        
        function closeFeedbackModal() {
            document.getElementById('feedbackModal').classList.remove('show');
            document.getElementById('feedbackText').value = '';
            currentFeedbackData = null;
        }
        
        // Clear All History Functions
        function showClearAllHistoryModal() {
            document.getElementById('clearAllHistoryModal').classList.add('show');
            document.getElementById('clearAllConfirmInput').focus();
            
            // Setup modal event listeners
            const modal = document.getElementById('clearAllHistoryModal');
            const confirmInput = document.getElementById('clearAllConfirmInput');
            const confirmBtn = document.getElementById('clearAllConfirm');
            const cancelBtn = document.getElementById('clearAllCancel');
            
            // Enable/disable confirm button based on input
            const checkInput = () => {
                const isValid = confirmInput.value.toLowerCase() === 'delete me';
                confirmBtn.disabled = !isValid;
                confirmBtn.style.opacity = isValid ? '1' : '0.5';
            };
            
            confirmInput.addEventListener('input', checkInput);
            confirmInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !confirmBtn.disabled) {
                    clearAllChatHistory();
                }
            });
            
            confirmBtn.onclick = clearAllChatHistory;
            cancelBtn.onclick = closeClearAllHistoryModal;
            
            // Close on background click
            modal.onclick = (e) => {
                if (e.target === modal) {
                    closeClearAllHistoryModal();
                }
            };
        }
        
        function closeClearAllHistoryModal() {
            document.getElementById('clearAllHistoryModal').classList.remove('show');
            document.getElementById('clearAllConfirmInput').value = '';
            document.getElementById('clearAllConfirm').disabled = true;
        }
        
        async function clearAllChatHistory() {
            try {
                // Show loading state
                const confirmBtn = document.getElementById('clearAllConfirm');
                confirmBtn.textContent = 'Clearing...';
                confirmBtn.disabled = true;
                
                // Get all user sessions first
                const response = await fetch(CHAT_HISTORY_ENDPOINT + '/sessions', {
                    headers: { 'Authorization': 'Bearer ' + accessToken }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    const allSessions = [...data.sessions.today, ...data.sessions.thisWeek, ...data.sessions.older];
                    
                    // Delete each session
                    const deletePromises = allSessions.map(session => 
                        fetch(CHAT_HISTORY_ENDPOINT + '/sessions/' + session.sessionId, {
                            method: 'DELETE',
                            headers: { 'Authorization': 'Bearer ' + accessToken }
                        })
                    );
                    
                    await Promise.all(deletePromises);
                    
                    // Clear local storage and UI
                    localStorage.removeItem('phoenix-current-session');
                    conversationHistory = [];
                    
                    // Create new session
                    createNewSession();
                    
                    // Refresh chat history display
                    displayChatHistory({ today: [], thisWeek: [], older: [] });
                    
                    // Close modal and show success
                    closeClearAllHistoryModal();
                    showNotification('All chat history has been cleared successfully', 'success');
                    
                } else {
                    throw new Error('Failed to fetch sessions');
                }
                
            } catch (error) {
                console.error('Error clearing all chat history:', error);
                showNotification('Failed to clear chat history. Please try again.', 'error');
                confirmBtn.textContent = 'Clear All History';
                confirmBtn.disabled = false;
            }
        }
        
        function showFeedbackConfirmation() {
            const currentTranslations = translations[currentLanguage] || translations['en'];
            const message = currentTranslations['feedback_thanks'] || 'Thanks for your feedback!';
            
            // Create a temporary notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 20px; right: 20px; z-index: 10000;
                background: #4caf50; color: white; padding: 12px 20px;
                border-radius: 8px; font-size: 14px; font-weight: 500;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                animation: slideIn 0.3s ease-out;
            `;
            notification.textContent = message;
            
            // Add slide-in animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.animation = 'slideIn 0.3s ease-out reverse';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                    if (style.parentNode) {
                        style.parentNode.removeChild(style);
                    }
                }, 300);
            }, 3000);
        }
        
        // Theme functionality
        function initializeTheme() {
            const savedTheme = localStorage.getItem('phoenixTheme') || 'light';
            applyTheme(savedTheme);
        }
        
        function toggleTheme() {
            console.log('Theme toggle clicked'); // Debug log
            const currentTheme = document.body.classList.contains('dark-theme') ? 'dark' : 'light';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            console.log('Current theme:', currentTheme, 'New theme:', newTheme); // Debug log
            applyTheme(newTheme);
            localStorage.setItem('phoenixTheme', newTheme);
        }
        
        function applyTheme(theme) {
            console.log('Applying theme:', theme); // Debug log
            const themeToggle = document.getElementById('themeToggle');
            
            if (!themeToggle) {
                console.log('Theme toggle element not found!'); // Debug log
                return;
            }
            
            const themeIcon = themeToggle.querySelector('.theme-icon');
            const currentTranslations = translations[currentLanguage] || translations['en'];
            
            if (theme === 'dark') {
                console.log('Switching to dark theme'); // Debug log
                document.body.classList.add('dark-theme');
                if (themeIcon) themeIcon.textContent = '';
                const textSpan = themeToggle.querySelector('span:last-child');
                if (textSpan) textSpan.textContent = currentTranslations['theme_light'] || 'Light Theme';
            } else {
                console.log('Switching to light theme'); // Debug log
                document.body.classList.remove('dark-theme');
                if (themeIcon) themeIcon.textContent = '';
                const textSpan = themeToggle.querySelector('span:last-child');
                if (textSpan) textSpan.textContent = currentTranslations['theme_dark'] || 'Dark Theme';
            }
            
            console.log('Body classes after theme change:', document.body.className); // Debug log
        }
        
        async function submitFeedback() {
            if (!currentFeedbackData) return;
            
            const feedbackText = document.getElementById('feedbackText').value;
            const feedbackData = {
                ...currentFeedbackData,
                feedbackText: feedbackText,
                timestamp: Math.floor(Date.now() / 1000),
                userEmail: document.getElementById('userEmail').textContent || 'unknown@example.com',
                userName: document.getElementById('userName').textContent || 'Unknown User'
            };
            
            try {
                const response = await fetch(API_ENDPOINT + '/feedback', {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + accessToken
                    },
                    body: JSON.stringify(feedbackData)
                });
                
                if (response.ok) {
                    closeFeedbackModal();
                    showFeedbackConfirmation();
                    
                    // Update feedback button styling
                    const messageElement = document.querySelector(`[data-message-id="${currentFeedbackData.messageId}"]`);
                    if (messageElement) {
                        const buttons = messageElement.querySelectorAll('.feedback-btn');
                        buttons.forEach(btn => btn.classList.remove('selected'));
                        
                        const targetButton = messageElement.querySelector('.feedback-btn.' + 
                            (currentFeedbackData.feedbackType === 'good' ? 'thumbs-up' : 'thumbs-down'));
                        if (targetButton) {
                            targetButton.classList.add('selected');
                        }
                    }
                } else if (response.status === 401) {
                    const refreshed = await refreshAccessToken();
                    if (refreshed) {
                        submitFeedback(); // Retry
                    } else {
                        handleLogout();
                    }
                }
            } catch (error) {
                console.error('Error submitting feedback:', error);
            }
        }
        
        // Debug page reloads
        window.addEventListener('beforeunload', function(e) {
            console.log('=== PAGE ABOUT TO RELOAD/UNLOAD ===');
            console.trace('Page reload stack trace:');
        });
        
        // Debug navigation/redirect
        const originalLocation = window.location.href;
        setInterval(() => {
            if (window.location.href !== originalLocation) {
                console.log('=== NAVIGATION DETECTED ===');
                console.log('From:', originalLocation);
                console.log('To:', window.location.href);
            }
        }, 100);
        
        // Debug any errors that might cause reloads
        window.addEventListener('error', function(e) {
            console.log('=== JAVASCRIPT ERROR ===', e.error);
            console.trace('Error stack trace:');
        });
        
        // Initialize the app
        init();
    </script>
</body>
</html>